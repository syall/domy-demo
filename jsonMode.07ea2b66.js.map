{"version":3,"sources":["node_modules/monaco-editor/esm/vs/language/json/workerManager.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/scanner.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/format.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/parser.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/edit.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/main.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/objects.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-languageserver-types/main.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-languageserver-textdocument/lib/esm/main.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/jsonLanguageTypes.js","node_modules/monaco-editor/esm/vs/language/json/fillers/vscode-nls.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/parser/jsonParser.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/json.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/strings.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonCompletion.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonHover.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-uri/index.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonSchemaService.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonValidation.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/colors.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonDocumentSymbols.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/configuration.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonFolding.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonSelectionRanges.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/jsonLanguageService.js","node_modules/monaco-editor/esm/vs/language/json/languageFeatures.js","node_modules/monaco-editor/esm/vs/language/json/tokenization.js","node_modules/monaco-editor/esm/vs/language/json/jsonMode.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["STOP_WHEN_IDLE_FOR","WorkerManager","defaults","_this","_defaults","_worker","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","onDidChange","_stopWorker","prototype","dispose","_client","clearInterval","timePassedSinceLastUsed","Date","now","_getClient","monaco","editor","createWebWorker","moduleId","label","languageId","createData","languageSettings","diagnosticsOptions","enableSchemaRequest","getProxy","getLanguageServiceWorker","resources","_i","arguments","length","then","client","_","withSyncedResources","createScanner","text","ignoreTrivia","len","pos","value","tokenOffset","token","lineNumber","lineStartOffset","tokenLineStartOffset","prevTokenLineStartOffset","scanError","scanHexDigits","count","exact","digits","ch","charCodeAt","setPosition","newPosition","scanNumber","start","isDigit","substring","end","scanString","result","ch2","ch3","String","fromCharCode","isLineBreak","scanNext","code","isWhiteSpace","safeLength","commentClosed","isUnknownContentCharacter","scanNextNonTrivia","getPosition","scan","getToken","getTokenValue","getTokenOffset","getTokenLength","getTokenStartLine","getTokenStartCharacter","getTokenError","format","documentText","range","options","initialIndentLevel","formatText","formatTextStart","rangeStart","rangeEnd","offset","isEOL","endOffset","computeIndentLevel","eol","getEOL","lineBreak","indentLevel","indentValue","insertSpaces","repeat","tabSize","scanner","hasError","newLineAndIndent","editOperations","addEdit","startOffset","push","content","firstToken","firstTokenStart","initialIndent","firstTokenEnd","secondToken","replaceContent","commentTokenStart","secondTokenStart","s","i","nChars","charAt","Math","floor","indexOf","ParseOptions","DEFAULT","allowTrailingComma","getLocation","position","segments","earlyReturnException","Object","previousNode","undefined","previousNodeInst","type","parent","isAtPropertyKey","setPreviousNode","colonOffset","visit","onObjectBegin","onObjectProperty","name","onObjectEnd","pop","onArrayBegin","onArrayEnd","onLiteralValue","getNodeType","onSeparator","sep","last","e","path","matches","pattern","k","parse","errors","currentProperty","currentParent","previousParents","onValue","Array","isArray","visitor","object","array","onError","error","parseTree","children","ensurePropertyComplete","valueNode","findNodeAtLocation","root","node","path_1","segment","found","_a","_b","propertyNode","index","getNodePath","key","getNodeValue","map","obj","create","prop","contains","includeRightBound","findNodeAtOffset","item","_scanner","toNoArgVisit","visitFunction","toOneArgVisit","arg","onComment","disallowComments","handleError","skipUntilAfter","skipUntil","parseString","isValue","parseLiteral","JSON","parseProperty","parseValue","parseObject","needsComma","parseArray","allowEmptyContent","stripComments","replaceCh","parts","kind","replace","join","removeProperty","formattingOptions","setProperty","originalPath","getInsertionIndex","slice","lastSegment","Error","withFormatting","stringify","existing","propertyIndex","removeBegin","removeEnd","previous","next","newProperty","p","edit","insertIndex","removalIndex","toRemove","parentEndOffset","newText","applyEdit","begin","edits","edit_1","min","max","editLength","isWS","parser","printParseErrorCode","formatter","modify","applyEdits","equals","one","other","oneKeys","sort","otherKeys","isNumber","val","isDefined","isBoolean","isString","Position","line","character","is","candidate","Is","objectLiteral","number","Range","two","three","four","Location","uri","defined","string","LocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","Color","red","green","blue","alpha","ColorInformation","color","ColorPresentation","textEdit","additionalTextEdits","TextEdit","typedArray","FoldingRangeKind","FoldingRange","startLine","endLine","startCharacter","endCharacter","DiagnosticRelatedInformation","location","message","DiagnosticSeverity","Warning","Information","Hint","DiagnosticTag","Unnecessary","Deprecated","Diagnostic","severity","source","relatedInformation","Command","title","command","args","insert","del","TextDocumentEdit","textDocument","VersionedTextDocumentIdentifier","CreateFile","overwrite","ignoreIfExists","boolean","RenameFile","oldUri","newUri","DeleteFile","recursive","ignoreIfNotExists","WorkspaceEdit","changes","documentChanges","every","change","TextEditChangeImpl","delete","add","all","clear","splice","WorkspaceChange","workspaceEdit","_textEditChanges","_workspaceEdit","forEach","textEditChange","keys","defineProperty","get","enumerable","configurable","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","TextDocumentIdentifier","version","TextDocumentItem","MarkupKind","PlainText","Markdown","MarkupContent","CompletionItemKind","Text","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","File","Reference","Folder","EnumMember","Constant","Struct","Event","Operator","TypeParameter","InsertTextFormat","CompletionItemTag","CompletionItem","CompletionList","items","isIncomplete","MarkedString","fromPlainText","plainText","language","Hover","contents","ParameterInformation","documentation","SignatureInformation","parameters","DocumentHighlightKind","Read","Write","DocumentHighlight","SymbolKind","Namespace","Package","Number","Boolean","Key","Null","SymbolTag","SymbolInformation","containerName","DocumentSymbol","detail","selectionRange","deprecated","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","CodeActionContext","diagnostics","only","CodeAction","commandOrEdit","isPreferred","CodeLens","data","FormattingOptions","DocumentLink","target","SelectionRange","EOL","TextDocument","FullTextDocument","lineCount","func","getText","positionAt","offsetAt","document","sortedEdits","mergeSort","a","b","diff","lastModifiedOffset","compare","left","right","leftIdx","rightIdx","ret","_uri","_languageId","_version","_content","_lineOffsets","update","event","getLineOffsets","lineOffsets","isLineStart","low","high","mid","lineOffset","nextLineOffset","toString","call","check","changes_1","isIncremental","getWellformedRange","addedLineOffsets","computeLineOffsets","apply","concat","isFull","rangeLength","getWellformedEdit","isAtLineStart","textOffset","ErrorCode","ClientCapabilities","LATEST","completion","completionItem","documentationFormat","commitCharactersSupport","match","rest","localize","loadMessageBundle","file","config","opt","__extends","extendStatics","d","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","nls","formats","errorMessage","ASTNodeImpl","NullASTNodeImpl","_super","BooleanASTNodeImpl","boolValue","ArrayASTNodeImpl","NumberASTNodeImpl","isInteger","NaN","StringASTNodeImpl","PropertyASTNodeImpl","keyNode","ObjectASTNodeImpl","properties","asSchema","schema","EnumMatch","SchemaCollector","focusOffset","exclude","schemas","merge","include","newSub","NoOpSchemaCollector","instance","ValidationResult","problems","propertiesMatches","propertiesValueMatches","primaryValueMatches","enumValueMatch","enumValues","hasProblems","mergeAll","validationResults","validationResults_1","validationResult","mergeEnumValues","EnumValueMismatch","v","mergePropertyMatch","propertyValidationResult","newJSONDocument","JSONDocument","Json","syntaxErrors","comments","getNodeFromOffset","doVisit_1","ctn","validate","getMatchingSchemas","matchingSchemas","_validateObjectNode","_validateArrayNode","_validateStringNode","_validateNumberNode","_validateNode","matchesType","some","allOf","subSchemaRef","notSchema","not","subValidationResult","subMatchingSchemas","_c","ms","inverted","testAlternatives","alternatives","maxOneMatch","bestMatch","alternatives_1","subSchema","compareResult","anyOf","oneOf","testBranch","testCondition","ifSchema","thenSchema","elseSchema","if","else","enum","_d","_e","const","deprecationMessage","multipleOf","getExclusiveLimit","limit","exclusive","getLimit","exclusiveMinimum","minimum","exclusiveMaximum","maximum","minLength","maxLength","regex","RegExp","test","patternErrorMessage","exec","subSchemas","itemValidationResult","additionalItems","itemSchema","containsSchema","doesContain","minItems","maxItems","uniqueItems","values_1","duplicates","lastIndexOf","seenKeys","unprocessedProperties","required","propertyName","propertyProcessed","propertySchema","child","patternProperties","_f","_g","propertyPattern","_h","_j","additionalProperties","_k","unprocessedProperties_1","_l","unprocessedProperties_2","maxProperties","minProperties","dependencies","_m","_o","propertyDep","_p","propertyDep_1","requiredProp","propertyNames","_q","_r","f","lastProblemOffset","commentRanges","collectComments","_scanNext","token_1","_checkScanError","_accept","_errorAtRange","_error","_finalize","token_2","InvalidUnicode","InvalidEscapeCharacter","UnexpectedEndOfNumber","UnexpectedEndOfComment","UnexpectedEndOfString","InvalidCharacter","_parseArray","ValueExpected","commaOffset","TrailingComma","CommaExpected","_parseValue","CommaOrCloseBacketExpected","_parseProperty","keysSeen","_parseString","Undefined","seen","DuplicateKey","ColonExpected","_parseObject","PropertyExpected","property","CommaOrCloseBraceExpected","_parseNumber","tokenValue","numberValue","_parseLiteral","_root","stringifyObject","indent","stringifyLiteral","newIndent","startsWith","haystack","needle","endsWith","convertSimple2RegExpPattern","valueCommitCharacters","propertyCommitCharacters","JSONCompletion","schemaService","contributions","promiseConstructor","clientCapabilities","Promise","templateVarIdCounter","doResolve","resolveCompletion","resolver","resolve","doComplete","doc","isInComment","currentWord","getCurrentWord","overwriteRange","overwriteStart","supportsCommitCharacters","proposed","collector","suggestion","shortendedLabel","substr","trim","insertText","commitCharacters","setAsIncomplete","console","log","getNumberOfProposals","getSchemaForResource","collectionPromises","addValue","currentKey","separatorAfter_1","evaluateSeparatorAfter","getPropertyCompletions","getSchemaLessPropertyCompletions","location_1","Parser","contribution","collectPromise","collectPropertyCompletions","getLabelForValue","getInsertTextForProperty","insertTextFormat","types","getValueCompletions","getSchemaLessValueCompletions","getContributedValueCompletions","offsetForSeparator","separatorAfter","addFillerValueCompletions","schemaProperties_1","doNotSuggest","proposal","filterText","getFilterTextForValue","fromMarkup","markdownDescription","description","collectCompletionsForSimilarObject","getInsertTextForValue","parentKey_1","n","getSuggestionKind","collectSuggestionsForValues","getLabelTextForMatchingNode","getInsertTextForMatchingNode","addBooleanValueCompletion","parentKey_2","addDollarSchemaCompletions","parentKey_3","parentKey","addSchemaValueCompletions","valueNode_1","separatorAfter_2","findItemAtOffset","addNullValueCompletion","collectDefaultCompletions","parentKey_4","location_2","collectValueCompletions","addEnumValueCompletions","addDefaultValueCompletions","collectTypes","arrayDepth","hasProposals","default","examples","example","defaultSnippets","body","type_1","getInsertTextForSnippetValue","getFilterTextForSnippetValue","getLabelForSnippetValue","bodyText","prefix","suffix","split","enm","markdownEnumDescriptions","doesSupportMarkdown","enumDescriptions","t","getInsertTextForGuessedValue","schemaIds","getRegisteredSchemaIds","schemaId","getInsertTextForPlainText","replacer","snippetValue","propertyText","resultText","nValueProposals","markupString","supportsMarkdown","doesSupportsCommitCharacters","JSONHover","promise","doHover","hoverRangeNode","hoverRange","createHover","getInfoContribution","htmlContent","title_1","markdownDescription_1","markdownEnumValueDescription_1","enumValue_1","toMarkdown","idx","toMarkdownCodeBlock","plain","res","isWindows","process","platform","navigator","userAgent","isHighSurrogate","charCode","isLowSurrogate","isLowerAsciiHex","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","_schemePattern","_singleSlashStart","_doubleSlashStart","_validateUri","_strict","scheme","authority","query","fragment","_schemeFix","_referenceResolution","_slash","_empty","_regexp","URI","schemeOrData","isUri","thing","fsPath","with","_makeFsPath","_URI","decodeURIComponent","from","components","skipEncoding","_asFormatted","toJSON","revive","_formatted","external","_fsPath","_sep","_pathSepMarker","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","encodeURIComponent","escaped","encodeURIComponentMinimal","toLowerCase","encoder","userinfo","FilePatternAssociation","patternRegExp","Strings","addSchema","id","matchesPattern","fileName","getSchemas","SchemaHandle","service","url","unresolvedSchemaContent","unresolvedSchema","UnresolvedSchema","getUnresolvedSchema","loadSchema","getResolvedSchema","resolvedSchema","unresolved","resolveSchemaContent","clearSchema","ResolvedSchema","getSection","getSectionRecursive","shift","parseInt","isNaN","JSONSchemaService","requestService","contextService","callOnDispose","contributionSchemas","contributionAssociations","schemasById","filePatternAssociations","filePatternAssociationById","registeredSchemasIds","filter","onResourceChange","hasChanges","normalizeId","toWalk","curr","handle","setSchemaContributions","schemaContributions","normalizedId","addSchemaHandle","schemaAssociations","associations","fpa","getOrAddFilePatternAssociation","associations_1","schemaHandle","getOrAddSchemaHandle","registerExternalSchema","filePatterns","filePatterns_1","clearExternalSchemas","toDisplayString","schemaContent","jsonErrors","errorSplit","schemaToResolve","schemaURL","resolveErrors","$schema","findSection","current","part","sourceRoot","sourceURI","section","resolveExternalLink","linkPath","parentSchemaURL","parentSchemaDependencies","resolveRelativePath","referencedHandle","loc","resolveRefs","parentSchema","openPromises","collectEntries","entries","entries_1","entry","collectMapEntries","maps","maps_1","collectArrayEntries","arrays","arrays_1","array_1","handleRef","seenRefs","$ref","ref","definitions","resource","schemaProperties","schemeId","createCombinedSchema","combinedSchemaId","combinedSchema","JSONValidation","jsonSchemaService","validationEnabled","configure","raw","commentSeverity","allowComments","doValidation","jsonDocument","documentSettings","added","addProblem","problem","signature","getDiagnostics","trailingCommaSeverity","toDiagnosticSeverity","trailingCommas","astRoot","SchemaResolveError","semanticErrors","schemaAllowsComments","schemaAllowsTrailingCommas","message_1","c","CommentNotPermitted","idCounter","schemaRef","allow","allowTrailingCommas","severityLevel","Digit0","Digit9","A","hexDigit","colorFromHex","colorFrom256RGB","JSONDocumentSymbols","findDocumentSymbols","context","resultLimit","MAX_VALUE","resourceString","result_1","getRange","onResultLimitExceeded","toVisit","nextToVisit","limitExceeded","collectOutlineEntries","childContainerName","getKeyLabel","getSymbolKind","findDocumentSymbols2","result_2","symbol","nodeType","findDocumentColors","visitedNode","matchingSchemas_1","nodeId","getColorPresentations","red256","round","green256","blue256","toTwoDigitHex","r","descriptions","$id","$comment","readOnly","contentMediaType","contentEncoding","schemaName","propertyObject","getFoldingRanges","ranges","nestingLevels","stack","prevStart","addRange","Comment","m","Region","rangeLimit","onRangeLimitExceeded","counts","nestingLevels_1","level","maxLevel","getSelectionRanges","positions","getSelectionRange","cStart","cEnd","newRange","afterCommaOffset","getOffsetAfterNextToken","expectedToken","getLanguageService","params","schemaRequestService","workspaceContext","jsonCompletion","jsonHover","jsonDocumentSymbols","jsonValidation","settings","fileMatch","resetSchema","bind","parseJSONDocument","findColorSymbols","o","Uri","DiagnosticsAdapter","_disposables","_listener","onModelAdd","model","modeId","getModeId","onDidChangeContent","clearTimeout","setTimeout","_doValidate","onModelRemoved","setModelMarkers","uriStr","listener","onDidCreateModel","onWillDisposeModel","_resetSchema","onDidChangeModelLanguage","getModels","worker","markers","toDiagnostics","getModel","err","toSeverity","lsSeverity","jsonService","MarkerSeverity","Info","diag","startLineNumber","startColumn","endLineNumber","endColumn","fromPosition","column","fromRange","toRange","toCompletionItemKind","mItemKind","languages","fromCompletionItemKind","toTextEdit","CompletionAdapter","provideCompletionItems","info","wordInfo","getWordUntilPosition","wordRange","sortText","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","suggestions","isMarkupContent","toMarkdownString","toMarkedStringArray","HoverAdapter","provideHover","toLocation","toSymbolKind","mKind","DocumentSymbolAdapter","provideDocumentSymbols","tags","fromFormattingOptions","DocumentFormattingEditProvider","provideDocumentFormattingEdits","DocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","DocumentColorAdapter","provideDocumentColors","infos","provideColorPresentations","presentations","presentation","FoldingRangeAdapter","provideFoldingRanges","toFoldingRangeKind","Imports","SelectionRangeAdapter","provideSelectionRanges","selectionRanges","createTokenizationSupport","supportComments","getInitialState","JSONState","tokenize","state","offsetDelta","stopAtOffset","TOKEN_DELIM_OBJECT","TOKEN_DELIM_ARRAY","TOKEN_DELIM_COLON","TOKEN_DELIM_COMMA","TOKEN_VALUE_BOOLEAN","TOKEN_VALUE_NULL","TOKEN_VALUE_STRING","TOKEN_VALUE_NUMBER","TOKEN_PROPERTY_NAME","TOKEN_COMMENT_BLOCK","TOKEN_COMMENT_LINE","lastWasColon","_state","clone","getStateData","setStateData","numberOfInsertedCharacters","adjustOffset","json","tokens","endState","startIndex","scopes","setupMode","disposables","providers","uris","registerProviders","modeConfiguration","disposeAll","documentFormattingEdits","registerDocumentFormattingEditProvider","languageFeatures","documentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","completionItems","registerCompletionItemProvider","hovers","registerHoverProvider","documentSymbols","registerDocumentSymbolProvider","setTokensProvider","colors","registerColorProvider","foldingRanges","registerFoldingRangeProvider","registerSelectionRangeProvider","setLanguageConfiguration","richEditConfiguration","newDefaults","asDisposable","wordPattern","lineComment","blockComment","brackets","autoClosingPairs","open","close","notIn","OVERLAY_ID","OldModule","module","bundle","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","onclose","removeErrorOverlay","overlay","createErrorOverlay","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","deps","cached","cache","cb"],"mappings":"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","file":"jsonMode.07ea2b66.js","sourceRoot":"..","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar STOP_WHEN_IDLE_FOR = 2 * 60 * 1000; // 2min\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(defaults) {\r\n        var _this = this;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\r\n        this._lastUsedTime = 0;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        clearInterval(this._idleCheckInterval);\r\n        this._configChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._checkIfIdle = function () {\r\n        if (!this._worker) {\r\n            return;\r\n        }\r\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\r\n        if (timePassedSinceLastUsed > STOP_WHEN_IDLE_FOR) {\r\n            this._stopWorker();\r\n        }\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        this._lastUsedTime = Date.now();\r\n        if (!this._client) {\r\n            this._worker = monaco.editor.createWebWorker({\r\n                // module that exports the create() method and returns a `JSONWorker` instance\r\n                moduleId: 'vs/language/json/jsonWorker',\r\n                label: this._defaults.languageId,\r\n                // passed in to the create() method\r\n                createData: {\r\n                    languageSettings: this._defaults.diagnosticsOptions,\r\n                    languageId: this._defaults.languageId,\r\n                    enableSchemaRequest: this._defaults.diagnosticsOptions.enableSchemaRequest\r\n                }\r\n            });\r\n            this._client = this._worker.getProxy();\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient().then(function (client) {\r\n            _client = client;\r\n        }).then(function (_) {\r\n            return _this._worker.withSyncedResources(resources);\r\n        }).then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport function createScanner(text, ignoreTrivia) {\n    if (ignoreTrivia === void 0) { ignoreTrivia = false; }\n    var len = text.length;\n    var pos = 0, value = '', tokenOffset = 0, token = 16 /* Unknown */, lineNumber = 0, lineStartOffset = 0, tokenLineStartOffset = 0, prevTokenLineStartOffset = 0, scanError = 0 /* None */;\n    function scanHexDigits(count, exact) {\n        var digits = 0;\n        var value = 0;\n        while (digits < count || !exact) {\n            var ch = text.charCodeAt(pos);\n            if (ch >= 48 /* _0 */ && ch <= 57 /* _9 */) {\n                value = value * 16 + ch - 48 /* _0 */;\n            }\n            else if (ch >= 65 /* A */ && ch <= 70 /* F */) {\n                value = value * 16 + ch - 65 /* A */ + 10;\n            }\n            else if (ch >= 97 /* a */ && ch <= 102 /* f */) {\n                value = value * 16 + ch - 97 /* a */ + 10;\n            }\n            else {\n                break;\n            }\n            pos++;\n            digits++;\n        }\n        if (digits < count) {\n            value = -1;\n        }\n        return value;\n    }\n    function setPosition(newPosition) {\n        pos = newPosition;\n        value = '';\n        tokenOffset = 0;\n        token = 16 /* Unknown */;\n        scanError = 0 /* None */;\n    }\n    function scanNumber() {\n        var start = pos;\n        if (text.charCodeAt(pos) === 48 /* _0 */) {\n            pos++;\n        }\n        else {\n            pos++;\n            while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n            }\n        }\n        if (pos < text.length && text.charCodeAt(pos) === 46 /* dot */) {\n            pos++;\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n                return text.substring(start, pos);\n            }\n        }\n        var end = pos;\n        if (pos < text.length && (text.charCodeAt(pos) === 69 /* E */ || text.charCodeAt(pos) === 101 /* e */)) {\n            pos++;\n            if (pos < text.length && text.charCodeAt(pos) === 43 /* plus */ || text.charCodeAt(pos) === 45 /* minus */) {\n                pos++;\n            }\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n                end = pos;\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n            }\n        }\n        return text.substring(start, end);\n    }\n    function scanString() {\n        var result = '', start = pos;\n        while (true) {\n            if (pos >= len) {\n                result += text.substring(start, pos);\n                scanError = 2 /* UnexpectedEndOfString */;\n                break;\n            }\n            var ch = text.charCodeAt(pos);\n            if (ch === 34 /* doubleQuote */) {\n                result += text.substring(start, pos);\n                pos++;\n                break;\n            }\n            if (ch === 92 /* backslash */) {\n                result += text.substring(start, pos);\n                pos++;\n                if (pos >= len) {\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                var ch2 = text.charCodeAt(pos++);\n                switch (ch2) {\n                    case 34 /* doubleQuote */:\n                        result += '\\\"';\n                        break;\n                    case 92 /* backslash */:\n                        result += '\\\\';\n                        break;\n                    case 47 /* slash */:\n                        result += '/';\n                        break;\n                    case 98 /* b */:\n                        result += '\\b';\n                        break;\n                    case 102 /* f */:\n                        result += '\\f';\n                        break;\n                    case 110 /* n */:\n                        result += '\\n';\n                        break;\n                    case 114 /* r */:\n                        result += '\\r';\n                        break;\n                    case 116 /* t */:\n                        result += '\\t';\n                        break;\n                    case 117 /* u */:\n                        var ch3 = scanHexDigits(4, true);\n                        if (ch3 >= 0) {\n                            result += String.fromCharCode(ch3);\n                        }\n                        else {\n                            scanError = 4 /* InvalidUnicode */;\n                        }\n                        break;\n                    default:\n                        scanError = 5 /* InvalidEscapeCharacter */;\n                }\n                start = pos;\n                continue;\n            }\n            if (ch >= 0 && ch <= 0x1f) {\n                if (isLineBreak(ch)) {\n                    result += text.substring(start, pos);\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                else {\n                    scanError = 6 /* InvalidCharacter */;\n                    // mark as error but continue with string\n                }\n            }\n            pos++;\n        }\n        return result;\n    }\n    function scanNext() {\n        value = '';\n        scanError = 0 /* None */;\n        tokenOffset = pos;\n        lineStartOffset = lineNumber;\n        prevTokenLineStartOffset = tokenLineStartOffset;\n        if (pos >= len) {\n            // at the end\n            tokenOffset = len;\n            return token = 17 /* EOF */;\n        }\n        var code = text.charCodeAt(pos);\n        // trivia: whitespace\n        if (isWhiteSpace(code)) {\n            do {\n                pos++;\n                value += String.fromCharCode(code);\n                code = text.charCodeAt(pos);\n            } while (isWhiteSpace(code));\n            return token = 15 /* Trivia */;\n        }\n        // trivia: newlines\n        if (isLineBreak(code)) {\n            pos++;\n            value += String.fromCharCode(code);\n            if (code === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                pos++;\n                value += '\\n';\n            }\n            lineNumber++;\n            tokenLineStartOffset = pos;\n            return token = 14 /* LineBreakTrivia */;\n        }\n        switch (code) {\n            // tokens: []{}:,\n            case 123 /* openBrace */:\n                pos++;\n                return token = 1 /* OpenBraceToken */;\n            case 125 /* closeBrace */:\n                pos++;\n                return token = 2 /* CloseBraceToken */;\n            case 91 /* openBracket */:\n                pos++;\n                return token = 3 /* OpenBracketToken */;\n            case 93 /* closeBracket */:\n                pos++;\n                return token = 4 /* CloseBracketToken */;\n            case 58 /* colon */:\n                pos++;\n                return token = 6 /* ColonToken */;\n            case 44 /* comma */:\n                pos++;\n                return token = 5 /* CommaToken */;\n            // strings\n            case 34 /* doubleQuote */:\n                pos++;\n                value = scanString();\n                return token = 10 /* StringLiteral */;\n            // comments\n            case 47 /* slash */:\n                var start = pos - 1;\n                // Single-line comment\n                if (text.charCodeAt(pos + 1) === 47 /* slash */) {\n                    pos += 2;\n                    while (pos < len) {\n                        if (isLineBreak(text.charCodeAt(pos))) {\n                            break;\n                        }\n                        pos++;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 12 /* LineCommentTrivia */;\n                }\n                // Multi-line comment\n                if (text.charCodeAt(pos + 1) === 42 /* asterisk */) {\n                    pos += 2;\n                    var safeLength = len - 1; // For lookahead.\n                    var commentClosed = false;\n                    while (pos < safeLength) {\n                        var ch = text.charCodeAt(pos);\n                        if (ch === 42 /* asterisk */ && text.charCodeAt(pos + 1) === 47 /* slash */) {\n                            pos += 2;\n                            commentClosed = true;\n                            break;\n                        }\n                        pos++;\n                        if (isLineBreak(ch)) {\n                            if (ch === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                                pos++;\n                            }\n                            lineNumber++;\n                            tokenLineStartOffset = pos;\n                        }\n                    }\n                    if (!commentClosed) {\n                        pos++;\n                        scanError = 1 /* UnexpectedEndOfComment */;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 13 /* BlockCommentTrivia */;\n                }\n                // just a single slash\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n            // numbers\n            case 45 /* minus */:\n                value += String.fromCharCode(code);\n                pos++;\n                if (pos === len || !isDigit(text.charCodeAt(pos))) {\n                    return token = 16 /* Unknown */;\n                }\n            // found a minus, followed by a number so\n            // we fall through to proceed with scanning\n            // numbers\n            case 48 /* _0 */:\n            case 49 /* _1 */:\n            case 50 /* _2 */:\n            case 51 /* _3 */:\n            case 52 /* _4 */:\n            case 53 /* _5 */:\n            case 54 /* _6 */:\n            case 55 /* _7 */:\n            case 56 /* _8 */:\n            case 57 /* _9 */:\n                value += scanNumber();\n                return token = 11 /* NumericLiteral */;\n            // literals and unknown symbols\n            default:\n                // is a literal? Read the full word.\n                while (pos < len && isUnknownContentCharacter(code)) {\n                    pos++;\n                    code = text.charCodeAt(pos);\n                }\n                if (tokenOffset !== pos) {\n                    value = text.substring(tokenOffset, pos);\n                    // keywords: true, false, null\n                    switch (value) {\n                        case 'true': return token = 8 /* TrueKeyword */;\n                        case 'false': return token = 9 /* FalseKeyword */;\n                        case 'null': return token = 7 /* NullKeyword */;\n                    }\n                    return token = 16 /* Unknown */;\n                }\n                // some\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n        }\n    }\n    function isUnknownContentCharacter(code) {\n        if (isWhiteSpace(code) || isLineBreak(code)) {\n            return false;\n        }\n        switch (code) {\n            case 125 /* closeBrace */:\n            case 93 /* closeBracket */:\n            case 123 /* openBrace */:\n            case 91 /* openBracket */:\n            case 34 /* doubleQuote */:\n            case 58 /* colon */:\n            case 44 /* comma */:\n            case 47 /* slash */:\n                return false;\n        }\n        return true;\n    }\n    function scanNextNonTrivia() {\n        var result;\n        do {\n            result = scanNext();\n        } while (result >= 12 /* LineCommentTrivia */ && result <= 15 /* Trivia */);\n        return result;\n    }\n    return {\n        setPosition: setPosition,\n        getPosition: function () { return pos; },\n        scan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n        getToken: function () { return token; },\n        getTokenValue: function () { return value; },\n        getTokenOffset: function () { return tokenOffset; },\n        getTokenLength: function () { return pos - tokenOffset; },\n        getTokenStartLine: function () { return lineStartOffset; },\n        getTokenStartCharacter: function () { return tokenOffset - prevTokenLineStartOffset; },\n        getTokenError: function () { return scanError; },\n    };\n}\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* space */ || ch === 9 /* tab */ || ch === 11 /* verticalTab */ || ch === 12 /* formFeed */ ||\n        ch === 160 /* nonBreakingSpace */ || ch === 5760 /* ogham */ || ch >= 8192 /* enQuad */ && ch <= 8203 /* zeroWidthSpace */ ||\n        ch === 8239 /* narrowNoBreakSpace */ || ch === 8287 /* mathematicalSpace */ || ch === 12288 /* ideographicSpace */ || ch === 65279 /* byteOrderMark */;\n}\nfunction isLineBreak(ch) {\n    return ch === 10 /* lineFeed */ || ch === 13 /* carriageReturn */ || ch === 8232 /* lineSeparator */ || ch === 8233 /* paragraphSeparator */;\n}\nfunction isDigit(ch) {\n    return ch >= 48 /* _0 */ && ch <= 57 /* _9 */;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner.js';\nexport function format(documentText, range, options) {\n    var initialIndentLevel;\n    var formatText;\n    var formatTextStart;\n    var rangeStart;\n    var rangeEnd;\n    if (range) {\n        rangeStart = range.offset;\n        rangeEnd = rangeStart + range.length;\n        formatTextStart = rangeStart;\n        while (formatTextStart > 0 && !isEOL(documentText, formatTextStart - 1)) {\n            formatTextStart--;\n        }\n        var endOffset = rangeEnd;\n        while (endOffset < documentText.length && !isEOL(documentText, endOffset)) {\n            endOffset++;\n        }\n        formatText = documentText.substring(formatTextStart, endOffset);\n        initialIndentLevel = computeIndentLevel(formatText, options);\n    }\n    else {\n        formatText = documentText;\n        initialIndentLevel = 0;\n        formatTextStart = 0;\n        rangeStart = 0;\n        rangeEnd = documentText.length;\n    }\n    var eol = getEOL(options, documentText);\n    var lineBreak = false;\n    var indentLevel = 0;\n    var indentValue;\n    if (options.insertSpaces) {\n        indentValue = repeat(' ', options.tabSize || 4);\n    }\n    else {\n        indentValue = '\\t';\n    }\n    var scanner = createScanner(formatText, false);\n    var hasError = false;\n    function newLineAndIndent() {\n        return eol + repeat(indentValue, initialIndentLevel + indentLevel);\n    }\n    function scanNext() {\n        var token = scanner.scan();\n        lineBreak = false;\n        while (token === 15 /* Trivia */ || token === 14 /* LineBreakTrivia */) {\n            lineBreak = lineBreak || (token === 14 /* LineBreakTrivia */);\n            token = scanner.scan();\n        }\n        hasError = token === 16 /* Unknown */ || scanner.getTokenError() !== 0 /* None */;\n        return token;\n    }\n    var editOperations = [];\n    function addEdit(text, startOffset, endOffset) {\n        if (!hasError && startOffset < rangeEnd && endOffset > rangeStart && documentText.substring(startOffset, endOffset) !== text) {\n            editOperations.push({ offset: startOffset, length: endOffset - startOffset, content: text });\n        }\n    }\n    var firstToken = scanNext();\n    if (firstToken !== 17 /* EOF */) {\n        var firstTokenStart = scanner.getTokenOffset() + formatTextStart;\n        var initialIndent = repeat(indentValue, initialIndentLevel);\n        addEdit(initialIndent, formatTextStart, firstTokenStart);\n    }\n    while (firstToken !== 17 /* EOF */) {\n        var firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n        var secondToken = scanNext();\n        var replaceContent = '';\n        while (!lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n            // comments on the same line: keep them on the same line, but ignore them otherwise\n            var commentTokenStart = scanner.getTokenOffset() + formatTextStart;\n            addEdit(' ', firstTokenEnd, commentTokenStart);\n            firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n            replaceContent = secondToken === 12 /* LineCommentTrivia */ ? newLineAndIndent() : '';\n            secondToken = scanNext();\n        }\n        if (secondToken === 2 /* CloseBraceToken */) {\n            if (firstToken !== 1 /* OpenBraceToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else if (secondToken === 4 /* CloseBracketToken */) {\n            if (firstToken !== 3 /* OpenBracketToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else {\n            switch (firstToken) {\n                case 3 /* OpenBracketToken */:\n                case 1 /* OpenBraceToken */:\n                    indentLevel++;\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 5 /* CommaToken */:\n                case 12 /* LineCommentTrivia */:\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 13 /* BlockCommentTrivia */:\n                    if (lineBreak) {\n                        replaceContent = newLineAndIndent();\n                    }\n                    else {\n                        // symbol following comment on the same line: keep on same line, separate with ' '\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 6 /* ColonToken */:\n                    replaceContent = ' ';\n                    break;\n                case 10 /* StringLiteral */:\n                    if (secondToken === 6 /* ColonToken */) {\n                        replaceContent = '';\n                        break;\n                    }\n                // fall through\n                case 7 /* NullKeyword */:\n                case 8 /* TrueKeyword */:\n                case 9 /* FalseKeyword */:\n                case 11 /* NumericLiteral */:\n                case 2 /* CloseBraceToken */:\n                case 4 /* CloseBracketToken */:\n                    if (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */) {\n                        replaceContent = ' ';\n                    }\n                    else if (secondToken !== 5 /* CommaToken */ && secondToken !== 17 /* EOF */) {\n                        hasError = true;\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    hasError = true;\n                    break;\n            }\n            if (lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n                replaceContent = newLineAndIndent();\n            }\n        }\n        var secondTokenStart = scanner.getTokenOffset() + formatTextStart;\n        addEdit(replaceContent, firstTokenEnd, secondTokenStart);\n        firstToken = secondToken;\n    }\n    return editOperations;\n}\nfunction repeat(s, count) {\n    var result = '';\n    for (var i = 0; i < count; i++) {\n        result += s;\n    }\n    return result;\n}\nfunction computeIndentLevel(content, options) {\n    var i = 0;\n    var nChars = 0;\n    var tabSize = options.tabSize || 4;\n    while (i < content.length) {\n        var ch = content.charAt(i);\n        if (ch === ' ') {\n            nChars++;\n        }\n        else if (ch === '\\t') {\n            nChars += tabSize;\n        }\n        else {\n            break;\n        }\n        i++;\n    }\n    return Math.floor(nChars / tabSize);\n}\nfunction getEOL(options, text) {\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\r') {\n            if (i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                return '\\r\\n';\n            }\n            return '\\r';\n        }\n        else if (ch === '\\n') {\n            return '\\n';\n        }\n    }\n    return (options && options.eol) || '\\n';\n}\nexport function isEOL(text, offset) {\n    return '\\r\\n'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner.js';\nvar ParseOptions;\n(function (ParseOptions) {\n    ParseOptions.DEFAULT = {\n        allowTrailingComma: false\n    };\n})(ParseOptions || (ParseOptions = {}));\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport function getLocation(text, position) {\n    var segments = []; // strings or numbers\n    var earlyReturnException = new Object();\n    var previousNode = undefined;\n    var previousNodeInst = {\n        value: {},\n        offset: 0,\n        length: 0,\n        type: 'object',\n        parent: undefined\n    };\n    var isAtPropertyKey = false;\n    function setPreviousNode(value, offset, length, type) {\n        previousNodeInst.value = value;\n        previousNodeInst.offset = offset;\n        previousNodeInst.length = length;\n        previousNodeInst.type = type;\n        previousNodeInst.colonOffset = undefined;\n        previousNode = previousNodeInst;\n    }\n    try {\n        visit(text, {\n            onObjectBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                isAtPropertyKey = position > offset;\n                segments.push(''); // push a placeholder (will be replaced)\n            },\n            onObjectProperty: function (name, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(name, offset, length, 'property');\n                segments[segments.length - 1] = name;\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onObjectEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onArrayBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.push(0);\n            },\n            onArrayEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onLiteralValue: function (value, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(value, offset, length, getNodeType(value));\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onSeparator: function (sep, offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                if (sep === ':' && previousNode && previousNode.type === 'property') {\n                    previousNode.colonOffset = offset;\n                    isAtPropertyKey = false;\n                    previousNode = undefined;\n                }\n                else if (sep === ',') {\n                    var last = segments[segments.length - 1];\n                    if (typeof last === 'number') {\n                        segments[segments.length - 1] = last + 1;\n                    }\n                    else {\n                        isAtPropertyKey = true;\n                        segments[segments.length - 1] = '';\n                    }\n                    previousNode = undefined;\n                }\n            }\n        });\n    }\n    catch (e) {\n        if (e !== earlyReturnException) {\n            throw e;\n        }\n    }\n    return {\n        path: segments,\n        previousNode: previousNode,\n        isAtPropertyKey: isAtPropertyKey,\n        matches: function (pattern) {\n            var k = 0;\n            for (var i = 0; k < pattern.length && i < segments.length; i++) {\n                if (pattern[k] === segments[i] || pattern[k] === '*') {\n                    k++;\n                }\n                else if (pattern[k] !== '**') {\n                    return false;\n                }\n            }\n            return k === pattern.length;\n        }\n    };\n}\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport function parse(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentProperty = null;\n    var currentParent = [];\n    var previousParents = [];\n    function onValue(value) {\n        if (Array.isArray(currentParent)) {\n            currentParent.push(value);\n        }\n        else if (currentProperty !== null) {\n            currentParent[currentProperty] = value;\n        }\n    }\n    var visitor = {\n        onObjectBegin: function () {\n            var object = {};\n            onValue(object);\n            previousParents.push(currentParent);\n            currentParent = object;\n            currentProperty = null;\n        },\n        onObjectProperty: function (name) {\n            currentProperty = name;\n        },\n        onObjectEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onArrayBegin: function () {\n            var array = [];\n            onValue(array);\n            previousParents.push(currentParent);\n            currentParent = array;\n            currentProperty = null;\n        },\n        onArrayEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onLiteralValue: onValue,\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    return currentParent[0];\n}\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport function parseTree(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentParent = { type: 'array', offset: -1, length: -1, children: [], parent: undefined }; // artificial root\n    function ensurePropertyComplete(endOffset) {\n        if (currentParent.type === 'property') {\n            currentParent.length = endOffset - currentParent.offset;\n            currentParent = currentParent.parent;\n        }\n    }\n    function onValue(valueNode) {\n        currentParent.children.push(valueNode);\n        return valueNode;\n    }\n    var visitor = {\n        onObjectBegin: function (offset) {\n            currentParent = onValue({ type: 'object', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onObjectProperty: function (name, offset, length) {\n            currentParent = onValue({ type: 'property', offset: offset, length: -1, parent: currentParent, children: [] });\n            currentParent.children.push({ type: 'string', value: name, offset: offset, length: length, parent: currentParent });\n        },\n        onObjectEnd: function (offset, length) {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onArrayBegin: function (offset, length) {\n            currentParent = onValue({ type: 'array', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onArrayEnd: function (offset, length) {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onLiteralValue: function (value, offset, length) {\n            onValue({ type: getNodeType(value), offset: offset, length: length, parent: currentParent, value: value });\n            ensurePropertyComplete(offset + length);\n        },\n        onSeparator: function (sep, offset, length) {\n            if (currentParent.type === 'property') {\n                if (sep === ':') {\n                    currentParent.colonOffset = offset;\n                }\n                else if (sep === ',') {\n                    ensurePropertyComplete(offset);\n                }\n            }\n        },\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    var result = currentParent.children[0];\n    if (result) {\n        delete result.parent;\n    }\n    return result;\n}\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport function findNodeAtLocation(root, path) {\n    if (!root) {\n        return undefined;\n    }\n    var node = root;\n    for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        if (typeof segment === 'string') {\n            if (node.type !== 'object' || !Array.isArray(node.children)) {\n                return undefined;\n            }\n            var found = false;\n            for (var _a = 0, _b = node.children; _a < _b.length; _a++) {\n                var propertyNode = _b[_a];\n                if (Array.isArray(propertyNode.children) && propertyNode.children[0].value === segment) {\n                    node = propertyNode.children[1];\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                return undefined;\n            }\n        }\n        else {\n            var index = segment;\n            if (node.type !== 'array' || index < 0 || !Array.isArray(node.children) || index >= node.children.length) {\n                return undefined;\n            }\n            node = node.children[index];\n        }\n    }\n    return node;\n}\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport function getNodePath(node) {\n    if (!node.parent || !node.parent.children) {\n        return [];\n    }\n    var path = getNodePath(node.parent);\n    if (node.parent.type === 'property') {\n        var key = node.parent.children[0].value;\n        path.push(key);\n    }\n    else if (node.parent.type === 'array') {\n        var index = node.parent.children.indexOf(node);\n        if (index !== -1) {\n            path.push(index);\n        }\n    }\n    return path;\n}\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport function getNodeValue(node) {\n    switch (node.type) {\n        case 'array':\n            return node.children.map(getNodeValue);\n        case 'object':\n            var obj = Object.create(null);\n            for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n                var prop = _a[_i];\n                var valueNode = prop.children[1];\n                if (valueNode) {\n                    obj[prop.children[0].value] = getNodeValue(valueNode);\n                }\n            }\n            return obj;\n        case 'null':\n        case 'string':\n        case 'number':\n        case 'boolean':\n            return node.value;\n        default:\n            return undefined;\n    }\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return (offset >= node.offset && offset < (node.offset + node.length)) || includeRightBound && (offset === (node.offset + node.length));\n}\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport function findNodeAtOffset(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    if (contains(node, offset, includeRightBound)) {\n        var children = node.children;\n        if (Array.isArray(children)) {\n            for (var i = 0; i < children.length && children[i].offset <= offset; i++) {\n                var item = findNodeAtOffset(children[i], offset, includeRightBound);\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return node;\n    }\n    return undefined;\n}\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport function visit(text, visitor, options) {\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var _scanner = createScanner(text, false);\n    function toNoArgVisit(visitFunction) {\n        return visitFunction ? function () { return visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    function toOneArgVisit(visitFunction) {\n        return visitFunction ? function (arg) { return visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    var onObjectBegin = toNoArgVisit(visitor.onObjectBegin), onObjectProperty = toOneArgVisit(visitor.onObjectProperty), onObjectEnd = toNoArgVisit(visitor.onObjectEnd), onArrayBegin = toNoArgVisit(visitor.onArrayBegin), onArrayEnd = toNoArgVisit(visitor.onArrayEnd), onLiteralValue = toOneArgVisit(visitor.onLiteralValue), onSeparator = toOneArgVisit(visitor.onSeparator), onComment = toNoArgVisit(visitor.onComment), onError = toOneArgVisit(visitor.onError);\n    var disallowComments = options && options.disallowComments;\n    var allowTrailingComma = options && options.allowTrailingComma;\n    function scanNext() {\n        while (true) {\n            var token = _scanner.scan();\n            switch (_scanner.getTokenError()) {\n                case 4 /* InvalidUnicode */:\n                    handleError(14 /* InvalidUnicode */);\n                    break;\n                case 5 /* InvalidEscapeCharacter */:\n                    handleError(15 /* InvalidEscapeCharacter */);\n                    break;\n                case 3 /* UnexpectedEndOfNumber */:\n                    handleError(13 /* UnexpectedEndOfNumber */);\n                    break;\n                case 1 /* UnexpectedEndOfComment */:\n                    if (!disallowComments) {\n                        handleError(11 /* UnexpectedEndOfComment */);\n                    }\n                    break;\n                case 2 /* UnexpectedEndOfString */:\n                    handleError(12 /* UnexpectedEndOfString */);\n                    break;\n                case 6 /* InvalidCharacter */:\n                    handleError(16 /* InvalidCharacter */);\n                    break;\n            }\n            switch (token) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (disallowComments) {\n                        handleError(10 /* InvalidCommentToken */);\n                    }\n                    else {\n                        onComment();\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    handleError(1 /* InvalidSymbol */);\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token;\n            }\n        }\n    }\n    function handleError(error, skipUntilAfter, skipUntil) {\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        onError(error);\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token = _scanner.getToken();\n            while (token !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token) !== -1) {\n                    scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token) !== -1) {\n                    break;\n                }\n                token = scanNext();\n            }\n        }\n    }\n    function parseString(isValue) {\n        var value = _scanner.getTokenValue();\n        if (isValue) {\n            onLiteralValue(value);\n        }\n        else {\n            onObjectProperty(value);\n        }\n        scanNext();\n        return true;\n    }\n    function parseLiteral() {\n        switch (_scanner.getToken()) {\n            case 11 /* NumericLiteral */:\n                var value = 0;\n                try {\n                    value = JSON.parse(_scanner.getTokenValue());\n                    if (typeof value !== 'number') {\n                        handleError(2 /* InvalidNumberFormat */);\n                        value = 0;\n                    }\n                }\n                catch (e) {\n                    handleError(2 /* InvalidNumberFormat */);\n                }\n                onLiteralValue(value);\n                break;\n            case 7 /* NullKeyword */:\n                onLiteralValue(null);\n                break;\n            case 8 /* TrueKeyword */:\n                onLiteralValue(true);\n                break;\n            case 9 /* FalseKeyword */:\n                onLiteralValue(false);\n                break;\n            default:\n                return false;\n        }\n        scanNext();\n        return true;\n    }\n    function parseProperty() {\n        if (_scanner.getToken() !== 10 /* StringLiteral */) {\n            handleError(3 /* PropertyNameExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            return false;\n        }\n        parseString(false);\n        if (_scanner.getToken() === 6 /* ColonToken */) {\n            onSeparator(':');\n            scanNext(); // consume colon\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n        }\n        else {\n            handleError(5 /* ColonExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        return true;\n    }\n    function parseObject() {\n        onObjectBegin();\n        scanNext(); // consume open brace\n        var needsComma = false;\n        while (_scanner.getToken() !== 2 /* CloseBraceToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 2 /* CloseBraceToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseProperty()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onObjectEnd();\n        if (_scanner.getToken() !== 2 /* CloseBraceToken */) {\n            handleError(7 /* CloseBraceExpected */, [2 /* CloseBraceToken */], []);\n        }\n        else {\n            scanNext(); // consume close brace\n        }\n        return true;\n    }\n    function parseArray() {\n        onArrayBegin();\n        scanNext(); // consume open bracket\n        var needsComma = false;\n        while (_scanner.getToken() !== 4 /* CloseBracketToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 4 /* CloseBracketToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onArrayEnd();\n        if (_scanner.getToken() !== 4 /* CloseBracketToken */) {\n            handleError(8 /* CloseBracketExpected */, [4 /* CloseBracketToken */], []);\n        }\n        else {\n            scanNext(); // consume close bracket\n        }\n        return true;\n    }\n    function parseValue() {\n        switch (_scanner.getToken()) {\n            case 3 /* OpenBracketToken */:\n                return parseArray();\n            case 1 /* OpenBraceToken */:\n                return parseObject();\n            case 10 /* StringLiteral */:\n                return parseString(true);\n            default:\n                return parseLiteral();\n        }\n    }\n    scanNext();\n    if (_scanner.getToken() === 17 /* EOF */) {\n        if (options.allowEmptyContent) {\n            return true;\n        }\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (!parseValue()) {\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (_scanner.getToken() !== 17 /* EOF */) {\n        handleError(9 /* EndOfFileExpected */, [], []);\n    }\n    return true;\n}\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport function stripComments(text, replaceCh) {\n    var _scanner = createScanner(text), parts = [], kind, offset = 0, pos;\n    do {\n        pos = _scanner.getPosition();\n        kind = _scanner.scan();\n        switch (kind) {\n            case 12 /* LineCommentTrivia */:\n            case 13 /* BlockCommentTrivia */:\n            case 17 /* EOF */:\n                if (offset !== pos) {\n                    parts.push(text.substring(offset, pos));\n                }\n                if (replaceCh !== undefined) {\n                    parts.push(_scanner.getTokenValue().replace(/[^\\r\\n]/g, replaceCh));\n                }\n                offset = _scanner.getPosition();\n                break;\n        }\n    } while (kind !== 17 /* EOF */);\n    return parts.join('');\n}\nexport function getNodeType(value) {\n    switch (typeof value) {\n        case 'boolean': return 'boolean';\n        case 'number': return 'number';\n        case 'string': return 'string';\n        case 'object': {\n            if (!value) {\n                return 'null';\n            }\n            else if (Array.isArray(value)) {\n                return 'array';\n            }\n            return 'object';\n        }\n        default: return 'null';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { format, isEOL } from './format.js';\nimport { parseTree, findNodeAtLocation } from './parser.js';\nexport function removeProperty(text, path, formattingOptions) {\n    return setProperty(text, path, void 0, formattingOptions);\n}\nexport function setProperty(text, originalPath, value, formattingOptions, getInsertionIndex) {\n    var _a;\n    var path = originalPath.slice();\n    var errors = [];\n    var root = parseTree(text, errors);\n    var parent = void 0;\n    var lastSegment = void 0;\n    while (path.length > 0) {\n        lastSegment = path.pop();\n        parent = findNodeAtLocation(root, path);\n        if (parent === void 0 && value !== void 0) {\n            if (typeof lastSegment === 'string') {\n                value = (_a = {}, _a[lastSegment] = value, _a);\n            }\n            else {\n                value = [value];\n            }\n        }\n        else {\n            break;\n        }\n    }\n    if (!parent) {\n        // empty document\n        if (value === void 0) { // delete\n            throw new Error('Can not delete in empty document');\n        }\n        return withFormatting(text, { offset: root ? root.offset : 0, length: root ? root.length : 0, content: JSON.stringify(value) }, formattingOptions);\n    }\n    else if (parent.type === 'object' && typeof lastSegment === 'string' && Array.isArray(parent.children)) {\n        var existing = findNodeAtLocation(parent, [lastSegment]);\n        if (existing !== void 0) {\n            if (value === void 0) { // delete\n                if (!existing.parent) {\n                    throw new Error('Malformed AST');\n                }\n                var propertyIndex = parent.children.indexOf(existing.parent);\n                var removeBegin = void 0;\n                var removeEnd = existing.parent.offset + existing.parent.length;\n                if (propertyIndex > 0) {\n                    // remove the comma of the previous node\n                    var previous = parent.children[propertyIndex - 1];\n                    removeBegin = previous.offset + previous.length;\n                }\n                else {\n                    removeBegin = parent.offset + 1;\n                    if (parent.children.length > 1) {\n                        // remove the comma of the next node\n                        var next = parent.children[1];\n                        removeEnd = next.offset;\n                    }\n                }\n                return withFormatting(text, { offset: removeBegin, length: removeEnd - removeBegin, content: '' }, formattingOptions);\n            }\n            else {\n                // set value of existing property\n                return withFormatting(text, { offset: existing.offset, length: existing.length, content: JSON.stringify(value) }, formattingOptions);\n            }\n        }\n        else {\n            if (value === void 0) { // delete\n                return []; // property does not exist, nothing to do\n            }\n            var newProperty = JSON.stringify(lastSegment) + \": \" + JSON.stringify(value);\n            var index = getInsertionIndex ? getInsertionIndex(parent.children.map(function (p) { return p.children[0].value; })) : parent.children.length;\n            var edit = void 0;\n            if (index > 0) {\n                var previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            else if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty + ',' };\n            }\n            return withFormatting(text, edit, formattingOptions);\n        }\n    }\n    else if (parent.type === 'array' && typeof lastSegment === 'number' && Array.isArray(parent.children)) {\n        var insertIndex = lastSegment;\n        if (insertIndex === -1) {\n            // Insert\n            var newProperty = \"\" + JSON.stringify(value);\n            var edit = void 0;\n            if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                var previous = parent.children[parent.children.length - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, formattingOptions);\n        }\n        else {\n            if (value === void 0 && parent.children.length >= 0) {\n                //Removal\n                var removalIndex = lastSegment;\n                var toRemove = parent.children[removalIndex];\n                var edit = void 0;\n                if (parent.children.length === 1) {\n                    // only item\n                    edit = { offset: parent.offset + 1, length: parent.length - 2, content: '' };\n                }\n                else if (parent.children.length - 1 === removalIndex) {\n                    // last item\n                    var previous = parent.children[removalIndex - 1];\n                    var offset = previous.offset + previous.length;\n                    var parentEndOffset = parent.offset + parent.length;\n                    edit = { offset: offset, length: parentEndOffset - 2 - offset, content: '' };\n                }\n                else {\n                    edit = { offset: toRemove.offset, length: parent.children[removalIndex + 1].offset - toRemove.offset, content: '' };\n                }\n                return withFormatting(text, edit, formattingOptions);\n            }\n            else {\n                throw new Error('Array modification not supported yet');\n            }\n        }\n    }\n    else {\n        throw new Error(\"Can not add \" + (typeof lastSegment !== 'number' ? 'index' : 'property') + \" to parent of type \" + parent.type);\n    }\n}\nfunction withFormatting(text, edit, formattingOptions) {\n    // apply the edit\n    var newText = applyEdit(text, edit);\n    // format the new text\n    var begin = edit.offset;\n    var end = edit.offset + edit.content.length;\n    if (edit.length === 0 || edit.content.length === 0) { // insert or remove\n        while (begin > 0 && !isEOL(newText, begin - 1)) {\n            begin--;\n        }\n        while (end < newText.length && !isEOL(newText, end)) {\n            end++;\n        }\n    }\n    var edits = format(newText, { offset: begin, length: end - begin }, formattingOptions);\n    // apply the formatting edits and track the begin and end offsets of the changes\n    for (var i = edits.length - 1; i >= 0; i--) {\n        var edit_1 = edits[i];\n        newText = applyEdit(newText, edit_1);\n        begin = Math.min(begin, edit_1.offset);\n        end = Math.max(end, edit_1.offset + edit_1.length);\n        end += edit_1.content.length - edit_1.length;\n    }\n    // create a single edit with all changes\n    var editLength = text.length - (newText.length - end) - begin;\n    return [{ offset: begin, length: editLength, content: newText.substring(begin, end) }];\n}\nexport function applyEdit(text, edit) {\n    return text.substring(0, edit.offset) + edit.content + text.substring(edit.offset + edit.length);\n}\nexport function isWS(text, offset) {\n    return '\\r\\n \\t'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as formatter from './impl/format.js';\nimport * as edit from './impl/edit.js';\nimport * as scanner from './impl/scanner.js';\nimport * as parser from './impl/parser.js';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport var createScanner = scanner.createScanner;\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport var getLocation = parser.getLocation;\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore, always check the errors list to find out if the input was valid.\n */\nexport var parse = parser.parse;\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport var parseTree = parser.parseTree;\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport var findNodeAtLocation = parser.findNodeAtLocation;\n/**\n * Finds the innermost node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport var findNodeAtOffset = parser.findNodeAtOffset;\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport var getNodePath = parser.getNodePath;\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport var getNodeValue = parser.getNodeValue;\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport var visit = parser.visit;\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport var stripComments = parser.stripComments;\nexport function printParseErrorCode(code) {\n    switch (code) {\n        case 1 /* InvalidSymbol */: return 'InvalidSymbol';\n        case 2 /* InvalidNumberFormat */: return 'InvalidNumberFormat';\n        case 3 /* PropertyNameExpected */: return 'PropertyNameExpected';\n        case 4 /* ValueExpected */: return 'ValueExpected';\n        case 5 /* ColonExpected */: return 'ColonExpected';\n        case 6 /* CommaExpected */: return 'CommaExpected';\n        case 7 /* CloseBraceExpected */: return 'CloseBraceExpected';\n        case 8 /* CloseBracketExpected */: return 'CloseBracketExpected';\n        case 9 /* EndOfFileExpected */: return 'EndOfFileExpected';\n        case 10 /* InvalidCommentToken */: return 'InvalidCommentToken';\n        case 11 /* UnexpectedEndOfComment */: return 'UnexpectedEndOfComment';\n        case 12 /* UnexpectedEndOfString */: return 'UnexpectedEndOfString';\n        case 13 /* UnexpectedEndOfNumber */: return 'UnexpectedEndOfNumber';\n        case 14 /* InvalidUnicode */: return 'InvalidUnicode';\n        case 15 /* InvalidEscapeCharacter */: return 'InvalidEscapeCharacter';\n        case 16 /* InvalidCharacter */: return 'InvalidCharacter';\n    }\n    return '<unknown ParseErrorCode>';\n}\n/**\n * Computes the edits needed to format a JSON document.\n *\n * @param documentText The input text\n * @param range The range to format or `undefined` to format the full content\n * @param options The formatting options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function format(documentText, range, options) {\n    return formatter.format(documentText, range, options);\n}\n/**\n * Computes the edits needed to modify a value in the JSON document.\n *\n * @param documentText The input text\n * @param path The path of the value to change. The path represents either to the document root, a property or an array item.\n * If the path points to an non-existing property or item, it will be created.\n * @param value The new value for the specified property or item. If the value is undefined,\n * the property or item will be removed.\n * @param options Options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function modify(text, path, value, options) {\n    return edit.setProperty(text, path, value, options.formattingOptions, options.getInsertionIndex);\n}\n/**\n * Applies edits to a input string.\n */\nexport function applyEdits(text, edits) {\n    for (var i = edits.length - 1; i >= 0; i--) {\n        text = edit.applyEdit(text, edits[i]);\n    }\n    return text;\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function equals(one, other) {\n    if (one === other) {\n        return true;\n    }\n    if (one === null || one === undefined || other === null || other === undefined) {\n        return false;\n    }\n    if (typeof one !== typeof other) {\n        return false;\n    }\n    if (typeof one !== 'object') {\n        return false;\n    }\n    if ((Array.isArray(one)) !== (Array.isArray(other))) {\n        return false;\n    }\n    var i, key;\n    if (Array.isArray(one)) {\n        if (one.length !== other.length) {\n            return false;\n        }\n        for (i = 0; i < one.length; i++) {\n            if (!equals(one[i], other[i])) {\n                return false;\n            }\n        }\n    }\n    else {\n        var oneKeys = [];\n        for (key in one) {\n            oneKeys.push(key);\n        }\n        oneKeys.sort();\n        var otherKeys = [];\n        for (key in other) {\n            otherKeys.push(key);\n        }\n        otherKeys.sort();\n        if (!equals(oneKeys, otherKeys)) {\n            return false;\n        }\n        for (i = 0; i < oneKeys.length; i++) {\n            if (!equals(one[oneKeys[i]], other[oneKeys[i]])) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nexport function isNumber(val) {\n    return typeof val === 'number';\n}\nexport function isDefined(val) {\n    return typeof val !== 'undefined';\n}\nexport function isBoolean(val) {\n    return typeof val === 'boolean';\n}\nexport function isString(val) {\n    return typeof val === 'string';\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (changes, version) {\r\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\r\n            var change = changes_1[_i];\r\n            if (FullTextDocument.isIncremental(change)) {\r\n                // makes sure start is before end\r\n                var range = getWellformedRange(change.range);\r\n                // update content\r\n                var startOffset = this.offsetAt(range.start);\r\n                var endOffset = this.offsetAt(range.end);\r\n                this._content = this._content.substring(0, startOffset) + change.text + this._content.substring(endOffset, this._content.length);\r\n                // update the offsets\r\n                var startLine = Math.max(range.start.line, 0);\r\n                var endLine = Math.max(range.end.line, 0);\r\n                var lineOffsets = this._lineOffsets;\r\n                var addedLineOffsets = computeLineOffsets(change.text, false, startOffset);\r\n                if (endLine - startLine === addedLineOffsets.length) {\r\n                    for (var i = 0, len = addedLineOffsets.length; i < len; i++) {\r\n                        lineOffsets[i + startLine + 1] = addedLineOffsets[i];\r\n                    }\r\n                }\r\n                else {\r\n                    if (addedLineOffsets.length < 10000) {\r\n                        lineOffsets.splice.apply(lineOffsets, [startLine + 1, endLine - startLine].concat(addedLineOffsets));\r\n                    }\r\n                    else { // avoid too many arguments for splice\r\n                        this._lineOffsets = lineOffsets = lineOffsets.slice(0, startLine + 1).concat(addedLineOffsets, lineOffsets.slice(endLine + 1));\r\n                    }\r\n                }\r\n                var diff = change.text.length - (endOffset - startOffset);\r\n                if (diff !== 0) {\r\n                    for (var i = startLine + 1 + addedLineOffsets.length, len = lineOffsets.length; i < len; i++) {\r\n                        lineOffsets[i] = lineOffsets[i] + diff;\r\n                    }\r\n                }\r\n            }\r\n            else if (FullTextDocument.isFull(change)) {\r\n                this._content = change.text;\r\n                this._lineOffsets = undefined;\r\n            }\r\n            else {\r\n                throw new Error('Unknown change event received');\r\n            }\r\n        }\r\n        this._version = version;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            this._lineOffsets = computeLineOffsets(this._content, true);\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return { line: 0, character: offset };\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return { line: line, character: offset - lineOffsets[line] };\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.isIncremental = function (event) {\r\n        var candidate = event;\r\n        return candidate !== undefined && candidate !== null &&\r\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\r\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\r\n    };\r\n    FullTextDocument.isFull = function (event) {\r\n        var candidate = event;\r\n        return candidate !== undefined && candidate !== null &&\r\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\r\n    };\r\n    return FullTextDocument;\r\n}());\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new text document.\r\n     *\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param version The document's initial version number.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Updates a TextDocument by modifing its content.\r\n     *\r\n     * @param document the document to update. Only documents created by TextDocument.create are valid inputs.\r\n     * @param changes the changes to apply to the document.\r\n     * @returns The updated TextDocument. Note: That's the same document instance passed in as first parameter.\r\n     *\r\n     */\r\n    function update(document, changes, version) {\r\n        if (document instanceof FullTextDocument) {\r\n            document.update(changes, version);\r\n            return document;\r\n        }\r\n        else {\r\n            throw new Error('TextDocument.update: document must be created by TextDocument.create');\r\n        }\r\n    }\r\n    TextDocument.update = update;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits.map(getWellformedEdit), function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n})(TextDocument || (TextDocument = {}));\r\nfunction mergeSort(data, compare) {\r\n    if (data.length <= 1) {\r\n        // sorted\r\n        return data;\r\n    }\r\n    var p = (data.length / 2) | 0;\r\n    var left = data.slice(0, p);\r\n    var right = data.slice(p);\r\n    mergeSort(left, compare);\r\n    mergeSort(right, compare);\r\n    var leftIdx = 0;\r\n    var rightIdx = 0;\r\n    var i = 0;\r\n    while (leftIdx < left.length && rightIdx < right.length) {\r\n        var ret = compare(left[leftIdx], right[rightIdx]);\r\n        if (ret <= 0) {\r\n            // smaller_equal -> take left to preserve order\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        else {\r\n            // greater -> take right\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n    }\r\n    while (leftIdx < left.length) {\r\n        data[i++] = left[leftIdx++];\r\n    }\r\n    while (rightIdx < right.length) {\r\n        data[i++] = right[rightIdx++];\r\n    }\r\n    return data;\r\n}\r\nfunction computeLineOffsets(text, isAtLineStart, textOffset) {\r\n    if (textOffset === void 0) { textOffset = 0; }\r\n    var result = isAtLineStart ? [textOffset] : [];\r\n    for (var i = 0; i < text.length; i++) {\r\n        var ch = text.charCodeAt(i);\r\n        if (ch === 13 /* CarriageReturn */ || ch === 10 /* LineFeed */) {\r\n            if (ch === 13 /* CarriageReturn */ && i + 1 < text.length && text.charCodeAt(i + 1) === 10 /* LineFeed */) {\r\n                i++;\r\n            }\r\n            result.push(textOffset + i + 1);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction getWellformedRange(range) {\r\n    var start = range.start;\r\n    var end = range.end;\r\n    if (start.line > end.line || (start.line === end.line && start.character > end.character)) {\r\n        return { start: end, end: start };\r\n    }\r\n    return range;\r\n}\r\nfunction getWellformedEdit(textEdit) {\r\n    var range = getWellformedRange(textEdit.range);\r\n    if (range !== textEdit.range) {\r\n        return { newText: textEdit.newText, range: range };\r\n    }\r\n    return textEdit;\r\n}\r\n","import { MarkupKind } from './../vscode-languageserver-types/main.js';\nexport { TextDocument } from './../vscode-languageserver-textdocument/lib/esm/main.js';\nexport * from './../vscode-languageserver-types/main.js';\n/**\n * Error codes used by diagnostics\n */\nexport var ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[ErrorCode[\"Undefined\"] = 0] = \"Undefined\";\n    ErrorCode[ErrorCode[\"EnumValueMismatch\"] = 1] = \"EnumValueMismatch\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfComment\"] = 257] = \"UnexpectedEndOfComment\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfString\"] = 258] = \"UnexpectedEndOfString\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfNumber\"] = 259] = \"UnexpectedEndOfNumber\";\n    ErrorCode[ErrorCode[\"InvalidUnicode\"] = 260] = \"InvalidUnicode\";\n    ErrorCode[ErrorCode[\"InvalidEscapeCharacter\"] = 261] = \"InvalidEscapeCharacter\";\n    ErrorCode[ErrorCode[\"InvalidCharacter\"] = 262] = \"InvalidCharacter\";\n    ErrorCode[ErrorCode[\"PropertyExpected\"] = 513] = \"PropertyExpected\";\n    ErrorCode[ErrorCode[\"CommaExpected\"] = 514] = \"CommaExpected\";\n    ErrorCode[ErrorCode[\"ColonExpected\"] = 515] = \"ColonExpected\";\n    ErrorCode[ErrorCode[\"ValueExpected\"] = 516] = \"ValueExpected\";\n    ErrorCode[ErrorCode[\"CommaOrCloseBacketExpected\"] = 517] = \"CommaOrCloseBacketExpected\";\n    ErrorCode[ErrorCode[\"CommaOrCloseBraceExpected\"] = 518] = \"CommaOrCloseBraceExpected\";\n    ErrorCode[ErrorCode[\"TrailingComma\"] = 519] = \"TrailingComma\";\n    ErrorCode[ErrorCode[\"DuplicateKey\"] = 520] = \"DuplicateKey\";\n    ErrorCode[ErrorCode[\"CommentNotPermitted\"] = 521] = \"CommentNotPermitted\";\n    ErrorCode[ErrorCode[\"SchemaResolveError\"] = 768] = \"SchemaResolveError\";\n})(ErrorCode || (ErrorCode = {}));\nexport var ClientCapabilities;\n(function (ClientCapabilities) {\n    ClientCapabilities.LATEST = {\n        textDocument: {\n            completion: {\n                completionItem: {\n                    documentationFormat: [MarkupKind.Markdown, MarkupKind.PlainText],\n                    commitCharactersSupport: true\n                }\n            }\n        }\n    };\n})(ClientCapabilities || (ClientCapabilities = {}));\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nfunction format(message, args) {\r\n    var result;\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            return typeof args[index] !== 'undefined' ? args[index] : match;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nexport function loadMessageBundle(file) {\r\n    return localize;\r\n}\r\nexport function config(opt) {\r\n    return loadMessageBundle;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as Json from './../../jsonc-parser/main.js';\nimport { isNumber, equals, isBoolean, isString, isDefined } from '../utils/objects.js';\nimport { ErrorCode, Diagnostic, DiagnosticSeverity, Range } from '../jsonLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar formats = {\n    'color-hex': { errorMessage: localize('colorHexFormatWarning', 'Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.'), pattern: /^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/ },\n    'date-time': { errorMessage: localize('dateTimeFormatWarning', 'String is not a RFC3339 date-time.'), pattern: /^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i },\n    'date': { errorMessage: localize('dateFormatWarning', 'String is not a RFC3339 date.'), pattern: /^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i },\n    'time': { errorMessage: localize('timeFormatWarning', 'String is not a RFC3339 time.'), pattern: /^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i },\n    'email': { errorMessage: localize('emailFormatWarning', 'String is not an e-mail address.'), pattern: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/ }\n};\nvar ASTNodeImpl = /** @class */ (function () {\n    function ASTNodeImpl(parent, offset, length) {\n        this.offset = offset;\n        this.length = length;\n        this.parent = parent;\n    }\n    Object.defineProperty(ASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return [];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ASTNodeImpl.prototype.toString = function () {\n        return 'type: ' + this.type + ' (' + this.offset + '/' + this.length + ')' + (this.parent ? ' parent: {' + this.parent.toString() + '}' : '');\n    };\n    return ASTNodeImpl;\n}());\nexport { ASTNodeImpl };\nvar NullASTNodeImpl = /** @class */ (function (_super) {\n    __extends(NullASTNodeImpl, _super);\n    function NullASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'null';\n        _this.value = null;\n        return _this;\n    }\n    return NullASTNodeImpl;\n}(ASTNodeImpl));\nexport { NullASTNodeImpl };\nvar BooleanASTNodeImpl = /** @class */ (function (_super) {\n    __extends(BooleanASTNodeImpl, _super);\n    function BooleanASTNodeImpl(parent, boolValue, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'boolean';\n        _this.value = boolValue;\n        return _this;\n    }\n    return BooleanASTNodeImpl;\n}(ASTNodeImpl));\nexport { BooleanASTNodeImpl };\nvar ArrayASTNodeImpl = /** @class */ (function (_super) {\n    __extends(ArrayASTNodeImpl, _super);\n    function ArrayASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'array';\n        _this.items = [];\n        return _this;\n    }\n    Object.defineProperty(ArrayASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.items;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ArrayASTNodeImpl;\n}(ASTNodeImpl));\nexport { ArrayASTNodeImpl };\nvar NumberASTNodeImpl = /** @class */ (function (_super) {\n    __extends(NumberASTNodeImpl, _super);\n    function NumberASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'number';\n        _this.isInteger = true;\n        _this.value = Number.NaN;\n        return _this;\n    }\n    return NumberASTNodeImpl;\n}(ASTNodeImpl));\nexport { NumberASTNodeImpl };\nvar StringASTNodeImpl = /** @class */ (function (_super) {\n    __extends(StringASTNodeImpl, _super);\n    function StringASTNodeImpl(parent, offset, length) {\n        var _this = _super.call(this, parent, offset, length) || this;\n        _this.type = 'string';\n        _this.value = '';\n        return _this;\n    }\n    return StringASTNodeImpl;\n}(ASTNodeImpl));\nexport { StringASTNodeImpl };\nvar PropertyASTNodeImpl = /** @class */ (function (_super) {\n    __extends(PropertyASTNodeImpl, _super);\n    function PropertyASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'property';\n        _this.colonOffset = -1;\n        return _this;\n    }\n    Object.defineProperty(PropertyASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.valueNode ? [this.keyNode, this.valueNode] : [this.keyNode];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PropertyASTNodeImpl;\n}(ASTNodeImpl));\nexport { PropertyASTNodeImpl };\nvar ObjectASTNodeImpl = /** @class */ (function (_super) {\n    __extends(ObjectASTNodeImpl, _super);\n    function ObjectASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'object';\n        _this.properties = [];\n        return _this;\n    }\n    Object.defineProperty(ObjectASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.properties;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ObjectASTNodeImpl;\n}(ASTNodeImpl));\nexport { ObjectASTNodeImpl };\nexport function asSchema(schema) {\n    if (isBoolean(schema)) {\n        return schema ? {} : { \"not\": {} };\n    }\n    return schema;\n}\nexport var EnumMatch;\n(function (EnumMatch) {\n    EnumMatch[EnumMatch[\"Key\"] = 0] = \"Key\";\n    EnumMatch[EnumMatch[\"Enum\"] = 1] = \"Enum\";\n})(EnumMatch || (EnumMatch = {}));\nvar SchemaCollector = /** @class */ (function () {\n    function SchemaCollector(focusOffset, exclude) {\n        if (focusOffset === void 0) { focusOffset = -1; }\n        if (exclude === void 0) { exclude = null; }\n        this.focusOffset = focusOffset;\n        this.exclude = exclude;\n        this.schemas = [];\n    }\n    SchemaCollector.prototype.add = function (schema) {\n        this.schemas.push(schema);\n    };\n    SchemaCollector.prototype.merge = function (other) {\n        var _a;\n        (_a = this.schemas).push.apply(_a, other.schemas);\n    };\n    SchemaCollector.prototype.include = function (node) {\n        return (this.focusOffset === -1 || contains(node, this.focusOffset)) && (node !== this.exclude);\n    };\n    SchemaCollector.prototype.newSub = function () {\n        return new SchemaCollector(-1, this.exclude);\n    };\n    return SchemaCollector;\n}());\nvar NoOpSchemaCollector = /** @class */ (function () {\n    function NoOpSchemaCollector() {\n    }\n    Object.defineProperty(NoOpSchemaCollector.prototype, \"schemas\", {\n        get: function () { return []; },\n        enumerable: true,\n        configurable: true\n    });\n    NoOpSchemaCollector.prototype.add = function (schema) { };\n    NoOpSchemaCollector.prototype.merge = function (other) { };\n    NoOpSchemaCollector.prototype.include = function (node) { return true; };\n    NoOpSchemaCollector.prototype.newSub = function () { return this; };\n    NoOpSchemaCollector.instance = new NoOpSchemaCollector();\n    return NoOpSchemaCollector;\n}());\nvar ValidationResult = /** @class */ (function () {\n    function ValidationResult() {\n        this.problems = [];\n        this.propertiesMatches = 0;\n        this.propertiesValueMatches = 0;\n        this.primaryValueMatches = 0;\n        this.enumValueMatch = false;\n        this.enumValues = null;\n    }\n    ValidationResult.prototype.hasProblems = function () {\n        return !!this.problems.length;\n    };\n    ValidationResult.prototype.mergeAll = function (validationResults) {\n        for (var _i = 0, validationResults_1 = validationResults; _i < validationResults_1.length; _i++) {\n            var validationResult = validationResults_1[_i];\n            this.merge(validationResult);\n        }\n    };\n    ValidationResult.prototype.merge = function (validationResult) {\n        this.problems = this.problems.concat(validationResult.problems);\n    };\n    ValidationResult.prototype.mergeEnumValues = function (validationResult) {\n        if (!this.enumValueMatch && !validationResult.enumValueMatch && this.enumValues && validationResult.enumValues) {\n            this.enumValues = this.enumValues.concat(validationResult.enumValues);\n            for (var _i = 0, _a = this.problems; _i < _a.length; _i++) {\n                var error = _a[_i];\n                if (error.code === ErrorCode.EnumValueMismatch) {\n                    error.message = localize('enumWarning', 'Value is not accepted. Valid values: {0}.', this.enumValues.map(function (v) { return JSON.stringify(v); }).join(', '));\n                }\n            }\n        }\n    };\n    ValidationResult.prototype.mergePropertyMatch = function (propertyValidationResult) {\n        this.merge(propertyValidationResult);\n        this.propertiesMatches++;\n        if (propertyValidationResult.enumValueMatch || !propertyValidationResult.hasProblems() && propertyValidationResult.propertiesMatches) {\n            this.propertiesValueMatches++;\n        }\n        if (propertyValidationResult.enumValueMatch && propertyValidationResult.enumValues && propertyValidationResult.enumValues.length === 1) {\n            this.primaryValueMatches++;\n        }\n    };\n    ValidationResult.prototype.compare = function (other) {\n        var hasProblems = this.hasProblems();\n        if (hasProblems !== other.hasProblems()) {\n            return hasProblems ? -1 : 1;\n        }\n        if (this.enumValueMatch !== other.enumValueMatch) {\n            return other.enumValueMatch ? -1 : 1;\n        }\n        if (this.primaryValueMatches !== other.primaryValueMatches) {\n            return this.primaryValueMatches - other.primaryValueMatches;\n        }\n        if (this.propertiesValueMatches !== other.propertiesValueMatches) {\n            return this.propertiesValueMatches - other.propertiesValueMatches;\n        }\n        return this.propertiesMatches - other.propertiesMatches;\n    };\n    return ValidationResult;\n}());\nexport { ValidationResult };\nexport function newJSONDocument(root, diagnostics) {\n    if (diagnostics === void 0) { diagnostics = []; }\n    return new JSONDocument(root, diagnostics, []);\n}\nexport function getNodeValue(node) {\n    return Json.getNodeValue(node);\n}\nexport function getNodePath(node) {\n    return Json.getNodePath(node);\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return offset >= node.offset && offset < (node.offset + node.length) || includeRightBound && offset === (node.offset + node.length);\n}\nvar JSONDocument = /** @class */ (function () {\n    function JSONDocument(root, syntaxErrors, comments) {\n        if (syntaxErrors === void 0) { syntaxErrors = []; }\n        if (comments === void 0) { comments = []; }\n        this.root = root;\n        this.syntaxErrors = syntaxErrors;\n        this.comments = comments;\n    }\n    JSONDocument.prototype.getNodeFromOffset = function (offset, includeRightBound) {\n        if (includeRightBound === void 0) { includeRightBound = false; }\n        if (this.root) {\n            return Json.findNodeAtOffset(this.root, offset, includeRightBound);\n        }\n        return void 0;\n    };\n    JSONDocument.prototype.visit = function (visitor) {\n        if (this.root) {\n            var doVisit_1 = function (node) {\n                var ctn = visitor(node);\n                var children = node.children;\n                if (Array.isArray(children)) {\n                    for (var i = 0; i < children.length && ctn; i++) {\n                        ctn = doVisit_1(children[i]);\n                    }\n                }\n                return ctn;\n            };\n            doVisit_1(this.root);\n        }\n    };\n    JSONDocument.prototype.validate = function (textDocument, schema) {\n        if (this.root && schema) {\n            var validationResult = new ValidationResult();\n            validate(this.root, schema, validationResult, NoOpSchemaCollector.instance);\n            return validationResult.problems.map(function (p) {\n                var range = Range.create(textDocument.positionAt(p.location.offset), textDocument.positionAt(p.location.offset + p.location.length));\n                return Diagnostic.create(range, p.message, p.severity, p.code);\n            });\n        }\n        return null;\n    };\n    JSONDocument.prototype.getMatchingSchemas = function (schema, focusOffset, exclude) {\n        if (focusOffset === void 0) { focusOffset = -1; }\n        if (exclude === void 0) { exclude = null; }\n        var matchingSchemas = new SchemaCollector(focusOffset, exclude);\n        if (this.root && schema) {\n            validate(this.root, schema, new ValidationResult(), matchingSchemas);\n        }\n        return matchingSchemas.schemas;\n    };\n    return JSONDocument;\n}());\nexport { JSONDocument };\nfunction validate(node, schema, validationResult, matchingSchemas) {\n    if (!node || !matchingSchemas.include(node)) {\n        return;\n    }\n    switch (node.type) {\n        case 'object':\n            _validateObjectNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'array':\n            _validateArrayNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'string':\n            _validateStringNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'number':\n            _validateNumberNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'property':\n            return validate(node.valueNode, schema, validationResult, matchingSchemas);\n    }\n    _validateNode();\n    matchingSchemas.add({ node: node, schema: schema });\n    function _validateNode() {\n        function matchesType(type) {\n            return node.type === type || (type === 'integer' && node.type === 'number' && node.isInteger);\n        }\n        if (Array.isArray(schema.type)) {\n            if (!schema.type.some(matchesType)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('typeArrayMismatchWarning', 'Incorrect type. Expected one of {0}.', schema.type.join(', '))\n                });\n            }\n        }\n        else if (schema.type) {\n            if (!matchesType(schema.type)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('typeMismatchWarning', 'Incorrect type. Expected \"{0}\".', schema.type)\n                });\n            }\n        }\n        if (Array.isArray(schema.allOf)) {\n            for (var _i = 0, _a = schema.allOf; _i < _a.length; _i++) {\n                var subSchemaRef = _a[_i];\n                validate(node, asSchema(subSchemaRef), validationResult, matchingSchemas);\n            }\n        }\n        var notSchema = asSchema(schema.not);\n        if (notSchema) {\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, notSchema, subValidationResult, subMatchingSchemas);\n            if (!subValidationResult.hasProblems()) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('notSchemaWarning', \"Matches a schema that is not allowed.\")\n                });\n            }\n            for (var _b = 0, _c = subMatchingSchemas.schemas; _b < _c.length; _b++) {\n                var ms = _c[_b];\n                ms.inverted = !ms.inverted;\n                matchingSchemas.add(ms);\n            }\n        }\n        var testAlternatives = function (alternatives, maxOneMatch) {\n            var matches = [];\n            // remember the best match that is used for error messages\n            var bestMatch = null;\n            for (var _i = 0, alternatives_1 = alternatives; _i < alternatives_1.length; _i++) {\n                var subSchemaRef = alternatives_1[_i];\n                var subSchema = asSchema(subSchemaRef);\n                var subValidationResult = new ValidationResult();\n                var subMatchingSchemas = matchingSchemas.newSub();\n                validate(node, subSchema, subValidationResult, subMatchingSchemas);\n                if (!subValidationResult.hasProblems()) {\n                    matches.push(subSchema);\n                }\n                if (!bestMatch) {\n                    bestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\n                }\n                else {\n                    if (!maxOneMatch && !subValidationResult.hasProblems() && !bestMatch.validationResult.hasProblems()) {\n                        // no errors, both are equally good matches\n                        bestMatch.matchingSchemas.merge(subMatchingSchemas);\n                        bestMatch.validationResult.propertiesMatches += subValidationResult.propertiesMatches;\n                        bestMatch.validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\n                    }\n                    else {\n                        var compareResult = subValidationResult.compare(bestMatch.validationResult);\n                        if (compareResult > 0) {\n                            // our node is the best matching so far\n                            bestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\n                        }\n                        else if (compareResult === 0) {\n                            // there's already a best matching but we are as good\n                            bestMatch.matchingSchemas.merge(subMatchingSchemas);\n                            bestMatch.validationResult.mergeEnumValues(subValidationResult);\n                        }\n                    }\n                }\n            }\n            if (matches.length > 1 && maxOneMatch) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: 1 },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('oneOfWarning', \"Matches multiple schemas when only one must validate.\")\n                });\n            }\n            if (bestMatch !== null) {\n                validationResult.merge(bestMatch.validationResult);\n                validationResult.propertiesMatches += bestMatch.validationResult.propertiesMatches;\n                validationResult.propertiesValueMatches += bestMatch.validationResult.propertiesValueMatches;\n                matchingSchemas.merge(bestMatch.matchingSchemas);\n            }\n            return matches.length;\n        };\n        if (Array.isArray(schema.anyOf)) {\n            testAlternatives(schema.anyOf, false);\n        }\n        if (Array.isArray(schema.oneOf)) {\n            testAlternatives(schema.oneOf, true);\n        }\n        var testBranch = function (schema) {\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, asSchema(schema), subValidationResult, subMatchingSchemas);\n            validationResult.merge(subValidationResult);\n            validationResult.propertiesMatches += subValidationResult.propertiesMatches;\n            validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\n            matchingSchemas.merge(subMatchingSchemas);\n        };\n        var testCondition = function (ifSchema, thenSchema, elseSchema) {\n            var subSchema = asSchema(ifSchema);\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, subSchema, subValidationResult, subMatchingSchemas);\n            matchingSchemas.merge(subMatchingSchemas);\n            if (!subValidationResult.hasProblems()) {\n                if (thenSchema) {\n                    testBranch(thenSchema);\n                }\n            }\n            else if (elseSchema) {\n                testBranch(elseSchema);\n            }\n        };\n        var ifSchema = asSchema(schema.if);\n        if (ifSchema) {\n            testCondition(ifSchema, asSchema(schema.then), asSchema(schema.else));\n        }\n        if (Array.isArray(schema.enum)) {\n            var val = getNodeValue(node);\n            var enumValueMatch = false;\n            for (var _d = 0, _e = schema.enum; _d < _e.length; _d++) {\n                var e = _e[_d];\n                if (equals(val, e)) {\n                    enumValueMatch = true;\n                    break;\n                }\n            }\n            validationResult.enumValues = schema.enum;\n            validationResult.enumValueMatch = enumValueMatch;\n            if (!enumValueMatch) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    code: ErrorCode.EnumValueMismatch,\n                    message: schema.errorMessage || localize('enumWarning', 'Value is not accepted. Valid values: {0}.', schema.enum.map(function (v) { return JSON.stringify(v); }).join(', '))\n                });\n            }\n        }\n        if (isDefined(schema.const)) {\n            var val = getNodeValue(node);\n            if (!equals(val, schema.const)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    code: ErrorCode.EnumValueMismatch,\n                    message: schema.errorMessage || localize('constWarning', 'Value must be {0}.', JSON.stringify(schema.const))\n                });\n                validationResult.enumValueMatch = false;\n            }\n            else {\n                validationResult.enumValueMatch = true;\n            }\n            validationResult.enumValues = [schema.const];\n        }\n        if (schema.deprecationMessage && node.parent) {\n            validationResult.problems.push({\n                location: { offset: node.parent.offset, length: node.parent.length },\n                severity: DiagnosticSeverity.Warning,\n                message: schema.deprecationMessage\n            });\n        }\n    }\n    function _validateNumberNode(node, schema, validationResult, matchingSchemas) {\n        var val = node.value;\n        if (isNumber(schema.multipleOf)) {\n            if (val % schema.multipleOf !== 0) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('multipleOfWarning', 'Value is not divisible by {0}.', schema.multipleOf)\n                });\n            }\n        }\n        function getExclusiveLimit(limit, exclusive) {\n            if (isNumber(exclusive)) {\n                return exclusive;\n            }\n            if (isBoolean(exclusive) && exclusive) {\n                return limit;\n            }\n            return void 0;\n        }\n        function getLimit(limit, exclusive) {\n            if (!isBoolean(exclusive) || !exclusive) {\n                return limit;\n            }\n            return void 0;\n        }\n        var exclusiveMinimum = getExclusiveLimit(schema.minimum, schema.exclusiveMinimum);\n        if (isNumber(exclusiveMinimum) && val <= exclusiveMinimum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('exclusiveMinimumWarning', 'Value is below the exclusive minimum of {0}.', exclusiveMinimum)\n            });\n        }\n        var exclusiveMaximum = getExclusiveLimit(schema.maximum, schema.exclusiveMaximum);\n        if (isNumber(exclusiveMaximum) && val >= exclusiveMaximum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('exclusiveMaximumWarning', 'Value is above the exclusive maximum of {0}.', exclusiveMaximum)\n            });\n        }\n        var minimum = getLimit(schema.minimum, schema.exclusiveMinimum);\n        if (isNumber(minimum) && val < minimum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minimumWarning', 'Value is below the minimum of {0}.', minimum)\n            });\n        }\n        var maximum = getLimit(schema.maximum, schema.exclusiveMaximum);\n        if (isNumber(maximum) && val > maximum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maximumWarning', 'Value is above the maximum of {0}.', maximum)\n            });\n        }\n    }\n    function _validateStringNode(node, schema, validationResult, matchingSchemas) {\n        if (isNumber(schema.minLength) && node.value.length < schema.minLength) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minLengthWarning', 'String is shorter than the minimum length of {0}.', schema.minLength)\n            });\n        }\n        if (isNumber(schema.maxLength) && node.value.length > schema.maxLength) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maxLengthWarning', 'String is longer than the maximum length of {0}.', schema.maxLength)\n            });\n        }\n        if (isString(schema.pattern)) {\n            var regex = new RegExp(schema.pattern);\n            if (!regex.test(node.value)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.patternErrorMessage || schema.errorMessage || localize('patternWarning', 'String does not match the pattern of \"{0}\".', schema.pattern)\n                });\n            }\n        }\n        if (schema.format) {\n            switch (schema.format) {\n                case 'uri':\n                case 'uri-reference':\n                    {\n                        var errorMessage = void 0;\n                        if (!node.value) {\n                            errorMessage = localize('uriEmpty', 'URI expected.');\n                        }\n                        else {\n                            var match = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/.exec(node.value);\n                            if (!match) {\n                                errorMessage = localize('uriMissing', 'URI is expected.');\n                            }\n                            else if (!match[2] && schema.format === 'uri') {\n                                errorMessage = localize('uriSchemeMissing', 'URI with a scheme is expected.');\n                            }\n                        }\n                        if (errorMessage) {\n                            validationResult.problems.push({\n                                location: { offset: node.offset, length: node.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.patternErrorMessage || schema.errorMessage || localize('uriFormatWarning', 'String is not a URI: {0}', errorMessage)\n                            });\n                        }\n                    }\n                    break;\n                case 'color-hex':\n                case 'date-time':\n                case 'date':\n                case 'time':\n                case 'email':\n                    var format = formats[schema.format];\n                    if (!node.value || !format.pattern.exec(node.value)) {\n                        validationResult.problems.push({\n                            location: { offset: node.offset, length: node.length },\n                            severity: DiagnosticSeverity.Warning,\n                            message: schema.patternErrorMessage || schema.errorMessage || format.errorMessage\n                        });\n                    }\n                default:\n            }\n        }\n    }\n    function _validateArrayNode(node, schema, validationResult, matchingSchemas) {\n        if (Array.isArray(schema.items)) {\n            var subSchemas = schema.items;\n            for (var index = 0; index < subSchemas.length; index++) {\n                var subSchemaRef = subSchemas[index];\n                var subSchema = asSchema(subSchemaRef);\n                var itemValidationResult = new ValidationResult();\n                var item = node.items[index];\n                if (item) {\n                    validate(item, subSchema, itemValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(itemValidationResult);\n                }\n                else if (node.items.length >= subSchemas.length) {\n                    validationResult.propertiesValueMatches++;\n                }\n            }\n            if (node.items.length > subSchemas.length) {\n                if (typeof schema.additionalItems === 'object') {\n                    for (var i = subSchemas.length; i < node.items.length; i++) {\n                        var itemValidationResult = new ValidationResult();\n                        validate(node.items[i], schema.additionalItems, itemValidationResult, matchingSchemas);\n                        validationResult.mergePropertyMatch(itemValidationResult);\n                    }\n                }\n                else if (schema.additionalItems === false) {\n                    validationResult.problems.push({\n                        location: { offset: node.offset, length: node.length },\n                        severity: DiagnosticSeverity.Warning,\n                        message: localize('additionalItemsWarning', 'Array has too many items according to schema. Expected {0} or fewer.', subSchemas.length)\n                    });\n                }\n            }\n        }\n        else {\n            var itemSchema = asSchema(schema.items);\n            if (itemSchema) {\n                for (var _i = 0, _a = node.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    var itemValidationResult = new ValidationResult();\n                    validate(item, itemSchema, itemValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(itemValidationResult);\n                }\n            }\n        }\n        var containsSchema = asSchema(schema.contains);\n        if (containsSchema) {\n            var doesContain = node.items.some(function (item) {\n                var itemValidationResult = new ValidationResult();\n                validate(item, containsSchema, itemValidationResult, NoOpSchemaCollector.instance);\n                return !itemValidationResult.hasProblems();\n            });\n            if (!doesContain) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('requiredItemMissingWarning', 'Array does not contain required item.')\n                });\n            }\n        }\n        if (isNumber(schema.minItems) && node.items.length < schema.minItems) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minItemsWarning', 'Array has too few items. Expected {0} or more.', schema.minItems)\n            });\n        }\n        if (isNumber(schema.maxItems) && node.items.length > schema.maxItems) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maxItemsWarning', 'Array has too many items. Expected {0} or fewer.', schema.maxItems)\n            });\n        }\n        if (schema.uniqueItems === true) {\n            var values_1 = getNodeValue(node);\n            var duplicates = values_1.some(function (value, index) {\n                return index !== values_1.lastIndexOf(value);\n            });\n            if (duplicates) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('uniqueItemsWarning', 'Array has duplicate items.')\n                });\n            }\n        }\n    }\n    function _validateObjectNode(node, schema, validationResult, matchingSchemas) {\n        var seenKeys = Object.create(null);\n        var unprocessedProperties = [];\n        for (var _i = 0, _a = node.properties; _i < _a.length; _i++) {\n            var propertyNode = _a[_i];\n            var key = propertyNode.keyNode.value;\n            seenKeys[key] = propertyNode.valueNode;\n            unprocessedProperties.push(key);\n        }\n        if (Array.isArray(schema.required)) {\n            for (var _b = 0, _c = schema.required; _b < _c.length; _b++) {\n                var propertyName = _c[_b];\n                if (!seenKeys[propertyName]) {\n                    var keyNode = node.parent && node.parent.type === 'property' && node.parent.keyNode;\n                    var location = keyNode ? { offset: keyNode.offset, length: keyNode.length } : { offset: node.offset, length: 1 };\n                    validationResult.problems.push({\n                        location: location,\n                        severity: DiagnosticSeverity.Warning,\n                        message: localize('MissingRequiredPropWarning', 'Missing property \"{0}\".', propertyName)\n                    });\n                }\n            }\n        }\n        var propertyProcessed = function (prop) {\n            var index = unprocessedProperties.indexOf(prop);\n            while (index >= 0) {\n                unprocessedProperties.splice(index, 1);\n                index = unprocessedProperties.indexOf(prop);\n            }\n        };\n        if (schema.properties) {\n            for (var _d = 0, _e = Object.keys(schema.properties); _d < _e.length; _d++) {\n                var propertyName = _e[_d];\n                propertyProcessed(propertyName);\n                var propertySchema = schema.properties[propertyName];\n                var child = seenKeys[propertyName];\n                if (child) {\n                    if (isBoolean(propertySchema)) {\n                        if (!propertySchema) {\n                            var propertyNode = child.parent;\n                            validationResult.problems.push({\n                                location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                            });\n                        }\n                        else {\n                            validationResult.propertiesMatches++;\n                            validationResult.propertiesValueMatches++;\n                        }\n                    }\n                    else {\n                        var propertyValidationResult = new ValidationResult();\n                        validate(child, propertySchema, propertyValidationResult, matchingSchemas);\n                        validationResult.mergePropertyMatch(propertyValidationResult);\n                    }\n                }\n            }\n        }\n        if (schema.patternProperties) {\n            for (var _f = 0, _g = Object.keys(schema.patternProperties); _f < _g.length; _f++) {\n                var propertyPattern = _g[_f];\n                var regex = new RegExp(propertyPattern);\n                for (var _h = 0, _j = unprocessedProperties.slice(0); _h < _j.length; _h++) {\n                    var propertyName = _j[_h];\n                    if (regex.test(propertyName)) {\n                        propertyProcessed(propertyName);\n                        var child = seenKeys[propertyName];\n                        if (child) {\n                            var propertySchema = schema.patternProperties[propertyPattern];\n                            if (isBoolean(propertySchema)) {\n                                if (!propertySchema) {\n                                    var propertyNode = child.parent;\n                                    validationResult.problems.push({\n                                        location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                                        severity: DiagnosticSeverity.Warning,\n                                        message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                                    });\n                                }\n                                else {\n                                    validationResult.propertiesMatches++;\n                                    validationResult.propertiesValueMatches++;\n                                }\n                            }\n                            else {\n                                var propertyValidationResult = new ValidationResult();\n                                validate(child, propertySchema, propertyValidationResult, matchingSchemas);\n                                validationResult.mergePropertyMatch(propertyValidationResult);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (typeof schema.additionalProperties === 'object') {\n            for (var _k = 0, unprocessedProperties_1 = unprocessedProperties; _k < unprocessedProperties_1.length; _k++) {\n                var propertyName = unprocessedProperties_1[_k];\n                var child = seenKeys[propertyName];\n                if (child) {\n                    var propertyValidationResult = new ValidationResult();\n                    validate(child, schema.additionalProperties, propertyValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(propertyValidationResult);\n                }\n            }\n        }\n        else if (schema.additionalProperties === false) {\n            if (unprocessedProperties.length > 0) {\n                for (var _l = 0, unprocessedProperties_2 = unprocessedProperties; _l < unprocessedProperties_2.length; _l++) {\n                    var propertyName = unprocessedProperties_2[_l];\n                    var child = seenKeys[propertyName];\n                    if (child) {\n                        var propertyNode = child.parent;\n                        validationResult.problems.push({\n                            location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                            severity: DiagnosticSeverity.Warning,\n                            message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                        });\n                    }\n                }\n            }\n        }\n        if (isNumber(schema.maxProperties)) {\n            if (node.properties.length > schema.maxProperties) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('MaxPropWarning', 'Object has more properties than limit of {0}.', schema.maxProperties)\n                });\n            }\n        }\n        if (isNumber(schema.minProperties)) {\n            if (node.properties.length < schema.minProperties) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('MinPropWarning', 'Object has fewer properties than the required number of {0}', schema.minProperties)\n                });\n            }\n        }\n        if (schema.dependencies) {\n            for (var _m = 0, _o = Object.keys(schema.dependencies); _m < _o.length; _m++) {\n                var key = _o[_m];\n                var prop = seenKeys[key];\n                if (prop) {\n                    var propertyDep = schema.dependencies[key];\n                    if (Array.isArray(propertyDep)) {\n                        for (var _p = 0, propertyDep_1 = propertyDep; _p < propertyDep_1.length; _p++) {\n                            var requiredProp = propertyDep_1[_p];\n                            if (!seenKeys[requiredProp]) {\n                                validationResult.problems.push({\n                                    location: { offset: node.offset, length: node.length },\n                                    severity: DiagnosticSeverity.Warning,\n                                    message: localize('RequiredDependentPropWarning', 'Object is missing property {0} required by property {1}.', requiredProp, key)\n                                });\n                            }\n                            else {\n                                validationResult.propertiesValueMatches++;\n                            }\n                        }\n                    }\n                    else {\n                        var propertySchema = asSchema(propertyDep);\n                        if (propertySchema) {\n                            var propertyValidationResult = new ValidationResult();\n                            validate(node, propertySchema, propertyValidationResult, matchingSchemas);\n                            validationResult.mergePropertyMatch(propertyValidationResult);\n                        }\n                    }\n                }\n            }\n        }\n        var propertyNames = asSchema(schema.propertyNames);\n        if (propertyNames) {\n            for (var _q = 0, _r = node.properties; _q < _r.length; _q++) {\n                var f = _r[_q];\n                var key = f.keyNode;\n                if (key) {\n                    validate(key, propertyNames, validationResult, NoOpSchemaCollector.instance);\n                }\n            }\n        }\n    }\n}\nexport function parse(textDocument, config) {\n    var problems = [];\n    var lastProblemOffset = -1;\n    var text = textDocument.getText();\n    var scanner = Json.createScanner(text, false);\n    var commentRanges = config && config.collectComments ? [] : void 0;\n    function _scanNext() {\n        while (true) {\n            var token_1 = scanner.scan();\n            _checkScanError();\n            switch (token_1) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (Array.isArray(commentRanges)) {\n                        commentRanges.push(Range.create(textDocument.positionAt(scanner.getTokenOffset()), textDocument.positionAt(scanner.getTokenOffset() + scanner.getTokenLength())));\n                    }\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token_1;\n            }\n        }\n    }\n    function _accept(token) {\n        if (scanner.getToken() === token) {\n            _scanNext();\n            return true;\n        }\n        return false;\n    }\n    function _errorAtRange(message, code, startOffset, endOffset, severity) {\n        if (severity === void 0) { severity = DiagnosticSeverity.Error; }\n        if (problems.length === 0 || startOffset !== lastProblemOffset) {\n            var range = Range.create(textDocument.positionAt(startOffset), textDocument.positionAt(endOffset));\n            problems.push(Diagnostic.create(range, message, severity, code, textDocument.languageId));\n            lastProblemOffset = startOffset;\n        }\n    }\n    function _error(message, code, node, skipUntilAfter, skipUntil) {\n        if (node === void 0) { node = null; }\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        var start = scanner.getTokenOffset();\n        var end = scanner.getTokenOffset() + scanner.getTokenLength();\n        if (start === end && start > 0) {\n            start--;\n            while (start > 0 && /\\s/.test(text.charAt(start))) {\n                start--;\n            }\n            end = start + 1;\n        }\n        _errorAtRange(message, code, start, end);\n        if (node) {\n            _finalize(node, false);\n        }\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token_2 = scanner.getToken();\n            while (token_2 !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token_2) !== -1) {\n                    _scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token_2) !== -1) {\n                    break;\n                }\n                token_2 = _scanNext();\n            }\n        }\n        return node;\n    }\n    function _checkScanError() {\n        switch (scanner.getTokenError()) {\n            case 4 /* InvalidUnicode */:\n                _error(localize('InvalidUnicode', 'Invalid unicode sequence in string.'), ErrorCode.InvalidUnicode);\n                return true;\n            case 5 /* InvalidEscapeCharacter */:\n                _error(localize('InvalidEscapeCharacter', 'Invalid escape character in string.'), ErrorCode.InvalidEscapeCharacter);\n                return true;\n            case 3 /* UnexpectedEndOfNumber */:\n                _error(localize('UnexpectedEndOfNumber', 'Unexpected end of number.'), ErrorCode.UnexpectedEndOfNumber);\n                return true;\n            case 1 /* UnexpectedEndOfComment */:\n                _error(localize('UnexpectedEndOfComment', 'Unexpected end of comment.'), ErrorCode.UnexpectedEndOfComment);\n                return true;\n            case 2 /* UnexpectedEndOfString */:\n                _error(localize('UnexpectedEndOfString', 'Unexpected end of string.'), ErrorCode.UnexpectedEndOfString);\n                return true;\n            case 6 /* InvalidCharacter */:\n                _error(localize('InvalidCharacter', 'Invalid characters in string. Control characters must be escaped.'), ErrorCode.InvalidCharacter);\n                return true;\n        }\n        return false;\n    }\n    function _finalize(node, scanNext) {\n        node.length = scanner.getTokenOffset() + scanner.getTokenLength() - node.offset;\n        if (scanNext) {\n            _scanNext();\n        }\n        return node;\n    }\n    function _parseArray(parent) {\n        if (scanner.getToken() !== 3 /* OpenBracketToken */) {\n            return null;\n        }\n        var node = new ArrayASTNodeImpl(parent, scanner.getTokenOffset());\n        _scanNext(); // consume OpenBracketToken\n        var count = 0;\n        var needsComma = false;\n        while (scanner.getToken() !== 4 /* CloseBracketToken */ && scanner.getToken() !== 17 /* EOF */) {\n            if (scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    _error(localize('ValueExpected', 'Value expected'), ErrorCode.ValueExpected);\n                }\n                var commaOffset = scanner.getTokenOffset();\n                _scanNext(); // consume comma\n                if (scanner.getToken() === 4 /* CloseBracketToken */) {\n                    if (needsComma) {\n                        _errorAtRange(localize('TrailingComma', 'Trailing comma'), ErrorCode.TrailingComma, commaOffset, commaOffset + 1);\n                    }\n                    continue;\n                }\n            }\n            else if (needsComma) {\n                _error(localize('ExpectedComma', 'Expected comma'), ErrorCode.CommaExpected);\n            }\n            var item = _parseValue(node, count++);\n            if (!item) {\n                _error(localize('PropertyExpected', 'Value expected'), ErrorCode.ValueExpected, null, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            else {\n                node.items.push(item);\n            }\n            needsComma = true;\n        }\n        if (scanner.getToken() !== 4 /* CloseBracketToken */) {\n            return _error(localize('ExpectedCloseBracket', 'Expected comma or closing bracket'), ErrorCode.CommaOrCloseBacketExpected, node);\n        }\n        return _finalize(node, true);\n    }\n    function _parseProperty(parent, keysSeen) {\n        var node = new PropertyASTNodeImpl(parent, scanner.getTokenOffset());\n        var key = _parseString(node);\n        if (!key) {\n            if (scanner.getToken() === 16 /* Unknown */) {\n                // give a more helpful error message\n                _error(localize('DoubleQuotesExpected', 'Property keys must be doublequoted'), ErrorCode.Undefined);\n                var keyNode = new StringASTNodeImpl(node, scanner.getTokenOffset(), scanner.getTokenLength());\n                keyNode.value = scanner.getTokenValue();\n                key = keyNode;\n                _scanNext(); // consume Unknown\n            }\n            else {\n                return null;\n            }\n        }\n        node.keyNode = key;\n        var seen = keysSeen[key.value];\n        if (seen) {\n            _errorAtRange(localize('DuplicateKeyWarning', \"Duplicate object key\"), ErrorCode.DuplicateKey, node.keyNode.offset, node.keyNode.offset + node.keyNode.length, DiagnosticSeverity.Warning);\n            if (typeof seen === 'object') {\n                _errorAtRange(localize('DuplicateKeyWarning', \"Duplicate object key\"), ErrorCode.DuplicateKey, seen.keyNode.offset, seen.keyNode.offset + seen.keyNode.length, DiagnosticSeverity.Warning);\n            }\n            keysSeen[key.value] = true; // if the same key is duplicate again, avoid duplicate error reporting\n        }\n        else {\n            keysSeen[key.value] = node;\n        }\n        if (scanner.getToken() === 6 /* ColonToken */) {\n            node.colonOffset = scanner.getTokenOffset();\n            _scanNext(); // consume ColonToken\n        }\n        else {\n            _error(localize('ColonExpected', 'Colon expected'), ErrorCode.ColonExpected);\n            if (scanner.getToken() === 10 /* StringLiteral */ && textDocument.positionAt(key.offset + key.length).line < textDocument.positionAt(scanner.getTokenOffset()).line) {\n                node.length = key.length;\n                return node;\n            }\n        }\n        var value = _parseValue(node, key.value);\n        if (!value) {\n            return _error(localize('ValueExpected', 'Value expected'), ErrorCode.ValueExpected, node, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        node.valueNode = value;\n        node.length = value.offset + value.length - node.offset;\n        return node;\n    }\n    function _parseObject(parent) {\n        if (scanner.getToken() !== 1 /* OpenBraceToken */) {\n            return null;\n        }\n        var node = new ObjectASTNodeImpl(parent, scanner.getTokenOffset());\n        var keysSeen = Object.create(null);\n        _scanNext(); // consume OpenBraceToken\n        var needsComma = false;\n        while (scanner.getToken() !== 2 /* CloseBraceToken */ && scanner.getToken() !== 17 /* EOF */) {\n            if (scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    _error(localize('PropertyExpected', 'Property expected'), ErrorCode.PropertyExpected);\n                }\n                var commaOffset = scanner.getTokenOffset();\n                _scanNext(); // consume comma\n                if (scanner.getToken() === 2 /* CloseBraceToken */) {\n                    if (needsComma) {\n                        _errorAtRange(localize('TrailingComma', 'Trailing comma'), ErrorCode.TrailingComma, commaOffset, commaOffset + 1);\n                    }\n                    continue;\n                }\n            }\n            else if (needsComma) {\n                _error(localize('ExpectedComma', 'Expected comma'), ErrorCode.CommaExpected);\n            }\n            var property = _parseProperty(node, keysSeen);\n            if (!property) {\n                _error(localize('PropertyExpected', 'Property expected'), ErrorCode.PropertyExpected, null, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            else {\n                node.properties.push(property);\n            }\n            needsComma = true;\n        }\n        if (scanner.getToken() !== 2 /* CloseBraceToken */) {\n            return _error(localize('ExpectedCloseBrace', 'Expected comma or closing brace'), ErrorCode.CommaOrCloseBraceExpected, node);\n        }\n        return _finalize(node, true);\n    }\n    function _parseString(parent) {\n        if (scanner.getToken() !== 10 /* StringLiteral */) {\n            return null;\n        }\n        var node = new StringASTNodeImpl(parent, scanner.getTokenOffset());\n        node.value = scanner.getTokenValue();\n        return _finalize(node, true);\n    }\n    function _parseNumber(parent) {\n        if (scanner.getToken() !== 11 /* NumericLiteral */) {\n            return null;\n        }\n        var node = new NumberASTNodeImpl(parent, scanner.getTokenOffset());\n        if (scanner.getTokenError() === 0 /* None */) {\n            var tokenValue = scanner.getTokenValue();\n            try {\n                var numberValue = JSON.parse(tokenValue);\n                if (!isNumber(numberValue)) {\n                    return _error(localize('InvalidNumberFormat', 'Invalid number format.'), ErrorCode.Undefined, node);\n                }\n                node.value = numberValue;\n            }\n            catch (e) {\n                return _error(localize('InvalidNumberFormat', 'Invalid number format.'), ErrorCode.Undefined, node);\n            }\n            node.isInteger = tokenValue.indexOf('.') === -1;\n        }\n        return _finalize(node, true);\n    }\n    function _parseLiteral(parent) {\n        var node;\n        switch (scanner.getToken()) {\n            case 7 /* NullKeyword */:\n                return _finalize(new NullASTNodeImpl(parent, scanner.getTokenOffset()), true);\n            case 8 /* TrueKeyword */:\n                return _finalize(new BooleanASTNodeImpl(parent, true, scanner.getTokenOffset()), true);\n            case 9 /* FalseKeyword */:\n                return _finalize(new BooleanASTNodeImpl(parent, false, scanner.getTokenOffset()), true);\n            default:\n                return null;\n        }\n    }\n    function _parseValue(parent, name) {\n        return _parseArray(parent) || _parseObject(parent) || _parseString(parent) || _parseNumber(parent) || _parseLiteral(parent);\n    }\n    var _root = null;\n    var token = _scanNext();\n    if (token !== 17 /* EOF */) {\n        _root = _parseValue(null, null);\n        if (!_root) {\n            _error(localize('Invalid symbol', 'Expected a JSON object, array or literal.'), ErrorCode.Undefined);\n        }\n        else if (scanner.getToken() !== 17 /* EOF */) {\n            _error(localize('End of file expected', 'End of file expected.'), ErrorCode.Undefined);\n        }\n    }\n    return new JSONDocument(_root, problems, commentRanges);\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function stringifyObject(obj, indent, stringifyLiteral) {\n    if (obj !== null && typeof obj === 'object') {\n        var newIndent = indent + '\\t';\n        if (Array.isArray(obj)) {\n            if (obj.length === 0) {\n                return '[]';\n            }\n            var result = '[\\n';\n            for (var i = 0; i < obj.length; i++) {\n                result += newIndent + stringifyObject(obj[i], newIndent, stringifyLiteral);\n                if (i < obj.length - 1) {\n                    result += ',';\n                }\n                result += '\\n';\n            }\n            result += indent + ']';\n            return result;\n        }\n        else {\n            var keys = Object.keys(obj);\n            if (keys.length === 0) {\n                return '{}';\n            }\n            var result = '{\\n';\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                result += newIndent + JSON.stringify(key) + ': ' + stringifyObject(obj[key], newIndent, stringifyLiteral);\n                if (i < keys.length - 1) {\n                    result += ',';\n                }\n                result += '\\n';\n            }\n            result += indent + '}';\n            return result;\n        }\n    }\n    return stringifyLiteral(obj);\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function startsWith(haystack, needle) {\n    if (haystack.length < needle.length) {\n        return false;\n    }\n    for (var i = 0; i < needle.length; i++) {\n        if (haystack[i] !== needle[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack, needle) {\n    var diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.lastIndexOf(needle) === diff;\n    }\n    else if (diff === 0) {\n        return haystack === needle;\n    }\n    else {\n        return false;\n    }\n}\nexport function convertSimple2RegExpPattern(pattern) {\n    return pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\n}\nexport function repeat(value, count) {\n    var s = '';\n    while (count > 0) {\n        if ((count & 1) === 1) {\n            s += value;\n        }\n        value += value;\n        count = count >>> 1;\n    }\n    return s;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser.js';\nimport * as Json from './../../jsonc-parser/main.js';\nimport { stringifyObject } from '../utils/json.js';\nimport { endsWith } from '../utils/strings.js';\nimport { isDefined } from '../utils/objects.js';\nimport { CompletionItem, CompletionItemKind, Range, TextEdit, InsertTextFormat, MarkupKind } from '../jsonLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar valueCommitCharacters = [',', '}', ']'];\nvar propertyCommitCharacters = [':'];\nvar JSONCompletion = /** @class */ (function () {\n    function JSONCompletion(schemaService, contributions, promiseConstructor, clientCapabilities) {\n        if (contributions === void 0) { contributions = []; }\n        if (promiseConstructor === void 0) { promiseConstructor = Promise; }\n        if (clientCapabilities === void 0) { clientCapabilities = {}; }\n        this.schemaService = schemaService;\n        this.contributions = contributions;\n        this.promiseConstructor = promiseConstructor;\n        this.clientCapabilities = clientCapabilities;\n        this.templateVarIdCounter = 0;\n    }\n    JSONCompletion.prototype.doResolve = function (item) {\n        for (var i = this.contributions.length - 1; i >= 0; i--) {\n            if (this.contributions[i].resolveCompletion) {\n                var resolver = this.contributions[i].resolveCompletion(item);\n                if (resolver) {\n                    return resolver;\n                }\n            }\n        }\n        return this.promiseConstructor.resolve(item);\n    };\n    JSONCompletion.prototype.doComplete = function (document, position, doc) {\n        var _this = this;\n        var result = {\n            items: [],\n            isIncomplete: false\n        };\n        var text = document.getText();\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset, true);\n        if (this.isInComment(document, node ? node.offset : 0, offset)) {\n            return Promise.resolve(result);\n        }\n        if (node && (offset === node.offset + node.length) && offset > 0) {\n            var ch = text[offset - 1];\n            if (node.type === 'object' && ch === '}' || node.type === 'array' && ch === ']') {\n                // after ] or }\n                node = node.parent;\n            }\n        }\n        var currentWord = this.getCurrentWord(document, offset);\n        var overwriteRange = null;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            overwriteRange = Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n        }\n        else {\n            var overwriteStart = offset - currentWord.length;\n            if (overwriteStart > 0 && text[overwriteStart - 1] === '\"') {\n                overwriteStart--;\n            }\n            overwriteRange = Range.create(document.positionAt(overwriteStart), position);\n        }\n        var supportsCommitCharacters = false; //this.doesSupportsCommitCharacters(); disabled for now, waiting for new API: https://github.com/microsoft/vscode/issues/42544\n        var proposed = {};\n        var collector = {\n            add: function (suggestion) {\n                var label = suggestion.label;\n                var existing = proposed[label];\n                if (!existing) {\n                    label = label.replace(/[\\n]/g, '↵');\n                    if (label.length > 60) {\n                        var shortendedLabel = label.substr(0, 57).trim() + '...';\n                        if (!proposed[shortendedLabel]) {\n                            label = shortendedLabel;\n                        }\n                    }\n                    if (overwriteRange) {\n                        suggestion.textEdit = TextEdit.replace(overwriteRange, suggestion.insertText);\n                    }\n                    if (supportsCommitCharacters) {\n                        suggestion.commitCharacters = suggestion.kind === CompletionItemKind.Property ? propertyCommitCharacters : valueCommitCharacters;\n                    }\n                    suggestion.label = label;\n                    proposed[label] = suggestion;\n                    result.items.push(suggestion);\n                }\n                else if (!existing.documentation) {\n                    existing.documentation = suggestion.documentation;\n                }\n            },\n            setAsIncomplete: function () {\n                result.isIncomplete = true;\n            },\n            error: function (message) {\n                console.error(message);\n            },\n            log: function (message) {\n                console.log(message);\n            },\n            getNumberOfProposals: function () {\n                return result.items.length;\n            }\n        };\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            var collectionPromises = [];\n            var addValue = true;\n            var currentKey = '';\n            var currentProperty = null;\n            if (node) {\n                if (node.type === 'string') {\n                    var parent = node.parent;\n                    if (parent && parent.type === 'property' && parent.keyNode === node) {\n                        addValue = !parent.valueNode;\n                        currentProperty = parent;\n                        currentKey = text.substr(node.offset + 1, node.length - 2);\n                        if (parent) {\n                            node = parent.parent;\n                        }\n                    }\n                }\n            }\n            // proposals for properties\n            if (node && node.type === 'object') {\n                // don't suggest keys when the cursor is just before the opening curly brace\n                if (node.offset === offset) {\n                    return result;\n                }\n                // don't suggest properties that are already present\n                var properties = node.properties;\n                properties.forEach(function (p) {\n                    if (!currentProperty || currentProperty !== p) {\n                        proposed[p.keyNode.value] = CompletionItem.create('__');\n                    }\n                });\n                var separatorAfter_1 = '';\n                if (addValue) {\n                    separatorAfter_1 = _this.evaluateSeparatorAfter(document, document.offsetAt(overwriteRange.end));\n                }\n                if (schema) {\n                    // property proposals with schema\n                    _this.getPropertyCompletions(schema, doc, node, addValue, separatorAfter_1, collector);\n                }\n                else {\n                    // property proposals without schema\n                    _this.getSchemaLessPropertyCompletions(doc, node, currentKey, collector);\n                }\n                var location_1 = Parser.getNodePath(node);\n                _this.contributions.forEach(function (contribution) {\n                    var collectPromise = contribution.collectPropertyCompletions(document.uri, location_1, currentWord, addValue, separatorAfter_1 === '', collector);\n                    if (collectPromise) {\n                        collectionPromises.push(collectPromise);\n                    }\n                });\n                if ((!schema && currentWord.length > 0 && text.charAt(offset - currentWord.length - 1) !== '\"')) {\n                    collector.add({\n                        kind: CompletionItemKind.Property,\n                        label: _this.getLabelForValue(currentWord),\n                        insertText: _this.getInsertTextForProperty(currentWord, null, false, separatorAfter_1),\n                        insertTextFormat: InsertTextFormat.Snippet, documentation: '',\n                    });\n                    collector.setAsIncomplete();\n                }\n            }\n            // proposals for values\n            var types = {};\n            if (schema) {\n                // value proposals with schema\n                _this.getValueCompletions(schema, doc, node, offset, document, collector, types);\n            }\n            else {\n                // value proposals without schema\n                _this.getSchemaLessValueCompletions(doc, node, offset, document, collector);\n            }\n            if (_this.contributions.length > 0) {\n                _this.getContributedValueCompletions(doc, node, offset, document, collector, collectionPromises);\n            }\n            return _this.promiseConstructor.all(collectionPromises).then(function () {\n                if (collector.getNumberOfProposals() === 0) {\n                    var offsetForSeparator = offset;\n                    if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n                        offsetForSeparator = node.offset + node.length;\n                    }\n                    var separatorAfter = _this.evaluateSeparatorAfter(document, offsetForSeparator);\n                    _this.addFillerValueCompletions(types, separatorAfter, collector);\n                }\n                return result;\n            });\n        });\n    };\n    JSONCompletion.prototype.getPropertyCompletions = function (schema, doc, node, addValue, separatorAfter, collector) {\n        var _this = this;\n        var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset);\n        matchingSchemas.forEach(function (s) {\n            if (s.node === node && !s.inverted) {\n                var schemaProperties_1 = s.schema.properties;\n                if (schemaProperties_1) {\n                    Object.keys(schemaProperties_1).forEach(function (key) {\n                        var propertySchema = schemaProperties_1[key];\n                        if (typeof propertySchema === 'object' && !propertySchema.deprecationMessage && !propertySchema.doNotSuggest) {\n                            var proposal = {\n                                kind: CompletionItemKind.Property,\n                                label: key,\n                                insertText: _this.getInsertTextForProperty(key, propertySchema, addValue, separatorAfter),\n                                insertTextFormat: InsertTextFormat.Snippet,\n                                filterText: _this.getFilterTextForValue(key),\n                                documentation: _this.fromMarkup(propertySchema.markdownDescription) || propertySchema.description || '',\n                            };\n                            if (endsWith(proposal.insertText, \"$1\" + separatorAfter)) {\n                                proposal.command = {\n                                    title: 'Suggest',\n                                    command: 'editor.action.triggerSuggest'\n                                };\n                            }\n                            collector.add(proposal);\n                        }\n                    });\n                }\n            }\n        });\n    };\n    JSONCompletion.prototype.getSchemaLessPropertyCompletions = function (doc, node, currentKey, collector) {\n        var _this = this;\n        var collectCompletionsForSimilarObject = function (obj) {\n            obj.properties.forEach(function (p) {\n                var key = p.keyNode.value;\n                collector.add({\n                    kind: CompletionItemKind.Property,\n                    label: key,\n                    insertText: _this.getInsertTextForValue(key, ''),\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    filterText: _this.getFilterTextForValue(key),\n                    documentation: ''\n                });\n            });\n        };\n        if (node.parent) {\n            if (node.parent.type === 'property') {\n                // if the object is a property value, check the tree for other objects that hang under a property of the same name\n                var parentKey_1 = node.parent.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n !== node.parent && n.keyNode.value === parentKey_1 && n.valueNode && n.valueNode.type === 'object') {\n                        collectCompletionsForSimilarObject(n.valueNode);\n                    }\n                    return true;\n                });\n            }\n            else if (node.parent.type === 'array') {\n                // if the object is in an array, use all other array elements as similar objects\n                node.parent.items.forEach(function (n) {\n                    if (n.type === 'object' && n !== node) {\n                        collectCompletionsForSimilarObject(n);\n                    }\n                });\n            }\n        }\n        else if (node.type === 'object') {\n            collector.add({\n                kind: CompletionItemKind.Property,\n                label: '$schema',\n                insertText: this.getInsertTextForProperty('$schema', null, true, ''),\n                insertTextFormat: InsertTextFormat.Snippet, documentation: '',\n                filterText: this.getFilterTextForValue(\"$schema\")\n            });\n        }\n    };\n    JSONCompletion.prototype.getSchemaLessValueCompletions = function (doc, node, offset, document, collector) {\n        var _this = this;\n        var offsetForSeparator = offset;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            offsetForSeparator = node.offset + node.length;\n            node = node.parent;\n        }\n        if (!node) {\n            collector.add({\n                kind: this.getSuggestionKind('object'),\n                label: 'Empty object',\n                insertText: this.getInsertTextForValue({}, ''),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: ''\n            });\n            collector.add({\n                kind: this.getSuggestionKind('array'),\n                label: 'Empty array',\n                insertText: this.getInsertTextForValue([], ''),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: ''\n            });\n            return;\n        }\n        var separatorAfter = this.evaluateSeparatorAfter(document, offsetForSeparator);\n        var collectSuggestionsForValues = function (value) {\n            if (!Parser.contains(value.parent, offset, true)) {\n                collector.add({\n                    kind: _this.getSuggestionKind(value.type),\n                    label: _this.getLabelTextForMatchingNode(value, document),\n                    insertText: _this.getInsertTextForMatchingNode(value, document, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n                });\n            }\n            if (value.type === 'boolean') {\n                _this.addBooleanValueCompletion(!value.value, separatorAfter, collector);\n            }\n        };\n        if (node.type === 'property') {\n            if (offset > node.colonOffset) {\n                var valueNode = node.valueNode;\n                if (valueNode && (offset > (valueNode.offset + valueNode.length) || valueNode.type === 'object' || valueNode.type === 'array')) {\n                    return;\n                }\n                // suggest values at the same key\n                var parentKey_2 = node.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n.keyNode.value === parentKey_2 && n.valueNode) {\n                        collectSuggestionsForValues(n.valueNode);\n                    }\n                    return true;\n                });\n                if (parentKey_2 === '$schema' && node.parent && !node.parent.parent) {\n                    this.addDollarSchemaCompletions(separatorAfter, collector);\n                }\n            }\n        }\n        if (node.type === 'array') {\n            if (node.parent && node.parent.type === 'property') {\n                // suggest items of an array at the same key\n                var parentKey_3 = node.parent.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n.keyNode.value === parentKey_3 && n.valueNode && n.valueNode.type === 'array') {\n                        n.valueNode.items.forEach(collectSuggestionsForValues);\n                    }\n                    return true;\n                });\n            }\n            else {\n                // suggest items in the same array\n                node.items.forEach(collectSuggestionsForValues);\n            }\n        }\n    };\n    JSONCompletion.prototype.getValueCompletions = function (schema, doc, node, offset, document, collector, types) {\n        var _this = this;\n        var offsetForSeparator = offset;\n        var parentKey = null;\n        var valueNode = null;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            offsetForSeparator = node.offset + node.length;\n            valueNode = node;\n            node = node.parent;\n        }\n        if (!node) {\n            this.addSchemaValueCompletions(schema.schema, '', collector, types);\n            return;\n        }\n        if ((node.type === 'property') && offset > node.colonOffset) {\n            var valueNode_1 = node.valueNode;\n            if (valueNode_1 && offset > (valueNode_1.offset + valueNode_1.length)) {\n                return; // we are past the value node\n            }\n            parentKey = node.keyNode.value;\n            node = node.parent;\n        }\n        if (node && (parentKey !== null || node.type === 'array')) {\n            var separatorAfter_2 = this.evaluateSeparatorAfter(document, offsetForSeparator);\n            var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset, valueNode);\n            matchingSchemas.forEach(function (s) {\n                if (s.node === node && !s.inverted && s.schema) {\n                    if (node.type === 'array' && s.schema.items) {\n                        if (Array.isArray(s.schema.items)) {\n                            var index = _this.findItemAtOffset(node, document, offset);\n                            if (index < s.schema.items.length) {\n                                _this.addSchemaValueCompletions(s.schema.items[index], separatorAfter_2, collector, types);\n                            }\n                        }\n                        else {\n                            _this.addSchemaValueCompletions(s.schema.items, separatorAfter_2, collector, types);\n                        }\n                    }\n                    if (s.schema.properties) {\n                        var propertySchema = s.schema.properties[parentKey];\n                        if (propertySchema) {\n                            _this.addSchemaValueCompletions(propertySchema, separatorAfter_2, collector, types);\n                        }\n                    }\n                }\n            });\n            if (parentKey === '$schema' && !node.parent) {\n                this.addDollarSchemaCompletions(separatorAfter_2, collector);\n            }\n            if (types['boolean']) {\n                this.addBooleanValueCompletion(true, separatorAfter_2, collector);\n                this.addBooleanValueCompletion(false, separatorAfter_2, collector);\n            }\n            if (types['null']) {\n                this.addNullValueCompletion(separatorAfter_2, collector);\n            }\n        }\n    };\n    JSONCompletion.prototype.getContributedValueCompletions = function (doc, node, offset, document, collector, collectionPromises) {\n        if (!node) {\n            this.contributions.forEach(function (contribution) {\n                var collectPromise = contribution.collectDefaultCompletions(document.uri, collector);\n                if (collectPromise) {\n                    collectionPromises.push(collectPromise);\n                }\n            });\n        }\n        else {\n            if (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null') {\n                node = node.parent;\n            }\n            if ((node.type === 'property') && offset > node.colonOffset) {\n                var parentKey_4 = node.keyNode.value;\n                var valueNode = node.valueNode;\n                if (!valueNode || offset <= (valueNode.offset + valueNode.length)) {\n                    var location_2 = Parser.getNodePath(node.parent);\n                    this.contributions.forEach(function (contribution) {\n                        var collectPromise = contribution.collectValueCompletions(document.uri, location_2, parentKey_4, collector);\n                        if (collectPromise) {\n                            collectionPromises.push(collectPromise);\n                        }\n                    });\n                }\n            }\n        }\n    };\n    JSONCompletion.prototype.addSchemaValueCompletions = function (schema, separatorAfter, collector, types) {\n        var _this = this;\n        if (typeof schema === 'object') {\n            this.addEnumValueCompletions(schema, separatorAfter, collector);\n            this.addDefaultValueCompletions(schema, separatorAfter, collector);\n            this.collectTypes(schema, types);\n            if (Array.isArray(schema.allOf)) {\n                schema.allOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n            if (Array.isArray(schema.anyOf)) {\n                schema.anyOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n            if (Array.isArray(schema.oneOf)) {\n                schema.oneOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n        }\n    };\n    JSONCompletion.prototype.addDefaultValueCompletions = function (schema, separatorAfter, collector, arrayDepth) {\n        var _this = this;\n        if (arrayDepth === void 0) { arrayDepth = 0; }\n        var hasProposals = false;\n        if (isDefined(schema.default)) {\n            var type = schema.type;\n            var value = schema.default;\n            for (var i = arrayDepth; i > 0; i--) {\n                value = [value];\n                type = 'array';\n            }\n            collector.add({\n                kind: this.getSuggestionKind(type),\n                label: this.getLabelForValue(value),\n                insertText: this.getInsertTextForValue(value, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('json.suggest.default', 'Default value')\n            });\n            hasProposals = true;\n        }\n        if (Array.isArray(schema.examples)) {\n            schema.examples.forEach(function (example) {\n                var type = schema.type;\n                var value = example;\n                for (var i = arrayDepth; i > 0; i--) {\n                    value = [value];\n                    type = 'array';\n                }\n                collector.add({\n                    kind: _this.getSuggestionKind(type),\n                    label: _this.getLabelForValue(value),\n                    insertText: _this.getInsertTextForValue(value, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet\n                });\n                hasProposals = true;\n            });\n        }\n        if (Array.isArray(schema.defaultSnippets)) {\n            schema.defaultSnippets.forEach(function (s) {\n                var type = schema.type;\n                var value = s.body;\n                var label = s.label;\n                var insertText;\n                var filterText;\n                if (isDefined(value)) {\n                    var type_1 = schema.type;\n                    for (var i = arrayDepth; i > 0; i--) {\n                        value = [value];\n                        type_1 = 'array';\n                    }\n                    insertText = _this.getInsertTextForSnippetValue(value, separatorAfter);\n                    filterText = _this.getFilterTextForSnippetValue(value);\n                    label = label || _this.getLabelForSnippetValue(value);\n                }\n                else if (typeof s.bodyText === 'string') {\n                    var prefix = '', suffix = '', indent = '';\n                    for (var i = arrayDepth; i > 0; i--) {\n                        prefix = prefix + indent + '[\\n';\n                        suffix = suffix + '\\n' + indent + ']';\n                        indent += '\\t';\n                        type = 'array';\n                    }\n                    insertText = prefix + indent + s.bodyText.split('\\n').join('\\n' + indent) + suffix + separatorAfter;\n                    label = label || insertText,\n                        filterText = insertText.replace(/[\\n]/g, ''); // remove new lines\n                }\n                collector.add({\n                    kind: _this.getSuggestionKind(type),\n                    label: label,\n                    documentation: _this.fromMarkup(s.markdownDescription) || s.description,\n                    insertText: insertText,\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    filterText: filterText\n                });\n                hasProposals = true;\n            });\n        }\n        if (!hasProposals && typeof schema.items === 'object' && !Array.isArray(schema.items)) {\n            this.addDefaultValueCompletions(schema.items, separatorAfter, collector, arrayDepth + 1);\n        }\n    };\n    JSONCompletion.prototype.addEnumValueCompletions = function (schema, separatorAfter, collector) {\n        if (isDefined(schema.const)) {\n            collector.add({\n                kind: this.getSuggestionKind(schema.type),\n                label: this.getLabelForValue(schema.const),\n                insertText: this.getInsertTextForValue(schema.const, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: this.fromMarkup(schema.markdownDescription) || schema.description\n            });\n        }\n        if (Array.isArray(schema.enum)) {\n            for (var i = 0, length = schema.enum.length; i < length; i++) {\n                var enm = schema.enum[i];\n                var documentation = this.fromMarkup(schema.markdownDescription) || schema.description;\n                if (schema.markdownEnumDescriptions && i < schema.markdownEnumDescriptions.length && this.doesSupportMarkdown()) {\n                    documentation = this.fromMarkup(schema.markdownEnumDescriptions[i]);\n                }\n                else if (schema.enumDescriptions && i < schema.enumDescriptions.length) {\n                    documentation = schema.enumDescriptions[i];\n                }\n                collector.add({\n                    kind: this.getSuggestionKind(schema.type),\n                    label: this.getLabelForValue(enm),\n                    insertText: this.getInsertTextForValue(enm, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    documentation: documentation\n                });\n            }\n        }\n    };\n    JSONCompletion.prototype.collectTypes = function (schema, types) {\n        if (Array.isArray(schema.enum) || isDefined(schema.const)) {\n            return;\n        }\n        var type = schema.type;\n        if (Array.isArray(type)) {\n            type.forEach(function (t) { return types[t] = true; });\n        }\n        else {\n            types[type] = true;\n        }\n    };\n    JSONCompletion.prototype.addFillerValueCompletions = function (types, separatorAfter, collector) {\n        if (types['object']) {\n            collector.add({\n                kind: this.getSuggestionKind('object'),\n                label: '{}',\n                insertText: this.getInsertTextForGuessedValue({}, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('defaults.object', 'New object'),\n                documentation: ''\n            });\n        }\n        if (types['array']) {\n            collector.add({\n                kind: this.getSuggestionKind('array'),\n                label: '[]',\n                insertText: this.getInsertTextForGuessedValue([], separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('defaults.array', 'New array'),\n                documentation: ''\n            });\n        }\n    };\n    JSONCompletion.prototype.addBooleanValueCompletion = function (value, separatorAfter, collector) {\n        collector.add({\n            kind: this.getSuggestionKind('boolean'),\n            label: value ? 'true' : 'false',\n            insertText: this.getInsertTextForValue(value, separatorAfter),\n            insertTextFormat: InsertTextFormat.Snippet,\n            documentation: ''\n        });\n    };\n    JSONCompletion.prototype.addNullValueCompletion = function (separatorAfter, collector) {\n        collector.add({\n            kind: this.getSuggestionKind('null'),\n            label: 'null',\n            insertText: 'null' + separatorAfter,\n            insertTextFormat: InsertTextFormat.Snippet,\n            documentation: ''\n        });\n    };\n    JSONCompletion.prototype.addDollarSchemaCompletions = function (separatorAfter, collector) {\n        var _this = this;\n        var schemaIds = this.schemaService.getRegisteredSchemaIds(function (schema) { return schema === 'http' || schema === 'https'; });\n        schemaIds.forEach(function (schemaId) { return collector.add({\n            kind: CompletionItemKind.Module,\n            label: _this.getLabelForValue(schemaId),\n            filterText: _this.getFilterTextForValue(schemaId),\n            insertText: _this.getInsertTextForValue(schemaId, separatorAfter),\n            insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n        }); });\n    };\n    JSONCompletion.prototype.getLabelForValue = function (value) {\n        return JSON.stringify(value);\n    };\n    JSONCompletion.prototype.getFilterTextForValue = function (value) {\n        return JSON.stringify(value);\n    };\n    JSONCompletion.prototype.getFilterTextForSnippetValue = function (value) {\n        return JSON.stringify(value).replace(/\\$\\{\\d+:([^}]+)\\}|\\$\\d+/g, '$1');\n    };\n    JSONCompletion.prototype.getLabelForSnippetValue = function (value) {\n        var label = JSON.stringify(value);\n        return label.replace(/\\$\\{\\d+:([^}]+)\\}|\\$\\d+/g, '$1');\n    };\n    JSONCompletion.prototype.getInsertTextForPlainText = function (text) {\n        return text.replace(/[\\\\\\$\\}]/g, '\\\\$&'); // escape $, \\ and } \n    };\n    JSONCompletion.prototype.getInsertTextForValue = function (value, separatorAfter) {\n        var text = JSON.stringify(value, null, '\\t');\n        if (text === '{}') {\n            return '{$1}' + separatorAfter;\n        }\n        else if (text === '[]') {\n            return '[$1]' + separatorAfter;\n        }\n        return this.getInsertTextForPlainText(text + separatorAfter);\n    };\n    JSONCompletion.prototype.getInsertTextForSnippetValue = function (value, separatorAfter) {\n        var replacer = function (value) {\n            if (typeof value === 'string') {\n                if (value[0] === '^') {\n                    return value.substr(1);\n                }\n            }\n            return JSON.stringify(value);\n        };\n        return stringifyObject(value, '', replacer) + separatorAfter;\n    };\n    JSONCompletion.prototype.getInsertTextForGuessedValue = function (value, separatorAfter) {\n        switch (typeof value) {\n            case 'object':\n                if (value === null) {\n                    return '${1:null}' + separatorAfter;\n                }\n                return this.getInsertTextForValue(value, separatorAfter);\n            case 'string':\n                var snippetValue = JSON.stringify(value);\n                snippetValue = snippetValue.substr(1, snippetValue.length - 2); // remove quotes\n                snippetValue = this.getInsertTextForPlainText(snippetValue); // escape \\ and }\n                return '\"${1:' + snippetValue + '}\"' + separatorAfter;\n            case 'number':\n            case 'boolean':\n                return '${1:' + JSON.stringify(value) + '}' + separatorAfter;\n        }\n        return this.getInsertTextForValue(value, separatorAfter);\n    };\n    JSONCompletion.prototype.getSuggestionKind = function (type) {\n        if (Array.isArray(type)) {\n            var array = type;\n            type = array.length > 0 ? array[0] : null;\n        }\n        if (!type) {\n            return CompletionItemKind.Value;\n        }\n        switch (type) {\n            case 'string': return CompletionItemKind.Value;\n            case 'object': return CompletionItemKind.Module;\n            case 'property': return CompletionItemKind.Property;\n            default: return CompletionItemKind.Value;\n        }\n    };\n    JSONCompletion.prototype.getLabelTextForMatchingNode = function (node, document) {\n        switch (node.type) {\n            case 'array':\n                return '[]';\n            case 'object':\n                return '{}';\n            default:\n                var content = document.getText().substr(node.offset, node.length);\n                return content;\n        }\n    };\n    JSONCompletion.prototype.getInsertTextForMatchingNode = function (node, document, separatorAfter) {\n        switch (node.type) {\n            case 'array':\n                return this.getInsertTextForValue([], separatorAfter);\n            case 'object':\n                return this.getInsertTextForValue({}, separatorAfter);\n            default:\n                var content = document.getText().substr(node.offset, node.length) + separatorAfter;\n                return this.getInsertTextForPlainText(content);\n        }\n    };\n    JSONCompletion.prototype.getInsertTextForProperty = function (key, propertySchema, addValue, separatorAfter) {\n        var propertyText = this.getInsertTextForValue(key, '');\n        if (!addValue) {\n            return propertyText;\n        }\n        var resultText = propertyText + ': ';\n        var value;\n        var nValueProposals = 0;\n        if (propertySchema) {\n            if (Array.isArray(propertySchema.defaultSnippets)) {\n                if (propertySchema.defaultSnippets.length === 1) {\n                    var body = propertySchema.defaultSnippets[0].body;\n                    if (isDefined(body)) {\n                        value = this.getInsertTextForSnippetValue(body, '');\n                    }\n                }\n                nValueProposals += propertySchema.defaultSnippets.length;\n            }\n            if (propertySchema.enum) {\n                if (!value && propertySchema.enum.length === 1) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.enum[0], '');\n                }\n                nValueProposals += propertySchema.enum.length;\n            }\n            if (isDefined(propertySchema.default)) {\n                if (!value) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.default, '');\n                }\n                nValueProposals++;\n            }\n            if (Array.isArray(propertySchema.examples) && propertySchema.examples.length) {\n                if (!value) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.examples[0], '');\n                }\n                nValueProposals += propertySchema.examples.length;\n            }\n            if (nValueProposals === 0) {\n                var type = Array.isArray(propertySchema.type) ? propertySchema.type[0] : propertySchema.type;\n                if (!type) {\n                    if (propertySchema.properties) {\n                        type = 'object';\n                    }\n                    else if (propertySchema.items) {\n                        type = 'array';\n                    }\n                }\n                switch (type) {\n                    case 'boolean':\n                        value = '$1';\n                        break;\n                    case 'string':\n                        value = '\"$1\"';\n                        break;\n                    case 'object':\n                        value = '{$1}';\n                        break;\n                    case 'array':\n                        value = '[$1]';\n                        break;\n                    case 'number':\n                    case 'integer':\n                        value = '${1:0}';\n                        break;\n                    case 'null':\n                        value = '${1:null}';\n                        break;\n                    default:\n                        return propertyText;\n                }\n            }\n        }\n        if (!value || nValueProposals > 1) {\n            value = '$1';\n        }\n        return resultText + value + separatorAfter;\n    };\n    JSONCompletion.prototype.getCurrentWord = function (document, offset) {\n        var i = offset - 1;\n        var text = document.getText();\n        while (i >= 0 && ' \\t\\n\\r\\v\":{[,]}'.indexOf(text.charAt(i)) === -1) {\n            i--;\n        }\n        return text.substring(i + 1, offset);\n    };\n    JSONCompletion.prototype.evaluateSeparatorAfter = function (document, offset) {\n        var scanner = Json.createScanner(document.getText(), true);\n        scanner.setPosition(offset);\n        var token = scanner.scan();\n        switch (token) {\n            case 5 /* CommaToken */:\n            case 2 /* CloseBraceToken */:\n            case 4 /* CloseBracketToken */:\n            case 17 /* EOF */:\n                return '';\n            default:\n                return ',';\n        }\n    };\n    JSONCompletion.prototype.findItemAtOffset = function (node, document, offset) {\n        var scanner = Json.createScanner(document.getText(), true);\n        var children = node.items;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var child = children[i];\n            if (offset > child.offset + child.length) {\n                scanner.setPosition(child.offset + child.length);\n                var token = scanner.scan();\n                if (token === 5 /* CommaToken */ && offset >= scanner.getTokenOffset() + scanner.getTokenLength()) {\n                    return i + 1;\n                }\n                return i;\n            }\n            else if (offset >= child.offset) {\n                return i;\n            }\n        }\n        return 0;\n    };\n    JSONCompletion.prototype.isInComment = function (document, start, offset) {\n        var scanner = Json.createScanner(document.getText(), false);\n        scanner.setPosition(start);\n        var token = scanner.scan();\n        while (token !== 17 /* EOF */ && (scanner.getTokenOffset() + scanner.getTokenLength() < offset)) {\n            token = scanner.scan();\n        }\n        return (token === 12 /* LineCommentTrivia */ || token === 13 /* BlockCommentTrivia */) && scanner.getTokenOffset() <= offset;\n    };\n    JSONCompletion.prototype.fromMarkup = function (markupString) {\n        if (markupString && this.doesSupportMarkdown()) {\n            return {\n                kind: MarkupKind.Markdown,\n                value: markupString\n            };\n        }\n        return undefined;\n    };\n    JSONCompletion.prototype.doesSupportMarkdown = function () {\n        if (!isDefined(this.supportsMarkdown)) {\n            var completion = this.clientCapabilities.textDocument && this.clientCapabilities.textDocument.completion;\n            this.supportsMarkdown = completion && completion.completionItem && Array.isArray(completion.completionItem.documentationFormat) && completion.completionItem.documentationFormat.indexOf(MarkupKind.Markdown) !== -1;\n        }\n        return this.supportsMarkdown;\n    };\n    JSONCompletion.prototype.doesSupportsCommitCharacters = function () {\n        if (!isDefined(this.supportsCommitCharacters)) {\n            var completion = this.clientCapabilities.textDocument && this.clientCapabilities.textDocument.completion;\n            this.supportsCommitCharacters = completion && completion.completionItem && !!completion.completionItem.commitCharactersSupport;\n        }\n        return this.supportsCommitCharacters;\n    };\n    return JSONCompletion;\n}());\nexport { JSONCompletion };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser.js';\nimport { Range } from '../jsonLanguageTypes.js';\nvar JSONHover = /** @class */ (function () {\n    function JSONHover(schemaService, contributions, promiseConstructor) {\n        if (contributions === void 0) { contributions = []; }\n        this.schemaService = schemaService;\n        this.contributions = contributions;\n        this.promise = promiseConstructor || Promise;\n    }\n    JSONHover.prototype.doHover = function (document, position, doc) {\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset);\n        if (!node || (node.type === 'object' || node.type === 'array') && offset > node.offset + 1 && offset < node.offset + node.length - 1) {\n            return this.promise.resolve(null);\n        }\n        var hoverRangeNode = node;\n        // use the property description when hovering over an object key\n        if (node.type === 'string') {\n            var parent = node.parent;\n            if (parent && parent.type === 'property' && parent.keyNode === node) {\n                node = parent.valueNode;\n                if (!node) {\n                    return this.promise.resolve(null);\n                }\n            }\n        }\n        var hoverRange = Range.create(document.positionAt(hoverRangeNode.offset), document.positionAt(hoverRangeNode.offset + hoverRangeNode.length));\n        var createHover = function (contents) {\n            var result = {\n                contents: contents,\n                range: hoverRange\n            };\n            return result;\n        };\n        var location = Parser.getNodePath(node);\n        for (var i = this.contributions.length - 1; i >= 0; i--) {\n            var contribution = this.contributions[i];\n            var promise = contribution.getInfoContribution(document.uri, location);\n            if (promise) {\n                return promise.then(function (htmlContent) { return createHover(htmlContent); });\n            }\n        }\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            if (schema) {\n                var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset);\n                var title_1 = null;\n                var markdownDescription_1 = null;\n                var markdownEnumValueDescription_1 = null, enumValue_1 = null;\n                matchingSchemas.every(function (s) {\n                    if (s.node === node && !s.inverted && s.schema) {\n                        title_1 = title_1 || s.schema.title;\n                        markdownDescription_1 = markdownDescription_1 || s.schema.markdownDescription || toMarkdown(s.schema.description);\n                        if (s.schema.enum) {\n                            var idx = s.schema.enum.indexOf(Parser.getNodeValue(node));\n                            if (s.schema.markdownEnumDescriptions) {\n                                markdownEnumValueDescription_1 = s.schema.markdownEnumDescriptions[idx];\n                            }\n                            else if (s.schema.enumDescriptions) {\n                                markdownEnumValueDescription_1 = toMarkdown(s.schema.enumDescriptions[idx]);\n                            }\n                            if (markdownEnumValueDescription_1) {\n                                enumValue_1 = s.schema.enum[idx];\n                                if (typeof enumValue_1 !== 'string') {\n                                    enumValue_1 = JSON.stringify(enumValue_1);\n                                }\n                            }\n                        }\n                    }\n                    return true;\n                });\n                var result = '';\n                if (title_1) {\n                    result = toMarkdown(title_1);\n                }\n                if (markdownDescription_1) {\n                    if (result.length > 0) {\n                        result += \"\\n\\n\";\n                    }\n                    result += markdownDescription_1;\n                }\n                if (markdownEnumValueDescription_1) {\n                    if (result.length > 0) {\n                        result += \"\\n\\n\";\n                    }\n                    result += \"`\" + toMarkdownCodeBlock(enumValue_1) + \"`: \" + markdownEnumValueDescription_1;\n                }\n                return createHover([result]);\n            }\n            return null;\n        });\n    };\n    return JSONHover;\n}());\nexport { JSONHover };\nfunction toMarkdown(plain) {\n    if (plain) {\n        var res = plain.replace(/([^\\n\\r])(\\r?\\n)([^\\n\\r])/gm, '$1\\n\\n$3'); // single new lines to \\n\\n (Markdown paragraph)\n        return res.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    return void 0;\n}\nfunction toMarkdownCodeBlock(content) {\n    // see https://daringfireball.net/projects/markdown/syntax#precode\n    if (content.indexOf('`') !== -1) {\n        return '`` ' + content + ' ``';\n    }\n    return content;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\nfunction isLowerAsciiHex(code) {\n    return code >= 97 /* a */ && code <= 102 /* f */;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= 97 /* a */ && code <= 122 /* z */;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= 65 /* A */ && code <= 90 /* Z */;\n}\nfunction isAsciiLetter(code) {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme && _strict) {\n        throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (!scheme && !_strict) {\n        return 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = /** @class */ (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport { URI };\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// tslint:disable-next-line:class-name\nvar _URI = /** @class */ (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Json from './../../jsonc-parser/main.js';\nimport { URI } from './../../vscode-uri/index.js';\nimport * as Strings from '../utils/strings.js';\nimport * as Parser from '../parser/jsonParser.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar FilePatternAssociation = /** @class */ (function () {\n    function FilePatternAssociation(pattern) {\n        try {\n            this.patternRegExp = new RegExp(Strings.convertSimple2RegExpPattern(pattern) + '$');\n        }\n        catch (e) {\n            // invalid pattern\n            this.patternRegExp = null;\n        }\n        this.schemas = [];\n    }\n    FilePatternAssociation.prototype.addSchema = function (id) {\n        this.schemas.push(id);\n    };\n    FilePatternAssociation.prototype.matchesPattern = function (fileName) {\n        return this.patternRegExp && this.patternRegExp.test(fileName);\n    };\n    FilePatternAssociation.prototype.getSchemas = function () {\n        return this.schemas;\n    };\n    return FilePatternAssociation;\n}());\nvar SchemaHandle = /** @class */ (function () {\n    function SchemaHandle(service, url, unresolvedSchemaContent) {\n        this.service = service;\n        this.url = url;\n        this.dependencies = {};\n        if (unresolvedSchemaContent) {\n            this.unresolvedSchema = this.service.promise.resolve(new UnresolvedSchema(unresolvedSchemaContent));\n        }\n    }\n    SchemaHandle.prototype.getUnresolvedSchema = function () {\n        if (!this.unresolvedSchema) {\n            this.unresolvedSchema = this.service.loadSchema(this.url);\n        }\n        return this.unresolvedSchema;\n    };\n    SchemaHandle.prototype.getResolvedSchema = function () {\n        var _this = this;\n        if (!this.resolvedSchema) {\n            this.resolvedSchema = this.getUnresolvedSchema().then(function (unresolved) {\n                return _this.service.resolveSchemaContent(unresolved, _this.url, _this.dependencies);\n            });\n        }\n        return this.resolvedSchema;\n    };\n    SchemaHandle.prototype.clearSchema = function () {\n        this.resolvedSchema = null;\n        this.unresolvedSchema = null;\n        this.dependencies = {};\n    };\n    return SchemaHandle;\n}());\nvar UnresolvedSchema = /** @class */ (function () {\n    function UnresolvedSchema(schema, errors) {\n        if (errors === void 0) { errors = []; }\n        this.schema = schema;\n        this.errors = errors;\n    }\n    return UnresolvedSchema;\n}());\nexport { UnresolvedSchema };\nvar ResolvedSchema = /** @class */ (function () {\n    function ResolvedSchema(schema, errors) {\n        if (errors === void 0) { errors = []; }\n        this.schema = schema;\n        this.errors = errors;\n    }\n    ResolvedSchema.prototype.getSection = function (path) {\n        return Parser.asSchema(this.getSectionRecursive(path, this.schema));\n    };\n    ResolvedSchema.prototype.getSectionRecursive = function (path, schema) {\n        if (!schema || typeof schema === 'boolean' || path.length === 0) {\n            return schema;\n        }\n        var next = path.shift();\n        if (schema.properties && typeof schema.properties[next]) {\n            return this.getSectionRecursive(path, schema.properties[next]);\n        }\n        else if (schema.patternProperties) {\n            for (var _i = 0, _a = Object.keys(schema.patternProperties); _i < _a.length; _i++) {\n                var pattern = _a[_i];\n                var regex = new RegExp(pattern);\n                if (regex.test(next)) {\n                    return this.getSectionRecursive(path, schema.patternProperties[pattern]);\n                }\n            }\n        }\n        else if (typeof schema.additionalProperties === 'object') {\n            return this.getSectionRecursive(path, schema.additionalProperties);\n        }\n        else if (next.match('[0-9]+')) {\n            if (Array.isArray(schema.items)) {\n                var index = parseInt(next, 10);\n                if (!isNaN(index) && schema.items[index]) {\n                    return this.getSectionRecursive(path, schema.items[index]);\n                }\n            }\n            else if (schema.items) {\n                return this.getSectionRecursive(path, schema.items);\n            }\n        }\n        return null;\n    };\n    return ResolvedSchema;\n}());\nexport { ResolvedSchema };\nvar JSONSchemaService = /** @class */ (function () {\n    function JSONSchemaService(requestService, contextService, promiseConstructor) {\n        this.contextService = contextService;\n        this.requestService = requestService;\n        this.promiseConstructor = promiseConstructor || Promise;\n        this.callOnDispose = [];\n        this.contributionSchemas = {};\n        this.contributionAssociations = {};\n        this.schemasById = {};\n        this.filePatternAssociations = [];\n        this.filePatternAssociationById = {};\n        this.registeredSchemasIds = {};\n    }\n    JSONSchemaService.prototype.getRegisteredSchemaIds = function (filter) {\n        return Object.keys(this.registeredSchemasIds).filter(function (id) {\n            var scheme = URI.parse(id).scheme;\n            return scheme !== 'schemaservice' && (!filter || filter(scheme));\n        });\n    };\n    Object.defineProperty(JSONSchemaService.prototype, \"promise\", {\n        get: function () {\n            return this.promiseConstructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    JSONSchemaService.prototype.dispose = function () {\n        while (this.callOnDispose.length > 0) {\n            this.callOnDispose.pop()();\n        }\n    };\n    JSONSchemaService.prototype.onResourceChange = function (uri) {\n        var _this = this;\n        var hasChanges = false;\n        uri = this.normalizeId(uri);\n        var toWalk = [uri];\n        var all = Object.keys(this.schemasById).map(function (key) { return _this.schemasById[key]; });\n        while (toWalk.length) {\n            var curr = toWalk.pop();\n            for (var i = 0; i < all.length; i++) {\n                var handle = all[i];\n                if (handle && (handle.url === curr || handle.dependencies[curr])) {\n                    if (handle.url !== curr) {\n                        toWalk.push(handle.url);\n                    }\n                    handle.clearSchema();\n                    all[i] = undefined;\n                    hasChanges = true;\n                }\n            }\n        }\n        return hasChanges;\n    };\n    JSONSchemaService.prototype.normalizeId = function (id) {\n        // remove trailing '#', normalize drive capitalization\n        try {\n            return URI.parse(id).toString();\n        }\n        catch (e) {\n            return id;\n        }\n    };\n    JSONSchemaService.prototype.setSchemaContributions = function (schemaContributions) {\n        if (schemaContributions.schemas) {\n            var schemas = schemaContributions.schemas;\n            for (var id in schemas) {\n                var normalizedId = this.normalizeId(id);\n                this.contributionSchemas[normalizedId] = this.addSchemaHandle(normalizedId, schemas[id]);\n            }\n        }\n        if (schemaContributions.schemaAssociations) {\n            var schemaAssociations = schemaContributions.schemaAssociations;\n            for (var pattern in schemaAssociations) {\n                var associations = schemaAssociations[pattern];\n                this.contributionAssociations[pattern] = associations;\n                var fpa = this.getOrAddFilePatternAssociation(pattern);\n                for (var _i = 0, associations_1 = associations; _i < associations_1.length; _i++) {\n                    var schemaId = associations_1[_i];\n                    var id = this.normalizeId(schemaId);\n                    fpa.addSchema(id);\n                }\n            }\n        }\n    };\n    JSONSchemaService.prototype.addSchemaHandle = function (id, unresolvedSchemaContent) {\n        var schemaHandle = new SchemaHandle(this, id, unresolvedSchemaContent);\n        this.schemasById[id] = schemaHandle;\n        return schemaHandle;\n    };\n    JSONSchemaService.prototype.getOrAddSchemaHandle = function (id, unresolvedSchemaContent) {\n        return this.schemasById[id] || this.addSchemaHandle(id, unresolvedSchemaContent);\n    };\n    JSONSchemaService.prototype.getOrAddFilePatternAssociation = function (pattern) {\n        var fpa = this.filePatternAssociationById[pattern];\n        if (!fpa) {\n            fpa = new FilePatternAssociation(pattern);\n            this.filePatternAssociationById[pattern] = fpa;\n            this.filePatternAssociations.push(fpa);\n        }\n        return fpa;\n    };\n    JSONSchemaService.prototype.registerExternalSchema = function (uri, filePatterns, unresolvedSchemaContent) {\n        if (filePatterns === void 0) { filePatterns = null; }\n        var id = this.normalizeId(uri);\n        this.registeredSchemasIds[id] = true;\n        if (filePatterns) {\n            for (var _i = 0, filePatterns_1 = filePatterns; _i < filePatterns_1.length; _i++) {\n                var pattern = filePatterns_1[_i];\n                this.getOrAddFilePatternAssociation(pattern).addSchema(id);\n            }\n        }\n        return unresolvedSchemaContent ? this.addSchemaHandle(id, unresolvedSchemaContent) : this.getOrAddSchemaHandle(id);\n    };\n    JSONSchemaService.prototype.clearExternalSchemas = function () {\n        this.schemasById = {};\n        this.filePatternAssociations = [];\n        this.filePatternAssociationById = {};\n        this.registeredSchemasIds = {};\n        for (var id in this.contributionSchemas) {\n            this.schemasById[id] = this.contributionSchemas[id];\n            this.registeredSchemasIds[id] = true;\n        }\n        for (var pattern in this.contributionAssociations) {\n            var fpa = this.getOrAddFilePatternAssociation(pattern);\n            for (var _i = 0, _a = this.contributionAssociations[pattern]; _i < _a.length; _i++) {\n                var schemaId = _a[_i];\n                var id = this.normalizeId(schemaId);\n                fpa.addSchema(id);\n            }\n        }\n    };\n    JSONSchemaService.prototype.getResolvedSchema = function (schemaId) {\n        var id = this.normalizeId(schemaId);\n        var schemaHandle = this.schemasById[id];\n        if (schemaHandle) {\n            return schemaHandle.getResolvedSchema();\n        }\n        return this.promise.resolve(null);\n    };\n    JSONSchemaService.prototype.loadSchema = function (url) {\n        if (!this.requestService) {\n            var errorMessage = localize('json.schema.norequestservice', 'Unable to load schema from \\'{0}\\'. No schema request service available', toDisplayString(url));\n            return this.promise.resolve(new UnresolvedSchema({}, [errorMessage]));\n        }\n        return this.requestService(url).then(function (content) {\n            if (!content) {\n                var errorMessage = localize('json.schema.nocontent', 'Unable to load schema from \\'{0}\\': No content.', toDisplayString(url));\n                return new UnresolvedSchema({}, [errorMessage]);\n            }\n            var schemaContent = {};\n            var jsonErrors = [];\n            schemaContent = Json.parse(content, jsonErrors);\n            var errors = jsonErrors.length ? [localize('json.schema.invalidFormat', 'Unable to parse content from \\'{0}\\': Parse error at offset {1}.', toDisplayString(url), jsonErrors[0].offset)] : [];\n            return new UnresolvedSchema(schemaContent, errors);\n        }, function (error) {\n            var errorMessage = error.toString();\n            var errorSplit = error.toString().split('Error: ');\n            if (errorSplit.length > 1) {\n                // more concise error message, URL and context are attached by caller anyways\n                errorMessage = errorSplit[1];\n            }\n            if (Strings.endsWith(errorMessage, '.')) {\n                errorMessage = errorMessage.substr(0, errorMessage.length - 1);\n            }\n            return new UnresolvedSchema({}, [localize('json.schema.nocontent', 'Unable to load schema from \\'{0}\\': {1}.', toDisplayString(url), errorMessage)]);\n        });\n    };\n    JSONSchemaService.prototype.resolveSchemaContent = function (schemaToResolve, schemaURL, dependencies) {\n        var _this = this;\n        var resolveErrors = schemaToResolve.errors.slice(0);\n        var schema = schemaToResolve.schema;\n        if (schema.$schema) {\n            var id = this.normalizeId(schema.$schema);\n            if (id === 'http://json-schema.org/draft-03/schema') {\n                return this.promise.resolve(new ResolvedSchema({}, [localize('json.schema.draft03.notsupported', \"Draft-03 schemas are not supported.\")]));\n            }\n            else if (id === 'https://json-schema.org/draft/2019-09/schema') {\n                schemaToResolve.errors.push(localize('json.schema.draft201909.notsupported', \"Draft 2019-09 schemas are not yet fully supported.\"));\n            }\n        }\n        var contextService = this.contextService;\n        var findSection = function (schema, path) {\n            if (!path) {\n                return schema;\n            }\n            var current = schema;\n            if (path[0] === '/') {\n                path = path.substr(1);\n            }\n            path.split('/').some(function (part) {\n                current = current[part];\n                return !current;\n            });\n            return current;\n        };\n        var merge = function (target, sourceRoot, sourceURI, path) {\n            var section = findSection(sourceRoot, path);\n            if (section) {\n                for (var key in section) {\n                    if (section.hasOwnProperty(key) && !target.hasOwnProperty(key)) {\n                        target[key] = section[key];\n                    }\n                }\n            }\n            else {\n                resolveErrors.push(localize('json.schema.invalidref', '$ref \\'{0}\\' in \\'{1}\\' can not be resolved.', path, sourceURI));\n            }\n        };\n        var resolveExternalLink = function (node, uri, linkPath, parentSchemaURL, parentSchemaDependencies) {\n            if (contextService && !/^\\w+:\\/\\/.*/.test(uri)) {\n                uri = contextService.resolveRelativePath(uri, parentSchemaURL);\n            }\n            uri = _this.normalizeId(uri);\n            var referencedHandle = _this.getOrAddSchemaHandle(uri);\n            return referencedHandle.getUnresolvedSchema().then(function (unresolvedSchema) {\n                parentSchemaDependencies[uri] = true;\n                if (unresolvedSchema.errors.length) {\n                    var loc = linkPath ? uri + '#' + linkPath : uri;\n                    resolveErrors.push(localize('json.schema.problemloadingref', 'Problems loading reference \\'{0}\\': {1}', loc, unresolvedSchema.errors[0]));\n                }\n                merge(node, unresolvedSchema.schema, uri, linkPath);\n                return resolveRefs(node, unresolvedSchema.schema, uri, referencedHandle.dependencies);\n            });\n        };\n        var resolveRefs = function (node, parentSchema, parentSchemaURL, parentSchemaDependencies) {\n            if (!node || typeof node !== 'object') {\n                return Promise.resolve(null);\n            }\n            var toWalk = [node];\n            var seen = [];\n            var openPromises = [];\n            var collectEntries = function () {\n                var entries = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    entries[_i] = arguments[_i];\n                }\n                for (var _a = 0, entries_1 = entries; _a < entries_1.length; _a++) {\n                    var entry = entries_1[_a];\n                    if (typeof entry === 'object') {\n                        toWalk.push(entry);\n                    }\n                }\n            };\n            var collectMapEntries = function () {\n                var maps = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    maps[_i] = arguments[_i];\n                }\n                for (var _a = 0, maps_1 = maps; _a < maps_1.length; _a++) {\n                    var map = maps_1[_a];\n                    if (typeof map === 'object') {\n                        for (var key in map) {\n                            var entry = map[key];\n                            if (typeof entry === 'object') {\n                                toWalk.push(entry);\n                            }\n                        }\n                    }\n                }\n            };\n            var collectArrayEntries = function () {\n                var arrays = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arrays[_i] = arguments[_i];\n                }\n                for (var _a = 0, arrays_1 = arrays; _a < arrays_1.length; _a++) {\n                    var array = arrays_1[_a];\n                    if (Array.isArray(array)) {\n                        for (var _b = 0, array_1 = array; _b < array_1.length; _b++) {\n                            var entry = array_1[_b];\n                            if (typeof entry === 'object') {\n                                toWalk.push(entry);\n                            }\n                        }\n                    }\n                }\n            };\n            var handleRef = function (next) {\n                var seenRefs = [];\n                while (next.$ref) {\n                    var ref = next.$ref;\n                    var segments = ref.split('#', 2);\n                    delete next.$ref;\n                    if (segments[0].length > 0) {\n                        openPromises.push(resolveExternalLink(next, segments[0], segments[1], parentSchemaURL, parentSchemaDependencies));\n                        return;\n                    }\n                    else {\n                        if (seenRefs.indexOf(ref) === -1) {\n                            merge(next, parentSchema, parentSchemaURL, segments[1]); // can set next.$ref again, use seenRefs to avoid circle\n                            seenRefs.push(ref);\n                        }\n                    }\n                }\n                collectEntries(next.items, next.additionalProperties, next.not, next.contains, next.propertyNames, next.if, next.then, next.else);\n                collectMapEntries(next.definitions, next.properties, next.patternProperties, next.dependencies);\n                collectArrayEntries(next.anyOf, next.allOf, next.oneOf, next.items);\n            };\n            while (toWalk.length) {\n                var next = toWalk.pop();\n                if (seen.indexOf(next) >= 0) {\n                    continue;\n                }\n                seen.push(next);\n                handleRef(next);\n            }\n            return _this.promise.all(openPromises);\n        };\n        return resolveRefs(schema, schema, schemaURL, dependencies).then(function (_) { return new ResolvedSchema(schema, resolveErrors); });\n    };\n    JSONSchemaService.prototype.getSchemaForResource = function (resource, document) {\n        // first use $schema if present\n        if (document && document.root && document.root.type === 'object') {\n            var schemaProperties = document.root.properties.filter(function (p) { return (p.keyNode.value === '$schema') && p.valueNode && p.valueNode.type === 'string'; });\n            if (schemaProperties.length > 0) {\n                var schemeId = Parser.getNodeValue(schemaProperties[0].valueNode);\n                if (schemeId && Strings.startsWith(schemeId, '.') && this.contextService) {\n                    schemeId = this.contextService.resolveRelativePath(schemeId, resource);\n                }\n                if (schemeId) {\n                    var id = this.normalizeId(schemeId);\n                    return this.getOrAddSchemaHandle(id).getResolvedSchema();\n                }\n            }\n        }\n        var seen = Object.create(null);\n        var schemas = [];\n        for (var _i = 0, _a = this.filePatternAssociations; _i < _a.length; _i++) {\n            var entry = _a[_i];\n            if (entry.matchesPattern(resource)) {\n                for (var _b = 0, _c = entry.getSchemas(); _b < _c.length; _b++) {\n                    var schemaId = _c[_b];\n                    if (!seen[schemaId]) {\n                        schemas.push(schemaId);\n                        seen[schemaId] = true;\n                    }\n                }\n            }\n        }\n        if (schemas.length > 0) {\n            return this.createCombinedSchema(resource, schemas).getResolvedSchema();\n        }\n        return this.promise.resolve(null);\n    };\n    JSONSchemaService.prototype.createCombinedSchema = function (resource, schemaIds) {\n        if (schemaIds.length === 1) {\n            return this.getOrAddSchemaHandle(schemaIds[0]);\n        }\n        else {\n            var combinedSchemaId = 'schemaservice://combinedSchema/' + encodeURIComponent(resource);\n            var combinedSchema = {\n                allOf: schemaIds.map(function (schemaId) { return ({ $ref: schemaId }); })\n            };\n            return this.addSchemaHandle(combinedSchemaId, combinedSchema);\n        }\n    };\n    return JSONSchemaService;\n}());\nexport { JSONSchemaService };\nfunction toDisplayString(url) {\n    try {\n        var uri = URI.parse(url);\n        if (uri.scheme === 'file') {\n            return uri.fsPath;\n        }\n    }\n    catch (e) {\n        // ignore\n    }\n    return url;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { UnresolvedSchema } from './jsonSchemaService.js';\nimport { ErrorCode, Diagnostic, DiagnosticSeverity, Range } from '../jsonLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nimport { isBoolean } from '../utils/objects.js';\nvar localize = nls.loadMessageBundle();\nvar JSONValidation = /** @class */ (function () {\n    function JSONValidation(jsonSchemaService, promiseConstructor) {\n        this.jsonSchemaService = jsonSchemaService;\n        this.promise = promiseConstructor;\n        this.validationEnabled = true;\n    }\n    JSONValidation.prototype.configure = function (raw) {\n        if (raw) {\n            this.validationEnabled = raw.validate;\n            this.commentSeverity = raw.allowComments ? void 0 : DiagnosticSeverity.Error;\n        }\n    };\n    JSONValidation.prototype.doValidation = function (textDocument, jsonDocument, documentSettings, schema) {\n        var _this = this;\n        if (!this.validationEnabled) {\n            return this.promise.resolve([]);\n        }\n        var diagnostics = [];\n        var added = {};\n        var addProblem = function (problem) {\n            // remove duplicated messages\n            var signature = problem.range.start.line + ' ' + problem.range.start.character + ' ' + problem.message;\n            if (!added[signature]) {\n                added[signature] = true;\n                diagnostics.push(problem);\n            }\n        };\n        var getDiagnostics = function (schema) {\n            var trailingCommaSeverity = documentSettings ? toDiagnosticSeverity(documentSettings.trailingCommas) : DiagnosticSeverity.Error;\n            var commentSeverity = documentSettings ? toDiagnosticSeverity(documentSettings.comments) : _this.commentSeverity;\n            if (schema) {\n                if (schema.errors.length && jsonDocument.root) {\n                    var astRoot = jsonDocument.root;\n                    var property = astRoot.type === 'object' ? astRoot.properties[0] : null;\n                    if (property && property.keyNode.value === '$schema') {\n                        var node = property.valueNode || property;\n                        var range = Range.create(textDocument.positionAt(node.offset), textDocument.positionAt(node.offset + node.length));\n                        addProblem(Diagnostic.create(range, schema.errors[0], DiagnosticSeverity.Warning, ErrorCode.SchemaResolveError));\n                    }\n                    else {\n                        var range = Range.create(textDocument.positionAt(astRoot.offset), textDocument.positionAt(astRoot.offset + 1));\n                        addProblem(Diagnostic.create(range, schema.errors[0], DiagnosticSeverity.Warning, ErrorCode.SchemaResolveError));\n                    }\n                }\n                else {\n                    var semanticErrors = jsonDocument.validate(textDocument, schema.schema);\n                    if (semanticErrors) {\n                        semanticErrors.forEach(addProblem);\n                    }\n                }\n                if (schemaAllowsComments(schema.schema)) {\n                    commentSeverity = void 0;\n                }\n                if (schemaAllowsTrailingCommas(schema.schema)) {\n                    trailingCommaSeverity = void 0;\n                }\n            }\n            for (var _i = 0, _a = jsonDocument.syntaxErrors; _i < _a.length; _i++) {\n                var p = _a[_i];\n                if (p.code === ErrorCode.TrailingComma) {\n                    if (typeof trailingCommaSeverity !== 'number') {\n                        continue;\n                    }\n                    p.severity = trailingCommaSeverity;\n                }\n                addProblem(p);\n            }\n            if (typeof commentSeverity === 'number') {\n                var message_1 = localize('InvalidCommentToken', 'Comments are not permitted in JSON.');\n                jsonDocument.comments.forEach(function (c) {\n                    addProblem(Diagnostic.create(c, message_1, commentSeverity, ErrorCode.CommentNotPermitted));\n                });\n            }\n            return diagnostics;\n        };\n        if (schema) {\n            var id = schema.id || ('schemaservice://untitled/' + idCounter++);\n            return this.jsonSchemaService.resolveSchemaContent(new UnresolvedSchema(schema), id, {}).then(function (resolvedSchema) {\n                return getDiagnostics(resolvedSchema);\n            });\n        }\n        return this.jsonSchemaService.getSchemaForResource(textDocument.uri, jsonDocument).then(function (schema) {\n            return getDiagnostics(schema);\n        });\n    };\n    return JSONValidation;\n}());\nexport { JSONValidation };\nvar idCounter = 0;\nfunction schemaAllowsComments(schemaRef) {\n    if (schemaRef && typeof schemaRef === 'object') {\n        if (isBoolean(schemaRef.allowComments)) {\n            return schemaRef.allowComments;\n        }\n        if (schemaRef.allOf) {\n            for (var _i = 0, _a = schemaRef.allOf; _i < _a.length; _i++) {\n                var schema = _a[_i];\n                var allow = schemaAllowsComments(schema);\n                if (isBoolean(allow)) {\n                    return allow;\n                }\n            }\n        }\n    }\n    return undefined;\n}\nfunction schemaAllowsTrailingCommas(schemaRef) {\n    if (schemaRef && typeof schemaRef === 'object') {\n        if (isBoolean(schemaRef.allowTrailingCommas)) {\n            return schemaRef.allowTrailingCommas;\n        }\n        if (isBoolean(schemaRef['allowsTrailingCommas'])) { // deprecated\n            return schemaRef['allowsTrailingCommas'];\n        }\n        if (schemaRef.allOf) {\n            for (var _i = 0, _a = schemaRef.allOf; _i < _a.length; _i++) {\n                var schema = _a[_i];\n                var allow = schemaAllowsTrailingCommas(schema);\n                if (isBoolean(allow)) {\n                    return allow;\n                }\n            }\n        }\n    }\n    return undefined;\n}\nfunction toDiagnosticSeverity(severityLevel) {\n    switch (severityLevel) {\n        case 'error': return DiagnosticSeverity.Error;\n        case 'warning': return DiagnosticSeverity.Warning;\n        case 'ignore': return void 0;\n    }\n    return void 0;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar Digit0 = 48;\nvar Digit9 = 57;\nvar A = 65;\nvar a = 97;\nvar f = 102;\nexport function hexDigit(charCode) {\n    if (charCode < Digit0) {\n        return 0;\n    }\n    if (charCode <= Digit9) {\n        return charCode - Digit0;\n    }\n    if (charCode < a) {\n        charCode += (a - A);\n    }\n    if (charCode >= a && charCode <= f) {\n        return charCode - a + 10;\n    }\n    return 0;\n}\nexport function colorFromHex(text) {\n    if (text[0] !== '#') {\n        return null;\n    }\n    switch (text.length) {\n        case 4:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x11) / 255.0,\n                green: (hexDigit(text.charCodeAt(2)) * 0x11) / 255.0,\n                blue: (hexDigit(text.charCodeAt(3)) * 0x11) / 255.0,\n                alpha: 1\n            };\n        case 5:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x11) / 255.0,\n                green: (hexDigit(text.charCodeAt(2)) * 0x11) / 255.0,\n                blue: (hexDigit(text.charCodeAt(3)) * 0x11) / 255.0,\n                alpha: (hexDigit(text.charCodeAt(4)) * 0x11) / 255.0,\n            };\n        case 7:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x10 + hexDigit(text.charCodeAt(2))) / 255.0,\n                green: (hexDigit(text.charCodeAt(3)) * 0x10 + hexDigit(text.charCodeAt(4))) / 255.0,\n                blue: (hexDigit(text.charCodeAt(5)) * 0x10 + hexDigit(text.charCodeAt(6))) / 255.0,\n                alpha: 1\n            };\n        case 9:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x10 + hexDigit(text.charCodeAt(2))) / 255.0,\n                green: (hexDigit(text.charCodeAt(3)) * 0x10 + hexDigit(text.charCodeAt(4))) / 255.0,\n                blue: (hexDigit(text.charCodeAt(5)) * 0x10 + hexDigit(text.charCodeAt(6))) / 255.0,\n                alpha: (hexDigit(text.charCodeAt(7)) * 0x10 + hexDigit(text.charCodeAt(8))) / 255.0\n            };\n    }\n    return null;\n}\nexport function colorFrom256RGB(red, green, blue, alpha) {\n    if (alpha === void 0) { alpha = 1.0; }\n    return {\n        red: red / 255.0,\n        green: green / 255.0,\n        blue: blue / 255.0,\n        alpha: alpha\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser.js';\nimport * as Strings from '../utils/strings.js';\nimport { colorFromHex } from '../utils/colors.js';\nimport { Range, TextEdit, SymbolKind, Location } from \"../jsonLanguageTypes.js\";\nvar JSONDocumentSymbols = /** @class */ (function () {\n    function JSONDocumentSymbols(schemaService) {\n        this.schemaService = schemaService;\n    }\n    JSONDocumentSymbols.prototype.findDocumentSymbols = function (document, doc, context) {\n        var _this = this;\n        if (context === void 0) { context = { resultLimit: Number.MAX_VALUE }; }\n        var root = doc.root;\n        if (!root) {\n            return null;\n        }\n        var limit = context.resultLimit;\n        // special handling for key bindings\n        var resourceString = document.uri;\n        if ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\n            if (root.type === 'array') {\n                var result_1 = [];\n                for (var _i = 0, _a = root.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (item.type === 'object') {\n                        for (var _b = 0, _c = item.properties; _b < _c.length; _b++) {\n                            var property = _c[_b];\n                            if (property.keyNode.value === 'key' && property.valueNode) {\n                                var location = Location.create(document.uri, getRange(document, item));\n                                result_1.push({ name: Parser.getNodeValue(property.valueNode), kind: SymbolKind.Function, location: location });\n                                limit--;\n                                if (limit <= 0) {\n                                    if (context && context.onResultLimitExceeded) {\n                                        context.onResultLimitExceeded(resourceString);\n                                    }\n                                    return result_1;\n                                }\n                            }\n                        }\n                    }\n                }\n                return result_1;\n            }\n        }\n        var toVisit = [\n            { node: root, containerName: '' }\n        ];\n        var nextToVisit = 0;\n        var limitExceeded = false;\n        var result = [];\n        var collectOutlineEntries = function (node, containerName) {\n            if (node.type === 'array') {\n                node.items.forEach(function (node) {\n                    if (node) {\n                        toVisit.push({ node: node, containerName: containerName });\n                    }\n                });\n            }\n            else if (node.type === 'object') {\n                node.properties.forEach(function (property) {\n                    var valueNode = property.valueNode;\n                    if (valueNode) {\n                        if (limit > 0) {\n                            limit--;\n                            var location = Location.create(document.uri, getRange(document, property));\n                            var childContainerName = containerName ? containerName + '.' + property.keyNode.value : property.keyNode.value;\n                            result.push({ name: _this.getKeyLabel(property), kind: _this.getSymbolKind(valueNode.type), location: location, containerName: containerName });\n                            toVisit.push({ node: valueNode, containerName: childContainerName });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n        };\n        // breath first traversal\n        while (nextToVisit < toVisit.length) {\n            var next = toVisit[nextToVisit++];\n            collectOutlineEntries(next.node, next.containerName);\n        }\n        if (limitExceeded && context && context.onResultLimitExceeded) {\n            context.onResultLimitExceeded(resourceString);\n        }\n        return result;\n    };\n    JSONDocumentSymbols.prototype.findDocumentSymbols2 = function (document, doc, context) {\n        var _this = this;\n        if (context === void 0) { context = { resultLimit: Number.MAX_VALUE }; }\n        var root = doc.root;\n        if (!root) {\n            return null;\n        }\n        var limit = context.resultLimit;\n        // special handling for key bindings\n        var resourceString = document.uri;\n        if ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\n            if (root.type === 'array') {\n                var result_2 = [];\n                for (var _i = 0, _a = root.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (item.type === 'object') {\n                        for (var _b = 0, _c = item.properties; _b < _c.length; _b++) {\n                            var property = _c[_b];\n                            if (property.keyNode.value === 'key' && property.valueNode) {\n                                var range = getRange(document, item);\n                                var selectionRange = getRange(document, property.keyNode);\n                                result_2.push({ name: Parser.getNodeValue(property.valueNode), kind: SymbolKind.Function, range: range, selectionRange: selectionRange });\n                                limit--;\n                                if (limit <= 0) {\n                                    if (context && context.onResultLimitExceeded) {\n                                        context.onResultLimitExceeded(resourceString);\n                                    }\n                                    return result_2;\n                                }\n                            }\n                        }\n                    }\n                }\n                return result_2;\n            }\n        }\n        var result = [];\n        var toVisit = [\n            { node: root, result: result }\n        ];\n        var nextToVisit = 0;\n        var limitExceeded = false;\n        var collectOutlineEntries = function (node, result) {\n            if (node.type === 'array') {\n                node.items.forEach(function (node, index) {\n                    if (node) {\n                        if (limit > 0) {\n                            limit--;\n                            var range = getRange(document, node);\n                            var selectionRange = range;\n                            var name = String(index);\n                            var symbol = { name: name, kind: _this.getSymbolKind(node.type), range: range, selectionRange: selectionRange, children: [] };\n                            result.push(symbol);\n                            toVisit.push({ result: symbol.children, node: node });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n            else if (node.type === 'object') {\n                node.properties.forEach(function (property) {\n                    var valueNode = property.valueNode;\n                    if (valueNode) {\n                        if (limit > 0) {\n                            limit--;\n                            var range = getRange(document, property);\n                            var selectionRange = getRange(document, property.keyNode);\n                            var symbol = { name: _this.getKeyLabel(property), kind: _this.getSymbolKind(valueNode.type), range: range, selectionRange: selectionRange, children: [] };\n                            result.push(symbol);\n                            toVisit.push({ result: symbol.children, node: valueNode });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n        };\n        // breath first traversal\n        while (nextToVisit < toVisit.length) {\n            var next = toVisit[nextToVisit++];\n            collectOutlineEntries(next.node, next.result);\n        }\n        if (limitExceeded && context && context.onResultLimitExceeded) {\n            context.onResultLimitExceeded(resourceString);\n        }\n        return result;\n    };\n    JSONDocumentSymbols.prototype.getSymbolKind = function (nodeType) {\n        switch (nodeType) {\n            case 'object':\n                return SymbolKind.Module;\n            case 'string':\n                return SymbolKind.String;\n            case 'number':\n                return SymbolKind.Number;\n            case 'array':\n                return SymbolKind.Array;\n            case 'boolean':\n                return SymbolKind.Boolean;\n            default: // 'null'\n                return SymbolKind.Variable;\n        }\n    };\n    JSONDocumentSymbols.prototype.getKeyLabel = function (property) {\n        var name = property.keyNode.value;\n        if (name) {\n            name = name.replace(/[\\n]/g, '↵');\n        }\n        if (name && name.trim()) {\n            return name;\n        }\n        return \"\\\"\" + name + \"\\\"\";\n    };\n    JSONDocumentSymbols.prototype.findDocumentColors = function (document, doc, context) {\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            var result = [];\n            if (schema) {\n                var limit = context && typeof context.resultLimit === 'number' ? context.resultLimit : Number.MAX_VALUE;\n                var matchingSchemas = doc.getMatchingSchemas(schema.schema);\n                var visitedNode = {};\n                for (var _i = 0, matchingSchemas_1 = matchingSchemas; _i < matchingSchemas_1.length; _i++) {\n                    var s = matchingSchemas_1[_i];\n                    if (!s.inverted && s.schema && (s.schema.format === 'color' || s.schema.format === 'color-hex') && s.node && s.node.type === 'string') {\n                        var nodeId = String(s.node.offset);\n                        if (!visitedNode[nodeId]) {\n                            var color = colorFromHex(Parser.getNodeValue(s.node));\n                            if (color) {\n                                var range = getRange(document, s.node);\n                                result.push({ color: color, range: range });\n                            }\n                            visitedNode[nodeId] = true;\n                            limit--;\n                            if (limit <= 0) {\n                                if (context && context.onResultLimitExceeded) {\n                                    context.onResultLimitExceeded(document.uri);\n                                }\n                                return result;\n                            }\n                        }\n                    }\n                }\n            }\n            return result;\n        });\n    };\n    JSONDocumentSymbols.prototype.getColorPresentations = function (document, doc, color, range) {\n        var result = [];\n        var red256 = Math.round(color.red * 255), green256 = Math.round(color.green * 255), blue256 = Math.round(color.blue * 255);\n        function toTwoDigitHex(n) {\n            var r = n.toString(16);\n            return r.length !== 2 ? '0' + r : r;\n        }\n        var label;\n        if (color.alpha === 1) {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256);\n        }\n        else {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256) + toTwoDigitHex(Math.round(color.alpha * 255));\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, JSON.stringify(label)) });\n        return result;\n    };\n    return JSONDocumentSymbols;\n}());\nexport { JSONDocumentSymbols };\nfunction getRange(document, node) {\n    return Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nexport var schemaContributions = {\n    schemaAssociations: {},\n    schemas: {\n        // bundle the schema-schema to include (localized) descriptions\n        'http://json-schema.org/draft-04/schema#': {\n            'title': localize('schema.json', 'Describes a JSON file using a schema. See json-schema.org for more info.'),\n            '$schema': 'http://json-schema.org/draft-04/schema#',\n            'definitions': {\n                'schemaArray': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'items': {\n                        '$ref': '#'\n                    }\n                },\n                'positiveInteger': {\n                    'type': 'integer',\n                    'minimum': 0\n                },\n                'positiveIntegerDefault0': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        },\n                        {\n                            'default': 0\n                        }\n                    ]\n                },\n                'simpleTypes': {\n                    'type': 'string',\n                    'enum': [\n                        'array',\n                        'boolean',\n                        'integer',\n                        'null',\n                        'number',\n                        'object',\n                        'string'\n                    ]\n                },\n                'stringArray': {\n                    'type': 'array',\n                    'items': {\n                        'type': 'string'\n                    },\n                    'minItems': 1,\n                    'uniqueItems': true\n                }\n            },\n            'type': 'object',\n            'properties': {\n                'id': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                '$schema': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                'title': {\n                    'type': 'string'\n                },\n                'description': {\n                    'type': 'string'\n                },\n                'default': {},\n                'multipleOf': {\n                    'type': 'number',\n                    'minimum': 0,\n                    'exclusiveMinimum': true\n                },\n                'maximum': {\n                    'type': 'number'\n                },\n                'exclusiveMaximum': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'minimum': {\n                    'type': 'number'\n                },\n                'exclusiveMinimum': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'maxLength': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minLength': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'pattern': {\n                    'type': 'string',\n                    'format': 'regex'\n                },\n                'additionalItems': {\n                    'anyOf': [\n                        {\n                            'type': 'boolean'\n                        },\n                        {\n                            '$ref': '#'\n                        }\n                    ],\n                    'default': {}\n                },\n                'items': {\n                    'anyOf': [\n                        {\n                            '$ref': '#'\n                        },\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ],\n                    'default': {}\n                },\n                'maxItems': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minItems': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'uniqueItems': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'maxProperties': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minProperties': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'required': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/stringArray'\n                        }\n                    ]\n                },\n                'additionalProperties': {\n                    'anyOf': [\n                        {\n                            'type': 'boolean'\n                        },\n                        {\n                            '$ref': '#'\n                        }\n                    ],\n                    'default': {}\n                },\n                'definitions': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'properties': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'patternProperties': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'dependencies': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        'anyOf': [\n                            {\n                                '$ref': '#'\n                            },\n                            {\n                                '$ref': '#/definitions/stringArray'\n                            }\n                        ]\n                    }\n                },\n                'enum': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'uniqueItems': true\n                },\n                'type': {\n                    'anyOf': [\n                        {\n                            '$ref': '#/definitions/simpleTypes'\n                        },\n                        {\n                            'type': 'array',\n                            'items': {\n                                '$ref': '#/definitions/simpleTypes'\n                            },\n                            'minItems': 1,\n                            'uniqueItems': true\n                        }\n                    ]\n                },\n                'format': {\n                    'anyOf': [\n                        {\n                            'type': 'string',\n                            'enum': [\n                                'date-time',\n                                'uri',\n                                'email',\n                                'hostname',\n                                'ipv4',\n                                'ipv6',\n                                'regex'\n                            ]\n                        },\n                        {\n                            'type': 'string'\n                        }\n                    ]\n                },\n                'allOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'anyOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'oneOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'not': {\n                    'allOf': [\n                        {\n                            '$ref': '#'\n                        }\n                    ]\n                }\n            },\n            'dependencies': {\n                'exclusiveMaximum': [\n                    'maximum'\n                ],\n                'exclusiveMinimum': [\n                    'minimum'\n                ]\n            },\n            'default': {}\n        },\n        'http://json-schema.org/draft-07/schema#': {\n            'title': localize('schema.json', 'Describes a JSON file using a schema. See json-schema.org for more info.'),\n            'definitions': {\n                'schemaArray': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'items': { '$ref': '#' }\n                },\n                'nonNegativeInteger': {\n                    'type': 'integer',\n                    'minimum': 0\n                },\n                'nonNegativeIntegerDefault0': {\n                    'allOf': [\n                        { '$ref': '#/definitions/nonNegativeInteger' },\n                        { 'default': 0 }\n                    ]\n                },\n                'simpleTypes': {\n                    'enum': [\n                        'array',\n                        'boolean',\n                        'integer',\n                        'null',\n                        'number',\n                        'object',\n                        'string'\n                    ]\n                },\n                'stringArray': {\n                    'type': 'array',\n                    'items': { 'type': 'string' },\n                    'uniqueItems': true,\n                    'default': []\n                }\n            },\n            'type': ['object', 'boolean'],\n            'properties': {\n                '$id': {\n                    'type': 'string',\n                    'format': 'uri-reference'\n                },\n                '$schema': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                '$ref': {\n                    'type': 'string',\n                    'format': 'uri-reference'\n                },\n                '$comment': {\n                    'type': 'string'\n                },\n                'title': {\n                    'type': 'string'\n                },\n                'description': {\n                    'type': 'string'\n                },\n                'default': true,\n                'readOnly': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'examples': {\n                    'type': 'array',\n                    'items': true\n                },\n                'multipleOf': {\n                    'type': 'number',\n                    'exclusiveMinimum': 0\n                },\n                'maximum': {\n                    'type': 'number'\n                },\n                'exclusiveMaximum': {\n                    'type': 'number'\n                },\n                'minimum': {\n                    'type': 'number'\n                },\n                'exclusiveMinimum': {\n                    'type': 'number'\n                },\n                'maxLength': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minLength': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'pattern': {\n                    'type': 'string',\n                    'format': 'regex'\n                },\n                'additionalItems': { '$ref': '#' },\n                'items': {\n                    'anyOf': [\n                        { '$ref': '#' },\n                        { '$ref': '#/definitions/schemaArray' }\n                    ],\n                    'default': true\n                },\n                'maxItems': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minItems': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'uniqueItems': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'contains': { '$ref': '#' },\n                'maxProperties': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minProperties': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'required': { '$ref': '#/definitions/stringArray' },\n                'additionalProperties': { '$ref': '#' },\n                'definitions': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {}\n                },\n                'properties': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {}\n                },\n                'patternProperties': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'propertyNames': { 'format': 'regex' },\n                    'default': {}\n                },\n                'dependencies': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        'anyOf': [\n                            { '$ref': '#' },\n                            { '$ref': '#/definitions/stringArray' }\n                        ]\n                    }\n                },\n                'propertyNames': { '$ref': '#' },\n                'const': true,\n                'enum': {\n                    'type': 'array',\n                    'items': true,\n                    'minItems': 1,\n                    'uniqueItems': true\n                },\n                'type': {\n                    'anyOf': [\n                        { '$ref': '#/definitions/simpleTypes' },\n                        {\n                            'type': 'array',\n                            'items': { '$ref': '#/definitions/simpleTypes' },\n                            'minItems': 1,\n                            'uniqueItems': true\n                        }\n                    ]\n                },\n                'format': { 'type': 'string' },\n                'contentMediaType': { 'type': 'string' },\n                'contentEncoding': { 'type': 'string' },\n                'if': { '$ref': '#' },\n                'then': { '$ref': '#' },\n                'else': { '$ref': '#' },\n                'allOf': { '$ref': '#/definitions/schemaArray' },\n                'anyOf': { '$ref': '#/definitions/schemaArray' },\n                'oneOf': { '$ref': '#/definitions/schemaArray' },\n                'not': { '$ref': '#' }\n            },\n            'default': true\n        }\n    }\n};\nvar descriptions = {\n    id: localize('schema.json.id', \"A unique identifier for the schema.\"),\n    $schema: localize('schema.json.$schema', \"The schema to verify this document against.\"),\n    title: localize('schema.json.title', \"A descriptive title of the element.\"),\n    description: localize('schema.json.description', \"A long description of the element. Used in hover menus and suggestions.\"),\n    default: localize('schema.json.default', \"A default value. Used by suggestions.\"),\n    multipleOf: localize('schema.json.multipleOf', \"A number that should cleanly divide the current value (i.e. have no remainder).\"),\n    maximum: localize('schema.json.maximum', \"The maximum numerical value, inclusive by default.\"),\n    exclusiveMaximum: localize('schema.json.exclusiveMaximum', \"Makes the maximum property exclusive.\"),\n    minimum: localize('schema.json.minimum', \"The minimum numerical value, inclusive by default.\"),\n    exclusiveMinimum: localize('schema.json.exclusiveMininum', \"Makes the minimum property exclusive.\"),\n    maxLength: localize('schema.json.maxLength', \"The maximum length of a string.\"),\n    minLength: localize('schema.json.minLength', \"The minimum length of a string.\"),\n    pattern: localize('schema.json.pattern', \"A regular expression to match the string against. It is not implicitly anchored.\"),\n    additionalItems: localize('schema.json.additionalItems', \"For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail.\"),\n    items: localize('schema.json.items', \"For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on.\"),\n    maxItems: localize('schema.json.maxItems', \"The maximum number of items that can be inside an array. Inclusive.\"),\n    minItems: localize('schema.json.minItems', \"The minimum number of items that can be inside an array. Inclusive.\"),\n    uniqueItems: localize('schema.json.uniqueItems', \"If all of the items in the array must be unique. Defaults to false.\"),\n    maxProperties: localize('schema.json.maxProperties', \"The maximum number of properties an object can have. Inclusive.\"),\n    minProperties: localize('schema.json.minProperties', \"The minimum number of properties an object can have. Inclusive.\"),\n    required: localize('schema.json.required', \"An array of strings that lists the names of all properties required on this object.\"),\n    additionalProperties: localize('schema.json.additionalProperties', \"Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail.\"),\n    definitions: localize('schema.json.definitions', \"Not used for validation. Place subschemas here that you wish to reference inline with $ref.\"),\n    properties: localize('schema.json.properties', \"A map of property names to schemas for each property.\"),\n    patternProperties: localize('schema.json.patternProperties', \"A map of regular expressions on property names to schemas for matching properties.\"),\n    dependencies: localize('schema.json.dependencies', \"A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object.\"),\n    enum: localize('schema.json.enum', \"The set of literal values that are valid.\"),\n    type: localize('schema.json.type', \"Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types.\"),\n    format: localize('schema.json.format', \"Describes the format expected for the value.\"),\n    allOf: localize('schema.json.allOf', \"An array of schemas, all of which must match.\"),\n    anyOf: localize('schema.json.anyOf', \"An array of schemas, where at least one must match.\"),\n    oneOf: localize('schema.json.oneOf', \"An array of schemas, exactly one of which must match.\"),\n    not: localize('schema.json.not', \"A schema which must not match.\"),\n    $id: localize('schema.json.$id', \"A unique identifier for the schema.\"),\n    $ref: localize('schema.json.$ref', \"Reference a definition hosted on any location.\"),\n    $comment: localize('schema.json.$comment', \"Comments from schema authors to readers or maintainers of the schema.\"),\n    readOnly: localize('schema.json.readOnly', \"Indicates that the value of the instance is managed exclusively by the owning authority.\"),\n    examples: localize('schema.json.examples', \"Sample JSON values associated with a particular schema, for the purpose of illustrating usage.\"),\n    contains: localize('schema.json.contains', \"An array instance is valid against \\\"contains\\\" if at least one of its elements is valid against the given schema.\"),\n    propertyNames: localize('schema.json.propertyNames', \"If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema.\"),\n    const: localize('schema.json.const', \"An instance validates successfully against this keyword if its value is equal to the value of the keyword.\"),\n    contentMediaType: localize('schema.json.contentMediaType', \"Describes the media type of a string property.\"),\n    contentEncoding: localize('schema.json.contentEncoding', \"Describes the content encoding of a string property.\"),\n    if: localize('schema.json.if', \"The validation outcome of the \\\"if\\\" subschema controls which of the \\\"then\\\" or \\\"else\\\" keywords are evaluated.\"),\n    then: localize('schema.json.then', \"The \\\"if\\\" subschema is used for validation when the \\\"if\\\" subschema succeeds.\"),\n    else: localize('schema.json.else', \"The \\\"else\\\" subschema is used for validation when the \\\"if\\\" subschema fails.\")\n};\nfor (var schemaName in schemaContributions.schemas) {\n    var schema = schemaContributions.schemas[schemaName];\n    for (var property in schema.properties) {\n        var propertyObject = schema.properties[property];\n        if (propertyObject === true) {\n            propertyObject = schema.properties[property] = {};\n        }\n        var description = descriptions[property];\n        if (description) {\n            propertyObject['description'] = description;\n        }\n        else {\n            console.log(property + \": localize('schema.json.\" + property + \"', \\\"\\\")\");\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createScanner } from './../../jsonc-parser/main.js';\nimport { FoldingRangeKind, Position } from '../jsonLanguageTypes.js';\nexport function getFoldingRanges(document, context) {\n    var ranges = [];\n    var nestingLevels = [];\n    var stack = [];\n    var prevStart = -1;\n    var scanner = createScanner(document.getText(), false);\n    var token = scanner.scan();\n    function addRange(range) {\n        ranges.push(range);\n        nestingLevels.push(stack.length);\n    }\n    while (token !== 17 /* EOF */) {\n        switch (token) {\n            case 1 /* OpenBraceToken */:\n            case 3 /* OpenBracketToken */: {\n                var startLine = document.positionAt(scanner.getTokenOffset()).line;\n                var range = { startLine: startLine, endLine: startLine, kind: token === 1 /* OpenBraceToken */ ? 'object' : 'array' };\n                stack.push(range);\n                break;\n            }\n            case 2 /* CloseBraceToken */:\n            case 4 /* CloseBracketToken */: {\n                var kind = token === 2 /* CloseBraceToken */ ? 'object' : 'array';\n                if (stack.length > 0 && stack[stack.length - 1].kind === kind) {\n                    var range = stack.pop();\n                    var line = document.positionAt(scanner.getTokenOffset()).line;\n                    if (range && line > range.startLine + 1 && prevStart !== range.startLine) {\n                        range.endLine = line - 1;\n                        addRange(range);\n                        prevStart = range.startLine;\n                    }\n                }\n                break;\n            }\n            case 13 /* BlockCommentTrivia */: {\n                var startLine = document.positionAt(scanner.getTokenOffset()).line;\n                var endLine = document.positionAt(scanner.getTokenOffset() + scanner.getTokenLength()).line;\n                if (scanner.getTokenError() === 1 /* UnexpectedEndOfComment */ && startLine + 1 < document.lineCount) {\n                    scanner.setPosition(document.offsetAt(Position.create(startLine + 1, 0)));\n                }\n                else {\n                    if (startLine < endLine) {\n                        addRange({ startLine: startLine, endLine: endLine, kind: FoldingRangeKind.Comment });\n                        prevStart = startLine;\n                    }\n                }\n                break;\n            }\n            case 12 /* LineCommentTrivia */: {\n                var text = document.getText().substr(scanner.getTokenOffset(), scanner.getTokenLength());\n                var m = text.match(/^\\/\\/\\s*#(region\\b)|(endregion\\b)/);\n                if (m) {\n                    var line = document.positionAt(scanner.getTokenOffset()).line;\n                    if (m[1]) { // start pattern match\n                        var range = { startLine: line, endLine: line, kind: FoldingRangeKind.Region };\n                        stack.push(range);\n                    }\n                    else {\n                        var i = stack.length - 1;\n                        while (i >= 0 && stack[i].kind !== FoldingRangeKind.Region) {\n                            i--;\n                        }\n                        if (i >= 0) {\n                            var range = stack[i];\n                            stack.length = i;\n                            if (line > range.startLine && prevStart !== range.startLine) {\n                                range.endLine = line;\n                                addRange(range);\n                                prevStart = range.startLine;\n                            }\n                        }\n                    }\n                }\n                break;\n            }\n        }\n        token = scanner.scan();\n    }\n    var rangeLimit = context && context.rangeLimit;\n    if (typeof rangeLimit !== 'number' || ranges.length <= rangeLimit) {\n        return ranges;\n    }\n    if (context && context.onRangeLimitExceeded) {\n        context.onRangeLimitExceeded(document.uri);\n    }\n    var counts = [];\n    for (var _i = 0, nestingLevels_1 = nestingLevels; _i < nestingLevels_1.length; _i++) {\n        var level = nestingLevels_1[_i];\n        if (level < 30) {\n            counts[level] = (counts[level] || 0) + 1;\n        }\n    }\n    var entries = 0;\n    var maxLevel = 0;\n    for (var i = 0; i < counts.length; i++) {\n        var n = counts[i];\n        if (n) {\n            if (n + entries > rangeLimit) {\n                maxLevel = i;\n                break;\n            }\n            entries += n;\n        }\n    }\n    var result = [];\n    for (var i = 0; i < ranges.length; i++) {\n        var level = nestingLevels[i];\n        if (typeof level === 'number') {\n            if (level < maxLevel || (level === maxLevel && entries++ < rangeLimit)) {\n                result.push(ranges[i]);\n            }\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range, SelectionRange } from '../jsonLanguageTypes.js';\nimport { createScanner } from './../../jsonc-parser/main.js';\nexport function getSelectionRanges(document, positions, doc) {\n    function getSelectionRange(position) {\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset, true);\n        var result = [];\n        while (node) {\n            switch (node.type) {\n                case 'string':\n                case 'object':\n                case 'array':\n                    // range without \", [ or {\n                    var cStart = node.offset + 1, cEnd = node.offset + node.length - 1;\n                    if (cStart < cEnd && offset >= cStart && offset <= cEnd) {\n                        result.push(newRange(cStart, cEnd));\n                    }\n                    result.push(newRange(node.offset, node.offset + node.length));\n                    break;\n                case 'number':\n                case 'boolean':\n                case 'null':\n                case 'property':\n                    result.push(newRange(node.offset, node.offset + node.length));\n                    break;\n            }\n            if (node.type === 'property' || node.parent && node.parent.type === 'array') {\n                var afterCommaOffset = getOffsetAfterNextToken(node.offset + node.length, 5 /* CommaToken */);\n                if (afterCommaOffset !== -1) {\n                    result.push(newRange(node.offset, afterCommaOffset));\n                }\n            }\n            node = node.parent;\n        }\n        var current = undefined;\n        for (var index = result.length - 1; index >= 0; index--) {\n            current = SelectionRange.create(result[index], current);\n        }\n        if (!current) {\n            current = SelectionRange.create(Range.create(position, position));\n        }\n        return current;\n    }\n    function newRange(start, end) {\n        return Range.create(document.positionAt(start), document.positionAt(end));\n    }\n    var scanner = createScanner(document.getText(), true);\n    function getOffsetAfterNextToken(offset, expectedToken) {\n        scanner.setPosition(offset);\n        var token = scanner.scan();\n        if (token === expectedToken) {\n            return scanner.getTokenOffset() + scanner.getTokenLength();\n        }\n        return -1;\n    }\n    return positions.map(getSelectionRange);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { JSONCompletion } from './services/jsonCompletion.js';\nimport { JSONHover } from './services/jsonHover.js';\nimport { JSONValidation } from './services/jsonValidation.js';\nimport { JSONDocumentSymbols } from './services/jsonDocumentSymbols.js';\nimport { parse as parseJSON, newJSONDocument } from './parser/jsonParser.js';\nimport { schemaContributions } from './services/configuration.js';\nimport { JSONSchemaService } from './services/jsonSchemaService.js';\nimport { getFoldingRanges } from './services/jsonFolding.js';\nimport { getSelectionRanges } from './services/jsonSelectionRanges.js';\nimport { format as formatJSON } from './../jsonc-parser/main.js';\nimport { Range, TextEdit } from './jsonLanguageTypes.js';\nexport * from './jsonLanguageTypes.js';\nexport function getLanguageService(params) {\n    var promise = params.promiseConstructor || Promise;\n    var jsonSchemaService = new JSONSchemaService(params.schemaRequestService, params.workspaceContext, promise);\n    jsonSchemaService.setSchemaContributions(schemaContributions);\n    var jsonCompletion = new JSONCompletion(jsonSchemaService, params.contributions, promise, params.clientCapabilities);\n    var jsonHover = new JSONHover(jsonSchemaService, params.contributions, promise);\n    var jsonDocumentSymbols = new JSONDocumentSymbols(jsonSchemaService);\n    var jsonValidation = new JSONValidation(jsonSchemaService, promise);\n    return {\n        configure: function (settings) {\n            jsonSchemaService.clearExternalSchemas();\n            if (settings.schemas) {\n                settings.schemas.forEach(function (settings) {\n                    jsonSchemaService.registerExternalSchema(settings.uri, settings.fileMatch, settings.schema);\n                });\n            }\n            jsonValidation.configure(settings);\n        },\n        resetSchema: function (uri) { return jsonSchemaService.onResourceChange(uri); },\n        doValidation: jsonValidation.doValidation.bind(jsonValidation),\n        parseJSONDocument: function (document) { return parseJSON(document, { collectComments: true }); },\n        newJSONDocument: function (root, diagnostics) { return newJSONDocument(root, diagnostics); },\n        doResolve: jsonCompletion.doResolve.bind(jsonCompletion),\n        doComplete: jsonCompletion.doComplete.bind(jsonCompletion),\n        findDocumentSymbols: jsonDocumentSymbols.findDocumentSymbols.bind(jsonDocumentSymbols),\n        findDocumentSymbols2: jsonDocumentSymbols.findDocumentSymbols2.bind(jsonDocumentSymbols),\n        findColorSymbols: function (d, s) { return jsonDocumentSymbols.findDocumentColors(d, s).then(function (s) { return s.map(function (s) { return s.range; }); }); },\n        findDocumentColors: jsonDocumentSymbols.findDocumentColors.bind(jsonDocumentSymbols),\n        getColorPresentations: jsonDocumentSymbols.getColorPresentations.bind(jsonDocumentSymbols),\n        doHover: jsonHover.doHover.bind(jsonHover),\n        getFoldingRanges: getFoldingRanges,\n        getSelectionRanges: getSelectionRanges,\n        format: function (d, r, o) {\n            var range = void 0;\n            if (r) {\n                var offset = d.offsetAt(r.start);\n                var length = d.offsetAt(r.end) - offset;\n                range = { offset: offset, length: length };\n            }\n            var options = { tabSize: o ? o.tabSize : 4, insertSpaces: o ? o.insertSpaces : true, eol: '\\n' };\n            return formatJSON(d.getText(), range, options).map(function (e) {\n                return TextEdit.replace(Range.create(d.positionAt(e.offset), d.positionAt(e.offset + e.length)), e.content);\n            });\n        }\n    };\n}\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport * as jsonService from './_deps/vscode-json-languageservice/jsonLanguageService.js';\r\nvar Uri = monaco.Uri;\r\nvar Range = monaco.Range;\r\n// --- diagnostics --- ---\r\nvar DiagnosticsAdapter = /** @class */ (function () {\r\n    function DiagnosticsAdapter(_languageId, _worker, defaults) {\r\n        var _this = this;\r\n        this._languageId = _languageId;\r\n        this._worker = _worker;\r\n        this._disposables = [];\r\n        this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            var modeId = model.getModeId();\r\n            if (modeId !== _this._languageId) {\r\n                return;\r\n            }\r\n            var handle;\r\n            _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model.uri, modeId); }, 500);\r\n            });\r\n            _this._doValidate(model.uri, modeId);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            monaco.editor.setModelMarkers(model, _this._languageId, []);\r\n            var uriStr = model.uri.toString();\r\n            var listener = _this._listener[uriStr];\r\n            if (listener) {\r\n                listener.dispose();\r\n                delete _this._listener[uriStr];\r\n            }\r\n        };\r\n        this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\r\n        this._disposables.push(monaco.editor.onWillDisposeModel(function (model) {\r\n            onModelRemoved(model);\r\n            _this._resetSchema(model.uri);\r\n        }));\r\n        this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n            _this._resetSchema(event.model.uri);\r\n        }));\r\n        this._disposables.push(defaults.onDidChange(function (_) {\r\n            monaco.editor.getModels().forEach(function (model) {\r\n                if (model.getModeId() === _this._languageId) {\r\n                    onModelRemoved(model);\r\n                    onModelAdd(model);\r\n                }\r\n            });\r\n        }));\r\n        this._disposables.push({\r\n            dispose: function () {\r\n                monaco.editor.getModels().forEach(onModelRemoved);\r\n                for (var key in _this._listener) {\r\n                    _this._listener[key].dispose();\r\n                }\r\n            }\r\n        });\r\n        monaco.editor.getModels().forEach(onModelAdd);\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._resetSchema = function (resource) {\r\n        this._worker().then(function (worker) {\r\n            worker.resetSchema(resource.toString());\r\n        });\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\r\n        this._worker(resource).then(function (worker) {\r\n            return worker.doValidation(resource.toString()).then(function (diagnostics) {\r\n                var markers = diagnostics.map(function (d) { return toDiagnostics(resource, d); });\r\n                var model = monaco.editor.getModel(resource);\r\n                if (model && model.getModeId() === languageId) {\r\n                    monaco.editor.setModelMarkers(model, languageId, markers);\r\n                }\r\n            });\r\n        }).then(undefined, function (err) {\r\n            console.error(err);\r\n        });\r\n    };\r\n    return DiagnosticsAdapter;\r\n}());\r\nexport { DiagnosticsAdapter };\r\nfunction toSeverity(lsSeverity) {\r\n    switch (lsSeverity) {\r\n        case jsonService.DiagnosticSeverity.Error: return monaco.MarkerSeverity.Error;\r\n        case jsonService.DiagnosticSeverity.Warning: return monaco.MarkerSeverity.Warning;\r\n        case jsonService.DiagnosticSeverity.Information: return monaco.MarkerSeverity.Info;\r\n        case jsonService.DiagnosticSeverity.Hint: return monaco.MarkerSeverity.Hint;\r\n        default:\r\n            return monaco.MarkerSeverity.Info;\r\n    }\r\n}\r\nfunction toDiagnostics(resource, diag) {\r\n    var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\r\n    return {\r\n        severity: toSeverity(diag.severity),\r\n        startLineNumber: diag.range.start.line + 1,\r\n        startColumn: diag.range.start.character + 1,\r\n        endLineNumber: diag.range.end.line + 1,\r\n        endColumn: diag.range.end.character + 1,\r\n        message: diag.message,\r\n        code: code,\r\n        source: diag.source\r\n    };\r\n}\r\n// --- completion ------\r\nfunction fromPosition(position) {\r\n    if (!position) {\r\n        return void 0;\r\n    }\r\n    return { character: position.column - 1, line: position.lineNumber - 1 };\r\n}\r\nfunction fromRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return { start: { line: range.startLineNumber - 1, character: range.startColumn - 1 }, end: { line: range.endLineNumber - 1, character: range.endColumn - 1 } };\r\n}\r\nfunction toRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return new Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\r\n}\r\nfunction toCompletionItemKind(kind) {\r\n    var mItemKind = monaco.languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case jsonService.CompletionItemKind.Text: return mItemKind.Text;\r\n        case jsonService.CompletionItemKind.Method: return mItemKind.Method;\r\n        case jsonService.CompletionItemKind.Function: return mItemKind.Function;\r\n        case jsonService.CompletionItemKind.Constructor: return mItemKind.Constructor;\r\n        case jsonService.CompletionItemKind.Field: return mItemKind.Field;\r\n        case jsonService.CompletionItemKind.Variable: return mItemKind.Variable;\r\n        case jsonService.CompletionItemKind.Class: return mItemKind.Class;\r\n        case jsonService.CompletionItemKind.Interface: return mItemKind.Interface;\r\n        case jsonService.CompletionItemKind.Module: return mItemKind.Module;\r\n        case jsonService.CompletionItemKind.Property: return mItemKind.Property;\r\n        case jsonService.CompletionItemKind.Unit: return mItemKind.Unit;\r\n        case jsonService.CompletionItemKind.Value: return mItemKind.Value;\r\n        case jsonService.CompletionItemKind.Enum: return mItemKind.Enum;\r\n        case jsonService.CompletionItemKind.Keyword: return mItemKind.Keyword;\r\n        case jsonService.CompletionItemKind.Snippet: return mItemKind.Snippet;\r\n        case jsonService.CompletionItemKind.Color: return mItemKind.Color;\r\n        case jsonService.CompletionItemKind.File: return mItemKind.File;\r\n        case jsonService.CompletionItemKind.Reference: return mItemKind.Reference;\r\n    }\r\n    return mItemKind.Property;\r\n}\r\nfunction fromCompletionItemKind(kind) {\r\n    var mItemKind = monaco.languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case mItemKind.Text: return jsonService.CompletionItemKind.Text;\r\n        case mItemKind.Method: return jsonService.CompletionItemKind.Method;\r\n        case mItemKind.Function: return jsonService.CompletionItemKind.Function;\r\n        case mItemKind.Constructor: return jsonService.CompletionItemKind.Constructor;\r\n        case mItemKind.Field: return jsonService.CompletionItemKind.Field;\r\n        case mItemKind.Variable: return jsonService.CompletionItemKind.Variable;\r\n        case mItemKind.Class: return jsonService.CompletionItemKind.Class;\r\n        case mItemKind.Interface: return jsonService.CompletionItemKind.Interface;\r\n        case mItemKind.Module: return jsonService.CompletionItemKind.Module;\r\n        case mItemKind.Property: return jsonService.CompletionItemKind.Property;\r\n        case mItemKind.Unit: return jsonService.CompletionItemKind.Unit;\r\n        case mItemKind.Value: return jsonService.CompletionItemKind.Value;\r\n        case mItemKind.Enum: return jsonService.CompletionItemKind.Enum;\r\n        case mItemKind.Keyword: return jsonService.CompletionItemKind.Keyword;\r\n        case mItemKind.Snippet: return jsonService.CompletionItemKind.Snippet;\r\n        case mItemKind.Color: return jsonService.CompletionItemKind.Color;\r\n        case mItemKind.File: return jsonService.CompletionItemKind.File;\r\n        case mItemKind.Reference: return jsonService.CompletionItemKind.Reference;\r\n    }\r\n    return jsonService.CompletionItemKind.Property;\r\n}\r\nfunction toTextEdit(textEdit) {\r\n    if (!textEdit) {\r\n        return void 0;\r\n    }\r\n    return {\r\n        range: toRange(textEdit.range),\r\n        text: textEdit.newText\r\n    };\r\n}\r\nvar CompletionAdapter = /** @class */ (function () {\r\n    function CompletionAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return [' ', ':'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.doComplete(resource.toString(), fromPosition(position));\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var wordInfo = model.getWordUntilPosition(position);\r\n            var wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n            var items = info.items.map(function (entry) {\r\n                var item = {\r\n                    label: entry.label,\r\n                    insertText: entry.insertText || entry.label,\r\n                    sortText: entry.sortText,\r\n                    filterText: entry.filterText,\r\n                    documentation: entry.documentation,\r\n                    detail: entry.detail,\r\n                    range: wordRange,\r\n                    kind: toCompletionItemKind(entry.kind),\r\n                };\r\n                if (entry.textEdit) {\r\n                    item.range = toRange(entry.textEdit.range);\r\n                    item.insertText = entry.textEdit.newText;\r\n                }\r\n                if (entry.additionalTextEdits) {\r\n                    item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\r\n                }\r\n                if (entry.insertTextFormat === jsonService.InsertTextFormat.Snippet) {\r\n                    item.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\r\n                }\r\n                return item;\r\n            });\r\n            return {\r\n                isIncomplete: info.isIncomplete,\r\n                suggestions: items\r\n            };\r\n        });\r\n    };\r\n    return CompletionAdapter;\r\n}());\r\nexport { CompletionAdapter };\r\nfunction isMarkupContent(thing) {\r\n    return thing && typeof thing === 'object' && typeof thing.kind === 'string';\r\n}\r\nfunction toMarkdownString(entry) {\r\n    if (typeof entry === 'string') {\r\n        return {\r\n            value: entry\r\n        };\r\n    }\r\n    if (isMarkupContent(entry)) {\r\n        if (entry.kind === 'plaintext') {\r\n            return {\r\n                value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\r\n            };\r\n        }\r\n        return {\r\n            value: entry.value\r\n        };\r\n    }\r\n    return { value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n' };\r\n}\r\nfunction toMarkedStringArray(contents) {\r\n    if (!contents) {\r\n        return void 0;\r\n    }\r\n    if (Array.isArray(contents)) {\r\n        return contents.map(toMarkdownString);\r\n    }\r\n    return [toMarkdownString(contents)];\r\n}\r\n// --- hover ------\r\nvar HoverAdapter = /** @class */ (function () {\r\n    function HoverAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    HoverAdapter.prototype.provideHover = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.doHover(resource.toString(), fromPosition(position));\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            return {\r\n                range: toRange(info.range),\r\n                contents: toMarkedStringArray(info.contents)\r\n            };\r\n        });\r\n    };\r\n    return HoverAdapter;\r\n}());\r\nexport { HoverAdapter };\r\n// --- definition ------\r\nfunction toLocation(location) {\r\n    return {\r\n        uri: Uri.parse(location.uri),\r\n        range: toRange(location.range)\r\n    };\r\n}\r\n// --- document symbols ------\r\nfunction toSymbolKind(kind) {\r\n    var mKind = monaco.languages.SymbolKind;\r\n    switch (kind) {\r\n        case jsonService.SymbolKind.File: return mKind.Array;\r\n        case jsonService.SymbolKind.Module: return mKind.Module;\r\n        case jsonService.SymbolKind.Namespace: return mKind.Namespace;\r\n        case jsonService.SymbolKind.Package: return mKind.Package;\r\n        case jsonService.SymbolKind.Class: return mKind.Class;\r\n        case jsonService.SymbolKind.Method: return mKind.Method;\r\n        case jsonService.SymbolKind.Property: return mKind.Property;\r\n        case jsonService.SymbolKind.Field: return mKind.Field;\r\n        case jsonService.SymbolKind.Constructor: return mKind.Constructor;\r\n        case jsonService.SymbolKind.Enum: return mKind.Enum;\r\n        case jsonService.SymbolKind.Interface: return mKind.Interface;\r\n        case jsonService.SymbolKind.Function: return mKind.Function;\r\n        case jsonService.SymbolKind.Variable: return mKind.Variable;\r\n        case jsonService.SymbolKind.Constant: return mKind.Constant;\r\n        case jsonService.SymbolKind.String: return mKind.String;\r\n        case jsonService.SymbolKind.Number: return mKind.Number;\r\n        case jsonService.SymbolKind.Boolean: return mKind.Boolean;\r\n        case jsonService.SymbolKind.Array: return mKind.Array;\r\n    }\r\n    return mKind.Function;\r\n}\r\nvar DocumentSymbolAdapter = /** @class */ (function () {\r\n    function DocumentSymbolAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.findDocumentSymbols(resource.toString()); }).then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return items.map(function (item) { return ({\r\n                name: item.name,\r\n                detail: '',\r\n                containerName: item.containerName,\r\n                kind: toSymbolKind(item.kind),\r\n                range: toRange(item.location.range),\r\n                selectionRange: toRange(item.location.range),\r\n                tags: []\r\n            }); });\r\n        });\r\n    };\r\n    return DocumentSymbolAdapter;\r\n}());\r\nexport { DocumentSymbolAdapter };\r\nfunction fromFormattingOptions(options) {\r\n    return {\r\n        tabSize: options.tabSize,\r\n        insertSpaces: options.insertSpaces\r\n    };\r\n}\r\nvar DocumentFormattingEditProvider = /** @class */ (function () {\r\n    function DocumentFormattingEditProvider(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentFormattingEditProvider.prototype.provideDocumentFormattingEdits = function (model, options, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.format(resource.toString(), null, fromFormattingOptions(options)).then(function (edits) {\r\n                if (!edits || edits.length === 0) {\r\n                    return;\r\n                }\r\n                return edits.map(toTextEdit);\r\n            });\r\n        });\r\n    };\r\n    return DocumentFormattingEditProvider;\r\n}());\r\nexport { DocumentFormattingEditProvider };\r\nvar DocumentRangeFormattingEditProvider = /** @class */ (function () {\r\n    function DocumentRangeFormattingEditProvider(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentRangeFormattingEditProvider.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.format(resource.toString(), fromRange(range), fromFormattingOptions(options)).then(function (edits) {\r\n                if (!edits || edits.length === 0) {\r\n                    return;\r\n                }\r\n                return edits.map(toTextEdit);\r\n            });\r\n        });\r\n    };\r\n    return DocumentRangeFormattingEditProvider;\r\n}());\r\nexport { DocumentRangeFormattingEditProvider };\r\nvar DocumentColorAdapter = /** @class */ (function () {\r\n    function DocumentColorAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentColorAdapter.prototype.provideDocumentColors = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.findDocumentColors(resource.toString()); }).then(function (infos) {\r\n            if (!infos) {\r\n                return;\r\n            }\r\n            return infos.map(function (item) { return ({\r\n                color: item.color,\r\n                range: toRange(item.range)\r\n            }); });\r\n        });\r\n    };\r\n    DocumentColorAdapter.prototype.provideColorPresentations = function (model, info, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getColorPresentations(resource.toString(), info.color, fromRange(info.range)); }).then(function (presentations) {\r\n            if (!presentations) {\r\n                return;\r\n            }\r\n            return presentations.map(function (presentation) {\r\n                var item = {\r\n                    label: presentation.label,\r\n                };\r\n                if (presentation.textEdit) {\r\n                    item.textEdit = toTextEdit(presentation.textEdit);\r\n                }\r\n                if (presentation.additionalTextEdits) {\r\n                    item.additionalTextEdits = presentation.additionalTextEdits.map(toTextEdit);\r\n                }\r\n                return item;\r\n            });\r\n        });\r\n    };\r\n    return DocumentColorAdapter;\r\n}());\r\nexport { DocumentColorAdapter };\r\nvar FoldingRangeAdapter = /** @class */ (function () {\r\n    function FoldingRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    FoldingRangeAdapter.prototype.provideFoldingRanges = function (model, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getFoldingRanges(resource.toString(), context); }).then(function (ranges) {\r\n            if (!ranges) {\r\n                return;\r\n            }\r\n            return ranges.map(function (range) {\r\n                var result = {\r\n                    start: range.startLine + 1,\r\n                    end: range.endLine + 1\r\n                };\r\n                if (typeof range.kind !== 'undefined') {\r\n                    result.kind = toFoldingRangeKind(range.kind);\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return FoldingRangeAdapter;\r\n}());\r\nexport { FoldingRangeAdapter };\r\nfunction toFoldingRangeKind(kind) {\r\n    switch (kind) {\r\n        case jsonService.FoldingRangeKind.Comment: return monaco.languages.FoldingRangeKind.Comment;\r\n        case jsonService.FoldingRangeKind.Imports: return monaco.languages.FoldingRangeKind.Imports;\r\n        case jsonService.FoldingRangeKind.Region: return monaco.languages.FoldingRangeKind.Region;\r\n    }\r\n    return void 0;\r\n}\r\nvar SelectionRangeAdapter = /** @class */ (function () {\r\n    function SelectionRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    SelectionRangeAdapter.prototype.provideSelectionRanges = function (model, positions, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getSelectionRanges(resource.toString(), positions.map(fromPosition)); }).then(function (selectionRanges) {\r\n            if (!selectionRanges) {\r\n                return;\r\n            }\r\n            return selectionRanges.map(function (selectionRange) {\r\n                var result = [];\r\n                while (selectionRange) {\r\n                    result.push({ range: toRange(selectionRange.range) });\r\n                    selectionRange = selectionRange.parent;\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return SelectionRangeAdapter;\r\n}());\r\nexport { SelectionRangeAdapter };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport * as json from './_deps/jsonc-parser/main.js';\r\nexport function createTokenizationSupport(supportComments) {\r\n    return {\r\n        getInitialState: function () { return new JSONState(null, null, false); },\r\n        tokenize: function (line, state, offsetDelta, stopAtOffset) { return tokenize(supportComments, line, state, offsetDelta, stopAtOffset); }\r\n    };\r\n}\r\nexport var TOKEN_DELIM_OBJECT = 'delimiter.bracket.json';\r\nexport var TOKEN_DELIM_ARRAY = 'delimiter.array.json';\r\nexport var TOKEN_DELIM_COLON = 'delimiter.colon.json';\r\nexport var TOKEN_DELIM_COMMA = 'delimiter.comma.json';\r\nexport var TOKEN_VALUE_BOOLEAN = 'keyword.json';\r\nexport var TOKEN_VALUE_NULL = 'keyword.json';\r\nexport var TOKEN_VALUE_STRING = 'string.value.json';\r\nexport var TOKEN_VALUE_NUMBER = 'number.json';\r\nexport var TOKEN_PROPERTY_NAME = 'string.key.json';\r\nexport var TOKEN_COMMENT_BLOCK = 'comment.block.json';\r\nexport var TOKEN_COMMENT_LINE = 'comment.line.json';\r\nvar JSONState = /** @class */ (function () {\r\n    function JSONState(state, scanError, lastWasColon) {\r\n        this._state = state;\r\n        this.scanError = scanError;\r\n        this.lastWasColon = lastWasColon;\r\n    }\r\n    JSONState.prototype.clone = function () {\r\n        return new JSONState(this._state, this.scanError, this.lastWasColon);\r\n    };\r\n    JSONState.prototype.equals = function (other) {\r\n        if (other === this) {\r\n            return true;\r\n        }\r\n        if (!other || !(other instanceof JSONState)) {\r\n            return false;\r\n        }\r\n        return this.scanError === other.scanError &&\r\n            this.lastWasColon === other.lastWasColon;\r\n    };\r\n    JSONState.prototype.getStateData = function () {\r\n        return this._state;\r\n    };\r\n    JSONState.prototype.setStateData = function (state) {\r\n        this._state = state;\r\n    };\r\n    return JSONState;\r\n}());\r\nfunction tokenize(comments, line, state, offsetDelta, stopAtOffset) {\r\n    if (offsetDelta === void 0) { offsetDelta = 0; }\r\n    // handle multiline strings and block comments\r\n    var numberOfInsertedCharacters = 0, adjustOffset = false;\r\n    switch (state.scanError) {\r\n        case 2 /* UnexpectedEndOfString */:\r\n            line = '\"' + line;\r\n            numberOfInsertedCharacters = 1;\r\n            break;\r\n        case 1 /* UnexpectedEndOfComment */:\r\n            line = '/*' + line;\r\n            numberOfInsertedCharacters = 2;\r\n            break;\r\n    }\r\n    var scanner = json.createScanner(line), kind, ret, lastWasColon = state.lastWasColon;\r\n    ret = {\r\n        tokens: [],\r\n        endState: state.clone()\r\n    };\r\n    while (true) {\r\n        var offset = offsetDelta + scanner.getPosition(), type = '';\r\n        kind = scanner.scan();\r\n        if (kind === 17 /* EOF */) {\r\n            break;\r\n        }\r\n        // Check that the scanner has advanced\r\n        if (offset === offsetDelta + scanner.getPosition()) {\r\n            throw new Error('Scanner did not advance, next 3 characters are: ' + line.substr(scanner.getPosition(), 3));\r\n        }\r\n        // In case we inserted /* or \" character, we need to\r\n        // adjust the offset of all tokens (except the first)\r\n        if (adjustOffset) {\r\n            offset -= numberOfInsertedCharacters;\r\n        }\r\n        adjustOffset = numberOfInsertedCharacters > 0;\r\n        // brackets and type\r\n        switch (kind) {\r\n            case 1 /* OpenBraceToken */:\r\n                type = TOKEN_DELIM_OBJECT;\r\n                lastWasColon = false;\r\n                break;\r\n            case 2 /* CloseBraceToken */:\r\n                type = TOKEN_DELIM_OBJECT;\r\n                lastWasColon = false;\r\n                break;\r\n            case 3 /* OpenBracketToken */:\r\n                type = TOKEN_DELIM_ARRAY;\r\n                lastWasColon = false;\r\n                break;\r\n            case 4 /* CloseBracketToken */:\r\n                type = TOKEN_DELIM_ARRAY;\r\n                lastWasColon = false;\r\n                break;\r\n            case 6 /* ColonToken */:\r\n                type = TOKEN_DELIM_COLON;\r\n                lastWasColon = true;\r\n                break;\r\n            case 5 /* CommaToken */:\r\n                type = TOKEN_DELIM_COMMA;\r\n                lastWasColon = false;\r\n                break;\r\n            case 8 /* TrueKeyword */:\r\n            case 9 /* FalseKeyword */:\r\n                type = TOKEN_VALUE_BOOLEAN;\r\n                lastWasColon = false;\r\n                break;\r\n            case 7 /* NullKeyword */:\r\n                type = TOKEN_VALUE_NULL;\r\n                lastWasColon = false;\r\n                break;\r\n            case 10 /* StringLiteral */:\r\n                type = lastWasColon ? TOKEN_VALUE_STRING : TOKEN_PROPERTY_NAME;\r\n                lastWasColon = false;\r\n                break;\r\n            case 11 /* NumericLiteral */:\r\n                type = TOKEN_VALUE_NUMBER;\r\n                lastWasColon = false;\r\n                break;\r\n        }\r\n        // comments, iff enabled\r\n        if (comments) {\r\n            switch (kind) {\r\n                case 12 /* LineCommentTrivia */:\r\n                    type = TOKEN_COMMENT_LINE;\r\n                    break;\r\n                case 13 /* BlockCommentTrivia */:\r\n                    type = TOKEN_COMMENT_BLOCK;\r\n                    break;\r\n            }\r\n        }\r\n        ret.endState = new JSONState(state.getStateData(), scanner.getTokenError(), lastWasColon);\r\n        ret.tokens.push({\r\n            startIndex: offset,\r\n            scopes: type\r\n        });\r\n    }\r\n    return ret;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nimport { createTokenizationSupport } from './tokenization.js';\r\nexport function setupMode(defaults) {\r\n    var disposables = [];\r\n    var providers = [];\r\n    var client = new WorkerManager(defaults);\r\n    disposables.push(client);\r\n    var worker = function () {\r\n        var uris = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            uris[_i] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, uris);\r\n    };\r\n    function registerProviders() {\r\n        var languageId = defaults.languageId, modeConfiguration = defaults.modeConfiguration;\r\n        disposeAll(providers);\r\n        if (modeConfiguration.documentFormattingEdits) {\r\n            providers.push(monaco.languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker)));\r\n        }\r\n        if (modeConfiguration.documentRangeFormattingEdits) {\r\n            providers.push(monaco.languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker)));\r\n        }\r\n        if (modeConfiguration.completionItems) {\r\n            providers.push(monaco.languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.hovers) {\r\n            providers.push(monaco.languages.registerHoverProvider(languageId, new languageFeatures.HoverAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.documentSymbols) {\r\n            providers.push(monaco.languages.registerDocumentSymbolProvider(languageId, new languageFeatures.DocumentSymbolAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.tokens) {\r\n            providers.push(monaco.languages.setTokensProvider(languageId, createTokenizationSupport(true)));\r\n        }\r\n        if (modeConfiguration.colors) {\r\n            providers.push(monaco.languages.registerColorProvider(languageId, new languageFeatures.DocumentColorAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.foldingRanges) {\r\n            providers.push(monaco.languages.registerFoldingRangeProvider(languageId, new languageFeatures.FoldingRangeAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.diagnostics) {\r\n            providers.push(new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults));\r\n        }\r\n        if (modeConfiguration.selectionRanges) {\r\n            providers.push(monaco.languages.registerSelectionRangeProvider(languageId, new languageFeatures.SelectionRangeAdapter(worker)));\r\n        }\r\n    }\r\n    registerProviders();\r\n    disposables.push(monaco.languages.setLanguageConfiguration(defaults.languageId, richEditConfiguration));\r\n    var modeConfiguration = defaults.modeConfiguration;\r\n    defaults.onDidChange(function (newDefaults) {\r\n        if (newDefaults.modeConfiguration !== modeConfiguration) {\r\n            modeConfiguration = newDefaults.modeConfiguration;\r\n            registerProviders();\r\n        }\r\n    });\r\n    disposables.push(asDisposable(providers));\r\n    return asDisposable(disposables);\r\n}\r\nfunction asDisposable(disposables) {\r\n    return { dispose: function () { return disposeAll(disposables); } };\r\n}\r\nfunction disposeAll(disposables) {\r\n    while (disposables.length) {\r\n        disposables.pop().dispose();\r\n    }\r\n}\r\nvar richEditConfiguration = {\r\n    wordPattern: /(-?\\d*\\.\\d\\w*)|([^\\[\\{\\]\\}\\:\\\"\\,\\s]+)/g,\r\n    comments: {\r\n        lineComment: '//',\r\n        blockComment: ['/*', '*/']\r\n    },\r\n    brackets: [\r\n        ['{', '}'],\r\n        ['[', ']']\r\n    ],\r\n    autoClosingPairs: [\r\n        { open: '{', close: '}', notIn: ['string'] },\r\n        { open: '[', close: ']', notIn: ['string'] },\r\n        { open: '\"', close: '\"', notIn: ['string'] }\r\n    ]\r\n};\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}