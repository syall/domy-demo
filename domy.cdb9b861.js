parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"hmu4":[function(require,module,exports) {
"use strict";function r(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function e(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function t(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scope=exports.printError=exports.isWord=exports.word=exports.isAlphabetic=exports.alphabet=exports.isEqual=exports.isComma=exports.isBracket=exports.isParenthesis=exports.isDoubleOperator=exports.isOperator=exports.isComment=exports.isIrrelevant=exports.ops=exports.order=exports.binaryOperators=exports.unaryOperators=exports.operators=exports.reserved=exports.words=exports.tokenTypes=exports.types=void 0;var o={terop:"ternary:operator",binop:"binary:operator",unop:"unary:operator",paren:"parenthesis:",brack:"parenthesis:",comma:"comma",assign:"assignment",saved:"reserved",name:"word"};exports.types=o;var n={expr:"expression",ternary:"ternary-operation",inv:"function-invocation",block:"block",saved:"reserved",loop:"while-loop",func:"function-declaration",term:"terminal",paren:"parenthesis",id:"identifier",uno:"unary-operation",and:"and",xor:"xor",or:"or",test:"test",varDec:"variable-declaration",varAss:"variable-assignment",std:"std"};exports.tokenTypes=n;var a=["true","false","my","do","while","return","break","continue"];exports.words=a;var s=new Set(a);exports.reserved=s;var i=["?",":","!=","==","|","^","&","!"];exports.operators=i;var p=["!"];exports.unaryOperators=p;var c=["!=","==","|","^","&"];exports.binaryOperators=c;var u=new Map([["?",40],[":",40],["!=",50],["==",50],["|",60],["^",70],["&",80],["!",90]]);exports.order=u;var v=new Set(i);exports.ops=v;var x=function(r){return r<=" "||";"===r};exports.isIrrelevant=x;var l=function(r){return"#"===r};exports.isComment=l;var f=function(r){return v.has(r)};exports.isOperator=f;var d=function(r,e){return("!"===r||"="===r)&&"="===e};exports.isDoubleOperator=d;var h=function(r){return"("===r||")"===r};exports.isParenthesis=h;var m=function(r){return"{"===r||"}"===r};exports.isBracket=m;var y=function(r){return","===r};exports.isComma=y;var b=function(r){return"="===r};exports.isEqual=b;var w=/^[a-zA-Z]$/;exports.alphabet=w;var g=function(r){return r.match(w)};exports.isAlphabetic=g;var k=/^[-_a-zA-Z0-9]$/;exports.word=k;var O=function(r){return r&&r.match(k)};exports.isWord=O;var E=function(r,e,t,o,n,a,s){var i,p;for(console.error("".concat(e," Error: ").concat(t," at row ").concat(o,", col ").concat(n,".")),i=a;i>=0&&"\n"!==r[i];i--);for(p=s;p<r.length&&"\n"!==r[p];p++);var c=r.slice(i+1,p).trimRight(),u=c.trimLeft(),v=n-(c.length-u.length),x="".concat(o,": "),l=" ".repeat(x.length+v-1);console.error("".concat(x).concat(u,"...")),console.error("".concat(l,"^")),console.error("".concat(l).concat(n))};exports.printError=E;var A=function(){function e(t){r(this,e),this.parent=t,this.vars=new Map}return t(e,[{key:"find",value:function(r){for(var e=this;null!==e;){var t=e.vars.get(r);if(void 0!==t)return t;e=e.parent}}},{key:"add",value:function(r,e){this.vars.set(r,e)}},{key:"reassign",value:function(r,e){for(var t=this;null!==t;){if(void 0!==t.vars.get(r))return t.vars.set(r,e);t=t.parent}}}]),e}();exports.Scope=A;
},{}],"XGlt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./utils.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}var n=function(){function r(){t(this,r),this.record=[]}return o(r,[{key:"tokenize",value:function(t){for(var r=0,o=1,n=1,s=[],i=function(e,t,r,o,n,i){return s.push({text:e,type:t,from:r,to:o,row:n,col:i})};r<t.length;){var a=t[r];if((0,e.isIrrelevant)(a))"\n"===a&&(o++,n=0);else if((0,e.isComment)(a)){for(var c=t[r];"\n"!==c;)c=t[++r];r--,n=0}else if((0,e.isDoubleOperator)(a,t[r+1]))i("".concat(a,"="),e.types.binop,r,r+2,o,n),r++,n++;else if((0,e.isOperator)(a)){i(a,"?"===a||":"===a?e.types.terop:"!"===a?e.types.unop:e.types.binop,r,r+1,o,n)}else if((0,e.isEqual)(a))i(a,e.types.assign,r,r+1,o,n);else if((0,e.isParenthesis)(a))i(a,"".concat(e.types.paren).concat("("===a?"left":"right"),r,r+1,o,n);else if((0,e.isBracket)(a))i(a,"".concat(e.types.brack).concat("{"===a?"left":"right"),r,r+1,o,n);else if((0,e.isComma)(a))i(a,e.types.comma,r,r+1,o,n);else{if(!(0,e.isAlphabetic)(a))throw(0,e.printError)(t,"Lexer","Unable to lex ".concat(a),o,n,r,r),new Error;for(var l=r,f="",p=t[r];(0,e.isWord)(p);)f+=p,p=t[++r];i(f,e.reserved.has(f)?e.types.saved:e.types.name,l,r--,o,n),n+=r-l}r++,n++}return i("(end)",e.types.saved,-1,t.length,1/0,1/0),this.record.push(s),s}},{key:"toString",value:function(){console.table(this.record[this.record.length-1],["text","row","col"])}}]),r}();exports.default=n;
},{"./utils.js":"hmu4"}],"aBr6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./utils.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var u=function(){function r(){t(this,r),this.record=[]}return n(r,[{key:"parse",value:function(t,r){var n=0,u=[],o=function(t){var n=i(),u=n.from,o=n.to,a=n.row,p=n.col;throw(0,e.printError)(r,"Parser",t,a,p,u,o),new Error},a=function(e,r){var u=t[n],a=u.text,i=u.type;return e&&e!==a&&o("Expected '".concat(e,"' but got '").concat(a,"'")),r&&r!==i&&o("Expected '".concat(r,"' but got '").concat(i,"'")),t[n++]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t[n+e]?t[n+e]:{text:""}},p=function(){var t=i(),r=t.text,n=t.type;if("true"===r)return a("true"),{type:e.tokenTypes.term,value:!0};if("false"===r)return a("false"),{type:e.tokenTypes.term,value:!1};if("("===r){a("(");var u,p,s=c();return a(")"),"?"!==i().text?{type:e.tokenTypes.paren,value:s}:(a("?"),u="{"===i().text?v():c(),a(":"),p="{"===i().text?v():c(),{type:e.tokenTypes.ternary,cond:s,left:u,right:p})}if("return"===r)return a("return"),"}"!==i().text?{type:e.tokenTypes.saved,text:r,value:c()}:{type:e.tokenTypes.saved,text:r};if("continue"===r)return a("continue"),{type:e.tokenTypes.saved,text:r};if("break"===r)return a("break"),{type:e.tokenTypes.saved,text:r};if("while"===r){a("while");var f=c(),x=v();return{type:e.tokenTypes.loop,cond:f,value:x}}if("do"===r){a("do");var d=l(),k=v();return{type:e.tokenTypes.func,args:d,value:k}}if("{"===r)return v();if(n===e.types.name){var h=a(null,e.types.name);if("("===i().text){var T=y();return{type:e.tokenTypes.inv,name:h.text,args:T}}return{type:e.tokenTypes.id,name:h.text}}o("(end)"===r?"Reached end of input":"Term could not be parsed")},s=function t(){var r=function(){if("!"===i().text){a("!");var t=p();return{type:e.tokenTypes.uno,value:t}}return p()}();if("&"===i().text){a("&");var n=t();return{type:e.tokenTypes.and,left:r,right:n}}return r},f=function t(){var r=function t(){var r=s();if("^"===i().text){a("^");var n=t();return{type:e.tokenTypes.xor,left:r,right:n}}return r}();if("|"===i().text){a("|");var n=t();return{type:e.tokenTypes.or,left:r,right:n}}return r},y=function(){var e=[];for(a("(");")"!==i().text;)e.push(c()),","===i().text&&a(",");return a(")"),e},l=function(){var t=[];for(a("(");")"!==i().text;)t.push(a(null,e.types.name)),","===i().text&&a(",");return a(")"),t},v=function(){var t=[];for(a("{");"}"!==i().text;)t.push(c());return a("}"),{type:e.tokenTypes.block,value:t}},c=function t(){if("my"===i().text){a("my");var r=a(null,e.types.name);a("=");var n=t();return{type:e.tokenTypes.varDec,name:r.text,value:n}}if("="===i(1).text){var u=a(null,e.types.name);a("=");var o=t();return{type:e.tokenTypes.varAss,name:u.text,value:o}}return function t(){var r=f();if("=="===i().text){a("==");var n=t();return{type:e.tokenTypes.test,value:"==",left:r,right:n}}if("!="===i().text){a("!=");var u=t();return{type:e.tokenTypes.test,value:"!=",left:r,right:u}}return r}()};return function(){for(;"(end)"!==i().text;)u.push(c())}(),this.record.push(u),u}},{key:"toString",value:function(){console.log(JSON.stringify(this.record[this.record.length-1],["type","name","text","args","cond","left","right","result","value"],"  |"))}}]),r}();exports.default=u;
},{"./utils.js":"hmu4"}],"sAcx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./utils.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var n=function(){function a(){t(this,a),this.global=new e.Scope(null),this.global.add("print",{type:e.tokenTypes.std,args:["toPrint"],value:function(t){return console.log(JSON.stringify(t.type===e.tokenTypes.func?t:t.value,["name","text","type","args","value","cond","left","right"],2)),{value:!0}}})}return r(a,[{key:"run",value:function(e){var t=!0,a=!1,r=void 0;try{for(var n,l=e[Symbol.iterator]();!(t=(n=l.next()).done);t=!0){var o=n.value;this.evaluate(o,this.global)}}catch(u){a=!0,r=u}finally{try{t||null==l.return||l.return()}finally{if(a)throw r}}}},{key:"evaluate",value:function(t,a){switch(t.type){case e.tokenTypes.term:return this.terminal(t,a);case e.tokenTypes.id:return this.identifier(t,a);case e.tokenTypes.ternary:return this.ternaryOperation(t,a);case e.tokenTypes.uno:return this.unaryOperation(t,a);case e.tokenTypes.and:return this.andExpression(t,a);case e.tokenTypes.xor:return this.xorExpression(t,a);case e.tokenTypes.or:return this.orExpression(t,a);case e.tokenTypes.test:return this.comparison(t,a);case e.tokenTypes.varDec:return this.variableDeclaration(t,a);case e.tokenTypes.varAss:return this.variableAssignment(t,a);case e.tokenTypes.paren:return this.parenthesisGroup(t,a);case e.tokenTypes.inv:return this.functionInvocation(t,a);case e.tokenTypes.block:return this.blockGroup(t,a);case e.tokenTypes.saved:return this.reservedWord(t,a);case e.tokenTypes.loop:return this.loopGroup(t,a);case e.tokenTypes.func:return this.functionDeclaration(t,a);default:throw new Error("Invalid Token Type.")}}},{key:"terminal",value:function(e,t){return{value:e.value}}},{key:"identifier",value:function(e,t){return t.find(e.name)}},{key:"ternaryOperation",value:function(t,a){if(t.left.type===e.tokenTypes.saved)throw new Error("Reserved words not allowed in condition");var r=this.evaluate(t.cond,a),n=this.evaluate(r.value?t.left:t.right,a),l=n.value,o=n.type;return{value:n.ret||l,type:o}}},{key:"unaryOperation",value:function(t,a){if(t.value.type===e.tokenTypes.saved)throw new Error("Reserved words only allowed in blocks");return{value:!(t.value.type===e.tokenTypes.block?this.validate(this.evaluate(t.value,a)).value:this.evaluate(t.value,a).value)}}},{key:"andExpression",value:function(e,t){var a=this.evaluate(e.left,t);if(!a.value)return{value:a.value,type:a.type,ret:a.ret};var r=this.evaluate(e.right,t);return{value:void 0===r.ret?a.value&&r.value:a.value&&r.ret,type:r.type}}},{key:"xorExpression",value:function(e,t){var a=this.evaluate(e.left,t);if(a.type)return{value:a.value,type:a.type,ret:a.ret};var r=this.evaluate(e.right,t);return{value:void 0===r.ret?a.value&&!r.value||!a.value&&r.value:a.value&&!r.ret||!a.value&&r.ret,type:r.type}}},{key:"orExpression",value:function(e,t){var a=this.evaluate(e.left,t);if(a.value||a.type)return{value:a.value,type:a.type,ret:a.ret};var r=this.evaluate(e.right,t);return{value:r.ret||r.value,type:r.type}}},{key:"comparison",value:function(t,a){if(t.left.type===e.tokenTypes.saved||t.right.type===e.tokenTypes.saved)throw new Error("Reserved words only allowed in blocks");return"=="===t.value?{value:(t.left.type===e.tokenTypes.block?this.validate(this.evaluate(t.left,a)).value:this.evaluate(t.left,a).value)===(t.right.type===e.tokenTypes.block?this.validate(this.evaluate(t.right,a)).value:this.evaluate(t.right,a).value)}:{value:(t.left.type===e.tokenTypes.block?this.validate(this.evaluate(t.left,a)).value:this.evaluate(t.left,a).value)!==(t.right.type===e.tokenTypes.block?this.validate(this.evaluate(t.right,a)).value:this.evaluate(t.right,a).value)}}},{key:"variableDeclaration",value:function(t,a){if(t.value.type===e.tokenTypes.saved)throw new Error("Reserved words only allowed in blocks");if(void 0!==a.find(t.name))throw new Error("".concat(t.name," is already defined."));return a.add(t.name,t.value.type===e.tokenTypes.block?this.validate(this.evaluate(t.value,a)):this.evaluate(t.value,a)),{value:!0}}},{key:"variableAssignment",value:function(t,a){if(t.value.type===e.tokenTypes.saved)throw new Error("Reserved words only allowed in blocks");if(void 0===a.find(t.name))throw new Error("".concat(t.name," is undefined."));return a.reassign(t.name,t.value.type===e.tokenTypes.block?this.validate(this.evaluate(t.value,a)):this.evaluate(t.value,a)),{value:!0}}},{key:"validate",value:function(e){var t=e.value,a=e.type,r=e.ret;if("return"===a&&void 0!==r)return r;if(void 0!==a)throw new Error("Invalid type: ".concat(a,"."));return{value:t}}},{key:"parenthesisGroup",value:function(t,a){if(t.value.type===e.tokenTypes.saved)throw new Error("Reserved words only allowed in blocks");return this.evaluate(t.value,a)}},{key:"functionInvocation",value:function(t,a){var r=a.find(t.name);if(void 0===r)throw new Error("Function ".concat(t.name," is not defined."));if(r.args.length!==t.args.length)throw new Error("Argument Length does not match.");if(r.type===e.tokenTypes.std){var n=[],l=!0,o=!1,u=void 0;try{for(var i,v=t.args[Symbol.iterator]();!(l=(i=v.next()).done);l=!0){var s=i.value;n.push(s.type===e.tokenTypes.id?a.find(s.name):s.type===e.tokenTypes.block?this.validate(this.evaluate(s.value,a)):this.evaluate(void 0!==s.value?s.value:s,a))}}catch(c){o=!0,u=c}finally{try{l||null==v.return||v.return()}finally{if(o)throw u}}return this.validate(r.value.apply(r,n))}for(var y=new e.Scope(a),p=0;p<r.args.length;p++)y.add(r.args[p].text,t.args[p].type===e.tokenTypes.id?a.find(t.args[p].text):t.args[p].type===e.tokenTypes.block?this.validate(this.evaluate(t.args[p],a)):this.evaluate(t.args[p],a));return this.validate(this.evaluate(r.value,y))}},{key:"blockGroup",value:function(t,a){var r=new e.Scope(a),n=!0,l=!1,o=void 0;try{for(var u,i=t.value[Symbol.iterator]();!(n=(u=i.next()).done);n=!0){var v=u.value,s=this.evaluate(v,r),y=s.value,p=s.type,c=s.ret;if(void 0!==p)return{value:y,type:p,ret:c}}}catch(d){l=!0,o=d}finally{try{n||null==i.return||i.return()}finally{if(l)throw o}}return{value:!0}}},{key:"reservedWord",value:function(t,a){return"return"===t.text?{value:!0,type:"return",ret:void 0!==t.value?t.value.type===e.tokenTypes.block?this.validate(this.evaluate(t.value,a)):this.evaluate(t.value,a):void 0}:"continue"===t.text?{value:!0,type:"continue"}:"break"===t.text?{value:!0,type:"break"}:void 0}},{key:"loopGroup",value:function(t,a){if(t.cond.type===e.tokenTypes.saved)throw new Error("Reserved words only allowed in blocks");for(;;){if(!(t.cond.type===e.tokenTypes.block?this.validate(this.evaluate(t.cond,a)):this.evaluate(t.cond,a)).value)break;var r=new e.Scope(a),n=this.evaluate(t.value,r),l=n.value,o=n.type,u=n.ret;if("return"===o)return{value:void 0!==u?u:l};if("break"===o)break}return{value:!0}}},{key:"functionDeclaration",value:function(e,t){return e}}]),a}();exports.default=n;
},{"./utils.js":"hmu4"}],"Mu7X":[function(require,module,exports) {
"use strict";var e=d(require("/node_modules/domy-lang/bin/lexer.js")),n=d(require("/node_modules/domy-lang/bin/parser.js")),r=d(require("/node_modules/domy-lang/bin/interpreter.js")),t=require("/node_modules/domy-lang/bin/utils.js");function d(e){return e&&e.__esModule?e:{default:e}}window.runCode=function(){var d=editor.getValue(),o=new e.default;o.tokenize(d);var a=new n.default;a.parse(o.record.pop(),d);var u=document.createElement("code");u.id="terminal",document.getElementById("terminal").replaceWith(u);var i=new r.default;i.global.reassign("print",{type:t.tokenTypes.std,args:["toPrint"],value:function(e){var n=JSON.stringify(e.type===t.tokenTypes.func?e:e.value,["name","text","type","args","value","cond","left","right"],2),r=document.createElement("div");return r.innerHTML=n,u.appendChild(r),{value:!0}}}),i.run(a.record.pop())};
},{"/node_modules/domy-lang/bin/lexer.js":"XGlt","/node_modules/domy-lang/bin/parser.js":"aBr6","/node_modules/domy-lang/bin/interpreter.js":"sAcx","/node_modules/domy-lang/bin/utils.js":"hmu4"}]},{},["Mu7X"], null)
//# sourceMappingURL=/domy.cdb9b861.js.map